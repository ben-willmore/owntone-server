import{c as Ys,o as l,a as c,b as t,r as I,d as y,n as S,e as x,t as u,S as B,f as _,w as d,g as C,T as N,h as E,i as D,v as V,j as Qs,k as m,l as $,s as Js,m as ys,P as Qt,p as z,F as L,q as R,u as st,x as Y,y as Jt,z as Xs,A as Vt,B as Xt,C as Zs,D as te,E as se,G as K,H as ee,R as ie,I as oe,J as ae,V as ne,K as le,L as re,M as de}from"./vendor.js";const ce=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function a(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=a(o);fetch(o.href,i)}};ce();const gs="UPDATE_CONFIG",bs="UPDATE_SETTINGS",Bt="UPDATE_SETTINGS_OPTION",ks="UPDATE_LIBRARY_STATS",ws="UPDATE_LIBRARY_AUDIOBOOKS_COUNT",vs="UPDATE_LIBRARY_PODCASTS_COUNT",$s="UPDATE_LIBRARY_RSS_COUNT",xs="UPDATE_OUTPUTS",Zt="UPDATE_PLAYER_STATUS",Cs="UPDATE_QUEUE",Ss="UPDATE_LASTFM",As="UPDATE_SPOTIFY",qs="UPDATE_PAIRING",ts="SPOTIFY_NEW_RELEASES",ss="SPOTIFY_FEATURED_PLAYLISTS",fs="ADD_NOTIFICATION",Wt="DELETE_NOTIFICATION",es="ADD_RECENT_SEARCH",Ft="HIDE_SINGLES",is="HIDE_SPOTIFY",Ps="ARTISTS_SORT",Ts="ARTIST_ALBUMS_SORT",Ls="ALBUMS_SORT",Rs="SHOW_ONLY_NEXT_ITEMS",Q="SHOW_BURGER_MENU",J="SHOW_PLAYER_MENU",et="SHOW_UPDATE_DIALOG",os="UPDATE_DIALOG_SCAN_KIND";var T=Ys({state(){return{config:{websocket_port:0,version:"",buildoptions:[]},settings:{categories:[]},library:{artists:0,albums:0,songs:0,db_playtime:0,updating:!1},audiobooks_count:{},podcasts_count:{},rss_count:{},outputs:[],player:{state:"stop",repeat:"off",consume:!1,shuffle:!1,volume:0,item_id:0,item_length_ms:0,item_progress_ms:0},queue:{version:0,count:0,items:[]},lastfm:{},spotify:{},pairing:{},spotify_new_releases:[],spotify_featured_playlists:[],notifications:{next_id:1,list:[]},search_path:"/search/library",recent_searches:[],hide_singles:!1,hide_spotify:!1,artists_sort:"Name",artist_albums_sort:"Name",albums_sort:"Name",show_only_next_items:!1,show_burger_menu:!1,show_player_menu:!1,show_update_dialog:!1,update_dialog_scan_kind:""}},getters:{now_playing:s=>{const e=s.queue.items.find(function(a){return a.id===s.player.item_id});return e===void 0?{}:e},settings_webinterface:s=>s.settings?s.settings.categories.find(e=>e.name==="webinterface"):null,settings_option_recently_added_limit:(s,e)=>{if(e.settings_webinterface){const a=e.settings_webinterface.options.find(r=>r.name==="recently_added_limit");if(a)return a.value}return 100},settings_option_show_composer_now_playing:(s,e)=>{if(e.settings_webinterface){const a=e.settings_webinterface.options.find(r=>r.name==="show_composer_now_playing");if(a)return a.value}return!1},settings_option_show_composer_for_genre:(s,e)=>{if(e.settings_webinterface){const a=e.settings_webinterface.options.find(r=>r.name==="show_composer_for_genre");if(a)return a.value}return null},settings_category:s=>e=>s.settings.categories.find(a=>a.name===e),settings_option:s=>(e,a)=>{const r=s.settings.categories.find(o=>o.name===e);return r?r.options.find(o=>o.name===a):{}}},mutations:{[gs](s,e){s.config=e},[bs](s,e){s.settings=e},[Bt](s,e){const r=s.settings.categories.find(o=>o.name===e.category).options.find(o=>o.name===e.name);r.value=e.value},[ks](s,e){s.library=e},[ws](s,e){s.audiobooks_count=e},[vs](s,e){s.podcasts_count=e},[$s](s,e){s.rss_count=e},[xs](s,e){s.outputs=e},[Zt](s,e){s.player=e},[Cs](s,e){s.queue=e},[Ss](s,e){s.lastfm=e},[As](s,e){s.spotify=e},[qs](s,e){s.pairing=e},[ts](s,e){s.spotify_new_releases=e},[ss](s,e){s.spotify_featured_playlists=e},[fs](s,e){if(e.topic){const a=s.notifications.list.findIndex(r=>r.topic===e.topic);if(a>=0){s.notifications.list.splice(a,1,e);return}}s.notifications.list.push(e)},[Wt](s,e){const a=s.notifications.list.indexOf(e);a!==-1&&s.notifications.list.splice(a,1)},[es](s,e){const a=s.recent_searches.findIndex(r=>r===e);a>=0&&s.recent_searches.splice(a,1),s.recent_searches.splice(0,0,e),s.recent_searches.length>5&&s.recent_searches.pop()},[Ft](s,e){s.hide_singles=e},[is](s,e){s.hide_spotify=e},[Ps](s,e){s.artists_sort=e},[Ts](s,e){s.artist_albums_sort=e},[Ls](s,e){s.albums_sort=e},[Rs](s,e){s.show_only_next_items=e},[Q](s,e){s.show_burger_menu=e},[J](s,e){s.show_player_menu=e},[et](s,e){s.show_update_dialog=e},[os](s,e){s.update_dialog_scan_kind=e}},actions:{add_notification({commit:s,state:e},a){const r={id:e.notifications.next_id++,type:a.type,text:a.text,topic:a.topic,timeout:a.timeout};s(fs,r),a.timeout>0&&setTimeout(()=>{s(Wt,r)},a.timeout)}}}),w=(s,e)=>{const a=s.__vccOpts||s;for(const[r,o]of e)a[r]=o;return a};const _e={name:"ContentWithHeading",data(){return{options_visible:!1}},mounted(){this.$slots.options&&(this.observer=new IntersectionObserver(this.onElementObserved,{rootMargin:"-82px 0px 0px 0px",threshold:1}),this.observer.observe(this.$refs.options_ref))},methods:{onElementObserved(s){s.forEach(({target:e,isIntersecting:a})=>{this.options_visible=a})},scroll_to_top:function(){window.scrollTo({top:0,behavior:"smooth"})},scroll_to_content:function(){this.$route.meta.has_tabs?this.$scrollTo("#top",{offset:-140}):this.$scrollTo("#top",{offset:-100})},visibilityChanged:function(s){this.options_visible=s}}},ue={class:"section fd-content"},me={class:"container"},he={class:"columns is-centered"},pe={class:"column is-four-fifths"},fe={key:0},ye={ref:"options_ref",style:{height:"1px"}},ge={class:"buttons is-centered",style:{"margin-bottom":"6px","margin-top":"16px"}},be=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-chevron-up"})],-1),ke=[be],we=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-chevron-down"})],-1),ve=[we],$e={id:"top",class:"level"},xe={class:"level-left"},Ce={class:"level-item has-text-centered-mobile"},Se={class:"level-right has-text-centered-mobile"},Ae={style:{"margin-top":"16px"}};function qe(s,e,a,r,o,i){return l(),c("section",ue,[t("div",me,[t("div",he,[t("div",pe,[s.$slots.options?(l(),c("section",fe,[t("div",ye,null,512),I(s.$slots,"options"),t("nav",ge,[o.options_visible?(l(),c("a",{key:1,class:"button is-small is-white",onClick:e[1]||(e[1]=(...n)=>i.scroll_to_content&&i.scroll_to_content(...n))},ve)):(l(),c("a",{key:0,class:"button is-small is-white",onClick:e[0]||(e[0]=(...n)=>i.scroll_to_top&&i.scroll_to_top(...n))},ke))])])):y("",!0),t("div",{class:S({"fd-content-with-option":s.$slots.options})},[t("nav",$e,[t("div",xe,[t("div",Ce,[t("div",null,[I(s.$slots,"heading-left")])])]),t("div",Se,[I(s.$slots,"heading-right")])]),I(s.$slots,"content"),t("div",Ae,[I(s.$slots,"footer")])],2)])])])])}var U=w(_e,[["render",qe]]);x.interceptors.response.use(function(s){return s},function(s){return s.request.status&&s.request.responseURL&&T.dispatch("add_notification",{text:"Request failed (status: "+s.request.status+" "+s.request.statusText+", url: "+s.request.responseURL+")",type:"danger"}),Promise.reject(s)});var f={config(){return x.get("./api/config")},settings(){return x.get("./api/settings")},settings_update(s,e){return x.put("./api/settings/"+s+"/"+e.name,e)},library_stats(){return x.get("./api/library")},library_update(s){const e={};return s&&(e.scan_kind=s),x.put("./api/update",void 0,{params:e})},library_rescan(s){const e={};return s&&(e.scan_kind=s),x.put("./api/rescan",void 0,{params:e})},library_count(s){return x.get("./api/library/count?expression="+s)},queue(){return x.get("./api/queue")},queue_clear(){return x.put("./api/queue/clear")},queue_remove(s){return x.delete("./api/queue/items/"+s)},queue_move(s,e){return x.put("./api/queue/items/"+s+"?new_position="+e)},queue_add(s){return x.post("./api/queue/items/add?uris="+s).then(e=>(T.dispatch("add_notification",{text:e.data.count+" tracks appended to queue",type:"info",timeout:2e3}),Promise.resolve(e)))},queue_add_next(s){let e=0;return T.getters.now_playing&&T.getters.now_playing.id&&(e=T.getters.now_playing.position+1),x.post("./api/queue/items/add?uris="+s+"&position="+e).then(a=>(T.dispatch("add_notification",{text:a.data.count+" tracks appended to queue",type:"info",timeout:2e3}),Promise.resolve(a)))},queue_expression_add(s){const e={};return e.expression=s,x.post("./api/queue/items/add",void 0,{params:e}).then(a=>(T.dispatch("add_notification",{text:a.data.count+" tracks appended to queue",type:"info",timeout:2e3}),Promise.resolve(a)))},queue_expression_add_next(s){const e={};return e.expression=s,e.position=0,T.getters.now_playing&&T.getters.now_playing.id&&(e.position=T.getters.now_playing.position+1),x.post("./api/queue/items/add",void 0,{params:e}).then(a=>(T.dispatch("add_notification",{text:a.data.count+" tracks appended to queue",type:"info",timeout:2e3}),Promise.resolve(a)))},queue_save_playlist(s){return x.post("./api/queue/save",void 0,{params:{name:s}}).then(e=>(T.dispatch("add_notification",{text:'Queue saved to playlist "'+s+'"',type:"info",timeout:2e3}),Promise.resolve(e)))},player_status(){return x.get("./api/player")},player_play_uri(s,e,a=void 0){const r={};return r.uris=s,r.shuffle=e?"true":"false",r.clear="true",r.playback="start",r.playback_from_position=a,x.post("./api/queue/items/add",void 0,{params:r})},player_play_expression(s,e,a=void 0){const r={};return r.expression=s,r.shuffle=e?"true":"false",r.clear="true",r.playback="start",r.playback_from_position=a,x.post("./api/queue/items/add",void 0,{params:r})},player_play(s={}){return x.put("./api/player/play",void 0,{params:s})},player_playpos(s){return x.put("./api/player/play?position="+s)},player_playid(s){return x.put("./api/player/play?item_id="+s)},player_pause(){return x.put("./api/player/pause")},player_stop(){return x.put("./api/player/stop")},player_next(){return x.put("./api/player/next")},player_previous(){return x.put("./api/player/previous")},player_shuffle(s){const e=s?"true":"false";return x.put("./api/player/shuffle?state="+e)},player_consume(s){const e=s?"true":"false";return x.put("./api/player/consume?state="+e)},player_repeat(s){return x.put("./api/player/repeat?state="+s)},player_volume(s){return x.put("./api/player/volume?volume="+s)},player_output_volume(s,e){return x.put("./api/player/volume?volume="+e+"&output_id="+s)},player_seek_to_pos(s){return x.put("./api/player/seek?position_ms="+s)},player_seek(s){return x.put("./api/player/seek?seek_ms="+s)},outputs(){return x.get("./api/outputs")},output_update(s,e){return x.put("./api/outputs/"+s,e)},output_toggle(s){return x.put("./api/outputs/"+s+"/toggle")},library_artists(s=void 0){return x.get("./api/library/artists",{params:{media_kind:s}})},library_artist(s){return x.get("./api/library/artists/"+s)},library_artist_albums(s){return x.get("./api/library/artists/"+s+"/albums")},library_albums(s=void 0){return x.get("./api/library/albums",{params:{media_kind:s}})},library_album(s){return x.get("./api/library/albums/"+s)},library_album_tracks(s,e={limit:-1,offset:0}){return x.get("./api/library/albums/"+s+"/tracks",{params:e})},library_album_track_update(s,e){return x.put("./api/library/albums/"+s+"/tracks",void 0,{params:e})},library_genres(){return x.get("./api/library/genres")},library_genre(s){const e={type:"albums",media_kind:"music",expression:'genre is "'+s+'"'};return x.get("./api/search",{params:e})},library_genre_tracks(s){const e={type:"tracks",media_kind:"music",expression:'genre is "'+s+'"'};return x.get("./api/search",{params:e})},library_radio_streams(){const s={type:"tracks",media_kind:"music",expression:"data_kind is url and song_length = 0"};return x.get("./api/search",{params:s})},library_composers(){return x.get("./api/library/composers")},library_composer(s){const e={type:"albums",media_kind:"music",expression:'composer is "'+s+'"'};return x.get("./api/search",{params:e})},library_composer_tracks(s){const e={type:"tracks",media_kind:"music",expression:'composer is "'+s+'"'};return x.get("./api/search",{params:e})},library_artist_tracks(s){if(s){const e={type:"tracks",expression:'songartistid is "'+s+'"'};return x.get("./api/search",{params:e})}},library_podcasts_new_episodes(){const s={type:"tracks",expression:"media_kind is podcast and play_count = 0 ORDER BY time_added DESC"};return x.get("./api/search",{params:s})},library_podcast_episodes(s){const e={type:"tracks",expression:'media_kind is podcast and songalbumid is "'+s+'" ORDER BY date_released DESC'};return x.get("./api/search",{params:e})},library_add(s){return x.post("./api/library/add",void 0,{params:{url:s}})},library_playlist_delete(s){return x.delete("./api/library/playlists/"+s,void 0)},library_playlists(){return x.get("./api/library/playlists")},library_playlist_folder(s=0){return x.get("./api/library/playlists/"+s+"/playlists")},library_playlist(s){return x.get("./api/library/playlists/"+s)},library_playlist_tracks(s){return x.get("./api/library/playlists/"+s+"/tracks")},library_track(s){return x.get("./api/library/tracks/"+s)},library_track_playlists(s){return x.get("./api/library/tracks/"+s+"/playlists")},library_track_update(s,e={}){return x.put("./api/library/tracks/"+s,void 0,{params:e})},library_files(s=void 0){const e={directory:s};return x.get("./api/library/files",{params:e})},search(s){return x.get("./api/search",{params:s})},spotify(){return x.get("./api/spotify")},spotify_login(s){return x.post("./api/spotify-login",s)},spotify_logout(){return x.get("./api/spotify-logout")},lastfm(){return x.get("./api/lastfm")},lastfm_login(s){return x.post("./api/lastfm-login",s)},lastfm_logout(s){return x.get("./api/lastfm-logout")},pairing(){return x.get("./api/pairing")},pairing_kickoff(s){return x.post("./api/pairing",s)},artwork_url_append_size_params(s,e=600,a=600){return s&&s.startsWith("/")?s.includes("?")?s+"&maxwidth="+e+"&maxheight="+a:s+"?maxwidth="+e+"&maxheight="+a:s}};const Pe={name:"ListItemQueueItem",props:["item","position","current_position","show_only_next_items","edit_mode"],computed:{state(){return this.$store.state.player},is_next(){return this.current_position<0||this.position>=this.current_position}},methods:{play:function(){f.player_play({item_id:this.item.id})}}},Te={key:0,class:"media"},Le={key:0,class:"media-left"},Re=t("span",{class:"icon has-text-grey fd-is-movable handle"},[t("i",{class:"mdi mdi-drag-horizontal mdi-18px"})],-1),Ie=[Re],Ue={class:"media-right"};function Ee(s,e,a,r,o,i){return i.is_next||!a.show_only_next_items?(l(),c("div",Te,[a.edit_mode?(l(),c("div",Le,Ie)):y("",!0),t("div",{class:"media-content fd-has-action is-clipped",onClick:e[0]||(e[0]=(...n)=>i.play&&i.play(...n))},[t("h1",{class:S(["title is-6",{"has-text-primary":a.item.id===i.state.item_id,"has-text-grey-light":!i.is_next}])},u(a.item.title),3),t("h2",{class:S(["subtitle is-7",{"has-text-primary":a.item.id===i.state.item_id,"has-text-grey-light":!i.is_next,"has-text-grey":i.is_next&&a.item.id!==i.state.item_id}])},[t("b",null,u(a.item.artist),1)],2),t("h2",{class:S(["subtitle is-7",{"has-text-primary":a.item.id===i.state.item_id,"has-text-grey-light":!i.is_next,"has-text-grey":i.is_next&&a.item.id!==i.state.item_id}])},u(a.item.album),3)]),t("div",Ue,[I(s.$slots,"actions")])])):y("",!0)}var Oe=w(Pe,[["render",Ee]]);const De={name:"ModalDialogQueueItem",props:["show","item"],emits:["close"],data(){return{spotify_track:{}}},watch:{item(){if(this.item&&this.item.data_kind==="spotify"){const s=new B;s.setAccessToken(this.$store.state.spotify.webapi_token),s.getTrack(this.item.path.slice(this.item.path.lastIndexOf(":")+1)).then(e=>{this.spotify_track=e})}else this.spotify_track={}}},methods:{remove:function(){this.$emit("close"),f.queue_remove(this.item.id)},play:function(){this.$emit("close"),f.player_play({item_id:this.item.id})},open_album:function(){this.media_kind==="podcast"?this.$router.push({path:"/podcasts/"+this.item.album_id}):this.media_kind==="audiobook"?this.$router.push({path:"/audiobooks/"+this.item.album_id}):this.$router.push({path:"/music/albums/"+this.item.album_id})},open_album_artist:function(){this.$router.push({path:"/music/artists/"+this.item.album_artist_id})},open_genre:function(){this.$router.push({name:"Genre",params:{genre:this.item.genre}})},open_spotify_artist:function(){this.$emit("close"),this.$router.push({path:"/music/spotify/artists/"+this.spotify_track.artists[0].id})},open_spotify_album:function(){this.$emit("close"),this.$router.push({path:"/music/spotify/albums/"+this.spotify_track.album.id})}}},Ne={key:0,class:"modal is-active"},ze={class:"modal-content fd-modal-card"},Ve={class:"card"},Be={class:"card-content"},Fe={class:"title is-4"},Me={class:"subtitle"},je={class:"content is-small"},Ge=t("span",{class:"heading"},"Album",-1),He={key:1,class:"title is-6"},We={key:0},Ke=t("span",{class:"heading"},"Album artist",-1),Ye={key:1,class:"title is-6"},Qe={key:1},Je=t("span",{class:"heading"},"Composer",-1),Xe={class:"title is-6"},Ze={key:2},ti=t("span",{class:"heading"},"Year",-1),si={class:"title is-6"},ei={key:3},ii=t("span",{class:"heading"},"Genre",-1),oi=t("span",{class:"heading"},"Track / Disc",-1),ai={class:"title is-6"},ni=t("span",{class:"heading"},"Length",-1),li={class:"title is-6"},ri=t("span",{class:"heading"},"Path",-1),di={class:"title is-6"},ci=t("span",{class:"heading"},"Type",-1),_i={class:"title is-6"},ui={key:0,class:"has-text-weight-normal"},mi=C("("),hi=C(", "),pi=C(")"),fi=t("span",{class:"heading"},"Quality",-1),yi={class:"title is-6"},gi={key:0},bi={key:1},ki={key:2},wi={class:"card-footer"},vi=t("span",{class:"icon"},[t("i",{class:"mdi mdi-delete"})],-1),$i=t("span",{class:"is-size-7"},"Remove",-1),xi=[vi,$i],Ci=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),Si=t("span",{class:"is-size-7"},"Play",-1),Ai=[Ci,Si];function qi(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",Ne,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",ze,[t("div",Ve,[t("div",Be,[t("p",Fe,u(a.item.title),1),t("p",Me,u(a.item.artist),1),t("div",je,[t("p",null,[Ge,a.item.album_id?(l(),c("a",{key:0,class:"title is-6 has-text-link",onClick:e[1]||(e[1]=(...n)=>i.open_album&&i.open_album(...n))},u(a.item.album),1)):(l(),c("span",He,u(a.item.album),1))]),a.item.album_artist?(l(),c("p",We,[Ke,a.item.album_artist_id?(l(),c("a",{key:0,class:"title is-6 has-text-link",onClick:e[2]||(e[2]=(...n)=>i.open_album_artist&&i.open_album_artist(...n))},u(a.item.album_artist),1)):(l(),c("span",Ye,u(a.item.album_artist),1))])):y("",!0),a.item.composer?(l(),c("p",Qe,[Je,t("span",Xe,u(a.item.composer),1)])):y("",!0),a.item.year>0?(l(),c("p",Ze,[ti,t("span",si,u(a.item.year),1)])):y("",!0),a.item.genre?(l(),c("p",ei,[ii,t("a",{class:"title is-6 has-text-link",onClick:e[3]||(e[3]=(...n)=>i.open_genre&&i.open_genre(...n))},u(a.item.genre),1)])):y("",!0),t("p",null,[oi,t("span",ai,u(a.item.track_number)+" / "+u(a.item.disc_number),1)]),t("p",null,[ni,t("span",li,u(s.$filters.duration(a.item.length_ms)),1)]),t("p",null,[ri,t("span",di,u(a.item.path),1)]),t("p",null,[ci,t("span",_i,[C(u(a.item.media_kind)+" - "+u(a.item.data_kind)+" ",1),a.item.data_kind==="spotify"?(l(),c("span",ui,[mi,t("a",{onClick:e[4]||(e[4]=(...n)=>i.open_spotify_artist&&i.open_spotify_artist(...n))},"artist"),hi,t("a",{onClick:e[5]||(e[5]=(...n)=>i.open_spotify_album&&i.open_spotify_album(...n))},"album"),pi])):y("",!0)])]),t("p",null,[fi,t("span",yi,[C(u(a.item.type)+" ",1),a.item.samplerate?(l(),c("span",gi," | "+u(a.item.samplerate)+" Hz",1)):y("",!0),a.item.channels?(l(),c("span",bi," | "+u(s.$filters.channels(a.item.channels)),1)):y("",!0),a.item.bitrate?(l(),c("span",ki," | "+u(a.item.bitrate)+" Kb/s",1)):y("",!0)])])])]),t("footer",wi,[t("a",{class:"card-footer-item has-text-dark",onClick:e[6]||(e[6]=(...n)=>i.remove&&i.remove(...n))},xi),t("a",{class:"card-footer-item has-text-dark",onClick:e[7]||(e[7]=(...n)=>i.play&&i.play(...n))},Ai)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[8]||(e[8]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var Is=w(De,[["render",qi]]);const Pi={name:"ModalDialogAddUrlStream",props:["show"],emits:["close"],data(){return{url:"",loading:!1}},watch:{show(){this.show&&(this.loading=!1,setTimeout(()=>{this.$refs.url_field.focus()},10))}},methods:{add_stream:function(){this.loading=!0,f.queue_add(this.url).then(()=>{this.$emit("close"),this.url=""}).catch(()=>{this.loading=!1})},play:function(){this.loading=!0,f.player_play_uri(this.url,!1).then(()=>{this.$emit("close"),this.url=""}).catch(()=>{this.loading=!1})}}},Ti={key:0,class:"modal is-active"},Li={class:"modal-content fd-modal-card"},Ri={class:"card"},Ii={class:"card-content"},Ui=t("p",{class:"title is-4"},"Add stream URL",-1),Ei={class:"field"},Oi={class:"control is-expanded has-icons-left"},Di=["disabled"],Ni=t("span",{class:"icon is-left"},[t("i",{class:"mdi mdi-web"})],-1),zi={key:0,class:"card-footer"},Vi=t("a",{class:"card-footer-item has-text-dark"},[t("span",{class:"icon"},[t("i",{class:"mdi mdi-web"})]),t("span",{class:"is-size-7"},"Loading ...")],-1),Bi=[Vi],Fi={key:1,class:"card-footer"},Mi=t("span",{class:"icon"},[t("i",{class:"mdi mdi-cancel"})],-1),ji=t("span",{class:"is-size-7"},"Cancel",-1),Gi=[Mi,ji],Hi=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),Wi=t("span",{class:"is-size-7"},"Add",-1),Ki=[Hi,Wi],Yi=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),Qi=t("span",{class:"is-size-7"},"Play",-1),Ji=[Yi,Qi];function Xi(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",Ti,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",Li,[t("div",Ri,[t("div",Ii,[Ui,t("form",{class:"fd-has-margin-bottom",onSubmit:e[2]||(e[2]=E((...n)=>i.play&&i.play(...n),["prevent"]))},[t("div",Ei,[t("p",Oi,[D(t("input",{ref:"url_field","onUpdate:modelValue":e[1]||(e[1]=n=>o.url=n),class:"input is-shadowless",type:"text",placeholder:"http://url-to-stream",disabled:o.loading},null,8,Di),[[V,o.url]]),Ni])])],32)]),o.loading?(l(),c("footer",zi,Bi)):(l(),c("footer",Fi,[t("a",{class:"card-footer-item has-text-danger",onClick:e[3]||(e[3]=n=>s.$emit("close"))},Gi),t("a",{class:"card-footer-item has-text-dark",onClick:e[4]||(e[4]=(...n)=>i.add_stream&&i.add_stream(...n))},Ki),t("a",{class:"card-footer-item has-background-info has-text-white has-text-weight-bold",onClick:e[5]||(e[5]=(...n)=>i.play&&i.play(...n))},Ji)]))])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[6]||(e[6]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var Zi=w(Pi,[["render",Xi]]);const to={name:"ModalDialogPlaylistSave",props:["show"],emits:["close"],data(){return{playlist_name:"",loading:!1}},watch:{show(){this.show&&(this.loading=!1,setTimeout(()=>{this.$refs.playlist_name_field.focus()},10))}},methods:{save:function(){this.playlist_name.length<1||(this.loading=!0,f.queue_save_playlist(this.playlist_name).then(()=>{this.$emit("close"),this.playlist_name=""}).catch(()=>{this.loading=!1}))}}},so={key:0,class:"modal is-active"},eo={class:"modal-content fd-modal-card"},io={class:"card"},oo={class:"card-content"},ao=t("p",{class:"title is-4"},"Save queue to playlist",-1),no={class:"field"},lo={class:"control is-expanded has-icons-left"},ro=["disabled"],co=t("span",{class:"icon is-left"},[t("i",{class:"mdi mdi-file-music"})],-1),_o={key:0,class:"card-footer"},uo=t("a",{class:"card-footer-item has-text-dark"},[t("span",{class:"icon"},[t("i",{class:"mdi mdi-web"})]),t("span",{class:"is-size-7"},"Saving ...")],-1),mo=[uo],ho={key:1,class:"card-footer"},po=t("span",{class:"icon"},[t("i",{class:"mdi mdi-cancel"})],-1),fo=t("span",{class:"is-size-7"},"Cancel",-1),yo=[po,fo],go=t("span",{class:"icon"},[t("i",{class:"mdi mdi-content-save"})],-1),bo=t("span",{class:"is-size-7"},"Save",-1),ko=[go,bo];function wo(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",so,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",eo,[t("div",io,[t("div",oo,[ao,t("form",{class:"fd-has-margin-bottom",onSubmit:e[2]||(e[2]=E((...n)=>i.save&&i.save(...n),["prevent"]))},[t("div",no,[t("p",lo,[D(t("input",{ref:"playlist_name_field","onUpdate:modelValue":e[1]||(e[1]=n=>o.playlist_name=n),class:"input is-shadowless",type:"text",placeholder:"Playlist name",disabled:o.loading},null,8,ro),[[V,o.playlist_name]]),co])])],32)]),o.loading?(l(),c("footer",_o,mo)):(l(),c("footer",ho,[t("a",{class:"card-footer-item has-text-danger",onClick:e[3]||(e[3]=n=>s.$emit("close"))},yo),t("a",{class:"card-footer-item has-background-info has-text-white has-text-weight-bold",onClick:e[4]||(e[4]=(...n)=>i.save&&i.save(...n))},ko)]))])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[5]||(e[5]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var vo=w(to,[["render",wo]]);const $o={name:"PageQueue",components:{ContentWithHeading:U,ListItemQueueItem:Oe,draggable:Qs,ModalDialogQueueItem:Is,ModalDialogAddUrlStream:Zi,ModalDialogPlaylistSave:vo},data(){return{edit_mode:!1,show_details_modal:!1,show_url_modal:!1,show_pls_save_modal:!1,selected_item:{}}},computed:{state(){return this.$store.state.player},is_queue_save_allowed(){return this.$store.state.config.allow_modifying_stored_playlists&&this.$store.state.config.default_playlist_directory},queue(){return this.$store.state.queue},queue_items:{get(){return this.$store.state.queue.items},set(s){}},current_position(){const s=this.$store.getters.now_playing;return s===void 0||s.position===void 0?-1:this.$store.getters.now_playing.position},show_only_next_items(){return this.$store.state.show_only_next_items}},methods:{queue_clear:function(){f.queue_clear()},update_show_next_items:function(s){this.$store.commit(Rs,!this.show_only_next_items)},remove:function(s){f.queue_remove(s.id)},move_item:function(s){const e=this.show_only_next_items?s.oldIndex+this.current_position:s.oldIndex,a=this.queue_items[e],r=a.position+(s.newIndex-s.oldIndex);r!==e&&f.queue_move(a.id,r)},open_dialog:function(s){this.selected_item=s,this.show_details_modal=!0},open_add_stream_dialog:function(s){this.show_url_modal=!0},save_dialog:function(s){this.queue_items.length>0&&(this.show_pls_save_modal=!0)}}},xo={class:"heading"},Co=t("p",{class:"title is-4"},"Queue",-1),So={class:"buttons is-centered"},Ao=t("span",{class:"icon"},[t("i",{class:"mdi mdi-arrow-collapse-down"})],-1),qo=t("span",null,"Hide previous",-1),Po=[Ao,qo],To=t("span",{class:"icon"},[t("i",{class:"mdi mdi-web"})],-1),Lo=t("span",null,"Add Stream",-1),Ro=[To,Lo],Io=t("span",{class:"icon"},[t("i",{class:"mdi mdi-pencil"})],-1),Uo=t("span",null,"Edit",-1),Eo=[Io,Uo],Oo=t("span",{class:"icon"},[t("i",{class:"mdi mdi-delete-empty"})],-1),Do=t("span",null,"Clear",-1),No=[Oo,Do],zo=["disabled"],Vo=t("span",{class:"icon"},[t("i",{class:"mdi mdi-content-save"})],-1),Bo=t("span",null,"Save",-1),Fo=[Vo,Bo],Mo=["onClick"],jo=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),Go=[jo],Ho=["onClick"],Wo=t("span",{class:"icon has-text-grey"},[t("i",{class:"mdi mdi-delete mdi-18px"})],-1),Ko=[Wo];function Yo(s,e,a,r,o,i){const n=m("list-item-queue-item"),p=m("draggable"),h=m("modal-dialog-queue-item"),k=m("modal-dialog-add-url-stream"),b=m("modal-dialog-playlist-save"),g=m("content-with-heading");return l(),$(g,null,{"heading-left":d(()=>[t("p",xo,u(i.queue.count)+" tracks",1),Co]),"heading-right":d(()=>[t("div",So,[t("a",{class:S(["button is-small",{"is-info":i.show_only_next_items}]),onClick:e[0]||(e[0]=(...v)=>i.update_show_next_items&&i.update_show_next_items(...v))},Po,2),t("a",{class:"button is-small",onClick:e[1]||(e[1]=(...v)=>i.open_add_stream_dialog&&i.open_add_stream_dialog(...v))},Ro),t("a",{class:S(["button is-small",{"is-info":o.edit_mode}]),onClick:e[2]||(e[2]=v=>o.edit_mode=!o.edit_mode)},Eo,2),t("a",{class:"button is-small",onClick:e[3]||(e[3]=(...v)=>i.queue_clear&&i.queue_clear(...v))},No),i.is_queue_save_allowed?(l(),c("a",{key:0,class:"button is-small",disabled:i.queue_items.length===0,onClick:e[4]||(e[4]=(...v)=>i.save_dialog&&i.save_dialog(...v))},Fo,8,zo)):y("",!0)])]),content:d(()=>[_(p,{modelValue:i.queue_items,"onUpdate:modelValue":e[5]||(e[5]=v=>i.queue_items=v),handle:".handle","item-key":"id",onEnd:i.move_item},{item:d(({element:v,index:A})=>[_(n,{item:v,position:A,current_position:i.current_position,show_only_next_items:i.show_only_next_items,edit_mode:o.edit_mode},{actions:d(()=>[o.edit_mode?y("",!0):(l(),c("a",{key:0,onClick:E(q=>i.open_dialog(v),["prevent","stop"])},Go,8,Mo)),v.id!==i.state.item_id&&o.edit_mode?(l(),c("a",{key:1,onClick:E(q=>i.remove(v),["prevent","stop"])},Ko,8,Ho)):y("",!0)]),_:2},1032,["item","position","current_position","show_only_next_items","edit_mode"])]),_:1},8,["modelValue","onEnd"]),_(h,{show:o.show_details_modal,item:o.selected_item,onClose:e[6]||(e[6]=v=>o.show_details_modal=!1)},null,8,["show","item"]),_(k,{show:o.show_url_modal,onClose:e[7]||(e[7]=v=>o.show_url_modal=!1)},null,8,["show"]),i.is_queue_save_allowed?(l(),$(b,{key:0,show:o.show_pls_save_modal,onClose:e[8]||(e[8]=v=>o.show_pls_save_modal=!1)},null,8,["show"])):y("",!0)]),_:1})}var Qo=w($o,[["render",Yo]]);function Jo(s){const e=s.replace(/#/,""),a=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),o=parseInt(e.substr(4,2),16);return[.299*a,.587*r,.114*o].reduce((n,p)=>n+p)/255>.5}function Xo(s){return Jo(s)?"#000000":"#ffffff"}function Zo(s){const e='<svg width="'+s.width+'" height="'+s.height+'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '+s.width+" "+s.height+'" preserveAspectRatio="none"><defs><style type="text/css">    #holder text {      fill: '+s.textColor+";      font-family: "+s.fontFamily+";      font-size: "+s.fontSize+"px;      font-weight: "+s.fontWeight+';    }  </style></defs><g id="holder">  <rect width="100%" height="100%" fill="'+s.backgroundColor+'"></rect>  <g>    <text text-anchor="middle" x="50%" y="50%" dy=".3em">'+s.caption+"</text>  </g></g></svg>";return"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(e)}function ta(s,e,a){const r=Js(e),o=Xo(r),i={width:a.width,height:a.height,textColor:o,backgroundColor:r,caption:s,fontFamily:a.font_family,fontSize:a.font_size,fontWeight:a.font_weight};return Zo(i)}const sa={name:"CoverArtwork",props:["artist","album","artwork_url","maxwidth","maxheight"],emits:["click"],data(){return{width:600,height:600,font_family:"sans-serif",font_size:200,font_weight:600,lazy_lifecycle:{error:s=>{s.src=this.dataURI()}}}},computed:{artwork_url_with_size:function(){return this.maxwidth>0&&this.maxheight>0?f.artwork_url_append_size_params(this.artwork_url,this.maxwidth,this.maxheight):f.artwork_url_append_size_params(this.artwork_url)},alt_text(){return this.artist+" - "+this.album},caption(){return this.album?this.album.substring(0,2):this.artist?this.artist.substring(0,2):""}},methods:{dataURI:function(){return ta(this.caption,this.alt_text,{width:this.width,height:this.height,font_family:this.font_family,font_size:this.font_size,font_weight:this.font_weight})}}};function ea(s,e,a,r,o,i){const n=ys("lazy");return l(),c("figure",null,[D(t("img",{onClick:e[0]||(e[0]=p=>s.$emit("click"))},null,512),[[n,{src:i.artwork_url_with_size,lifecycle:o.lazy_lifecycle}]])])}var M=w(sa,[["render",ea]]);const ia={name:"PageNowPlaying",components:{ModalDialogQueueItem:Is,Slider:Qt,CoverArtwork:M},data(){return{item_progress_ms:0,interval_id:0,show_details_modal:!1,selected_item:{}}},computed:{state(){return this.$store.state.player},now_playing(){return this.$store.getters.now_playing},settings_option_show_composer_now_playing(){return this.$store.getters.settings_option_show_composer_now_playing},settings_option_show_composer_for_genre(){return this.$store.getters.settings_option_show_composer_for_genre},composer(){return this.settings_option_show_composer_now_playing&&(!this.settings_option_show_composer_for_genre||this.now_playing.genre&&this.settings_option_show_composer_for_genre.toLowerCase().split(",").findIndex(s=>this.now_playing.genre.toLowerCase().indexOf(s.trim())>=0)>=0)?this.now_playing.composer:null}},watch:{state(){this.interval_id>0&&(window.clearTimeout(this.interval_id),this.interval_id=0),this.item_progress_ms=this.state.item_progress_ms,this.state.state==="play"&&(this.interval_id=window.setInterval(this.tick,1e3))}},created(){this.item_progress_ms=this.state.item_progress_ms,f.player_status().then(({data:s})=>{this.$store.commit(Zt,s),this.state.state==="play"&&(this.interval_id=window.setInterval(this.tick,1e3))})},unmounted(){this.interval_id>0&&(window.clearTimeout(this.interval_id),this.interval_id=0)},methods:{tick:function(){this.item_progress_ms+=1e3},seek:function(s){f.player_seek_to_pos(s).catch(()=>{this.item_progress_ms=this.state.item_progress_ms})},open_dialog:function(s){this.selected_item=s,this.show_details_modal=!0}}},oa={key:0,class:"fd-is-fullheight"},aa={class:"fd-is-expanded"},na={class:"fd-has-padding-left-right"},la={class:"container has-text-centered"},ra={class:"control has-text-centered fd-progress-now-playing"},da={class:"content"},ca={class:"fd-has-padding-left-right"},_a={class:"container has-text-centered fd-has-margin-top"},ua={class:"title is-5"},ma={class:"title is-6"},ha={key:0,class:"subtitle is-6 has-text-grey has-text-weight-bold"},pa={class:"subtitle is-6"},fa={key:1,class:"fd-is-fullheight"},ya=t("div",{class:"fd-is-expanded fd-has-padding-left-right",style:{"flex-direction":"column"}},[t("div",{class:"content has-text-centered"},[t("h1",{class:"title is-5"},"Your play queue is empty"),t("p",null,"Add some tracks by browsing your library")])],-1),ga=[ya];function ba(s,e,a,r,o,i){const n=m("cover-artwork"),p=m("Slider"),h=m("modal-dialog-queue-item");return l(),c("section",null,[i.now_playing.id>0?(l(),c("div",oa,[t("div",aa,[_(n,{artwork_url:i.now_playing.artwork_url,artist:i.now_playing.artist,album:i.now_playing.album,class:"fd-cover-image fd-has-action",onClick:e[0]||(e[0]=k=>i.open_dialog(i.now_playing))},null,8,["artwork_url","artist","album"])]),t("div",na,[t("div",la,[t("p",ra,[_(p,{modelValue:o.item_progress_ms,"onUpdate:modelValue":e[1]||(e[1]=k=>o.item_progress_ms=k),min:0,max:i.state.item_length_ms,step:1e3,tooltips:!1,disabled:i.state.state==="stop",classes:{target:"seek-slider"},onChange:i.seek},null,8,["modelValue","max","disabled","onChange"])]),t("p",da,[t("span",null,u(s.$filters.duration(o.item_progress_ms))+" / "+u(s.$filters.duration(i.now_playing.length_ms)),1)])])]),t("div",ca,[t("div",_a,[t("h1",ua,u(i.now_playing.title),1),t("h2",ma,u(i.now_playing.artist),1),i.composer?(l(),c("h2",ha,u(i.composer),1)):y("",!0),t("h3",pa,u(i.now_playing.album),1)])])])):(l(),c("div",fa,ga)),_(h,{show:o.show_details_modal,item:o.selected_item,onClose:e[2]||(e[2]=k=>o.show_details_modal=!1)},null,8,["show","item"])])}var ka=w(ia,[["render",ba]]);const wa={name:"TabsMusic",computed:{spotify_enabled(){return this.$store.state.spotify.webapi_token_valid}}},va={class:"section fd-tabs-section"},$a={class:"container"},xa={class:"columns is-centered"},Ca={class:"column is-four-fifths"},Sa={class:"tabs is-centered is-small"},Aa=["onClick","onKeypress"],qa=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-web"})],-1),Pa=t("span",{class:""},"Browse",-1),Ta=[qa,Pa],La=["onClick","onKeypress"],Ra=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-artist"})],-1),Ia=t("span",{class:""},"Artists",-1),Ua=[Ra,Ia],Ea=["onClick","onKeypress"],Oa=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-album"})],-1),Da=t("span",{class:""},"Albums",-1),Na=[Oa,Da],za=["onClick","onKeypress"],Va=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-speaker"})],-1),Ba=t("span",{class:""},"Genres",-1),Fa=[Va,Ba],Ma=["onClick","onKeypress"],ja=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-book-open-page-variant"})],-1),Ga=t("span",{class:""},"Composers",-1),Ha=[ja,Ga],Wa=["onClick","onKeypress"],Ka=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-spotify"})],-1),Ya=t("span",{class:""},"Spotify",-1),Qa=[Ka,Ya];function Ja(s,e,a,r,o,i){const n=m("router-link");return l(),c("section",va,[t("div",$a,[t("div",xa,[t("div",Ca,[t("div",Sa,[t("ul",null,[_(n,{to:"/music/browse",custom:""},{default:d(({navigate:p,isActive:h})=>[t("li",{class:S({"is-active":h})},[t("a",{onClick:p,onKeypress:z(p,["enter"])},Ta,40,Aa)],2)]),_:1}),_(n,{to:"/music/artists",custom:""},{default:d(({navigate:p,isActive:h})=>[t("li",{class:S({"is-active":h})},[t("a",{onClick:p,onKeypress:z(p,["enter"])},Ua,40,La)],2)]),_:1}),_(n,{to:"/music/albums",custom:""},{default:d(({navigate:p,isActive:h})=>[t("li",{class:S({"is-active":h})},[t("a",{onClick:p,onKeypress:z(p,["enter"])},Na,40,Ea)],2)]),_:1}),_(n,{to:"/music/genres",custom:""},{default:d(({navigate:p,isActive:h})=>[t("li",{class:S({"is-active":h})},[t("a",{onClick:p,onKeypress:z(p,["enter"])},Fa,40,za)],2)]),_:1}),_(n,{to:"/music/composers",custom:""},{default:d(({navigate:p,isActive:h})=>[t("li",{class:S({"is-active":h})},[t("a",{onClick:p,onKeypress:z(p,["enter"])},Ha,40,Ma)],2)]),_:1}),i.spotify_enabled?(l(),$(n,{key:0,to:"/music/spotify",custom:""},{default:d(({navigate:p,isActive:h})=>[t("li",{class:S({"is-active":h})},[t("a",{onClick:p,onKeypress:z(p,["enter"])},Qa,40,Wa)],2)]),_:1})):y("",!0)])])])])])])}var j=w(wa,[["render",Ja]]);const Xa={name:"ListItemAlbum",props:["album","media_kind"]},Za=["id"],tn={key:0,class:"media-left fd-has-action"},sn={class:"media-content fd-has-action is-clipped"},en={style:{"margin-top":"0.7rem"}},on={class:"title is-6"},an={class:"subtitle is-7 has-text-grey"},nn={key:0,class:"subtitle is-7 has-text-grey has-text-weight-normal"},ln={class:"media-right",style:{"padding-top":"0.7rem"}};function rn(s,e,a,r,o,i){return l(),c("div",{id:"index_"+a.album.name_sort.charAt(0).toUpperCase(),class:"media"},[s.$slots.artwork?(l(),c("div",tn,[I(s.$slots,"artwork")])):y("",!0),t("div",sn,[t("div",en,[t("h1",on,u(a.album.name),1),t("h2",an,[t("b",null,u(a.album.artist),1)]),a.album.date_released&&a.album.media_kind==="music"?(l(),c("h2",nn,u(s.$filters.time(a.album.date_released,"L")),1)):y("",!0)])]),t("div",ln,[I(s.$slots,"actions")])],8,Za)}var Us=w(Xa,[["render",rn]]);const dn={name:"ModalDialogAlbum",components:{CoverArtwork:M},props:["show","album","media_kind","new_tracks"],emits:["close","remove-podcast","play-count-changed"],data(){return{artwork_visible:!1}},computed:{artwork_url:function(){return f.artwork_url_append_size_params(this.album.artwork_url)},media_kind_resolved:function(){return this.media_kind?this.media_kind:this.album.media_kind}},methods:{play:function(){this.$emit("close"),f.player_play_uri(this.album.uri,!1)},queue_add:function(){this.$emit("close"),f.queue_add(this.album.uri)},queue_add_next:function(){this.$emit("close"),f.queue_add_next(this.album.uri)},open_album:function(){this.media_kind_resolved==="podcast"?this.$router.push({path:"/podcasts/"+this.album.id}):this.media_kind_resolved==="audiobook"?this.$router.push({path:"/audiobooks/"+this.album.id}):this.$router.push({path:"/music/albums/"+this.album.id})},open_artist:function(){this.media_kind_resolved==="podcast"||(this.media_kind_resolved==="audiobook"?this.$router.push({path:"/audiobooks/artists/"+this.album.artist_id}):this.$router.push({path:"/music/artists/"+this.album.artist_id}))},mark_played:function(){f.library_album_track_update(this.album.id,{play_count:"played"}).then(({data:s})=>{this.$emit("play-count-changed"),this.$emit("close")})},artwork_loaded:function(){this.artwork_visible=!0},artwork_error:function(){this.artwork_visible=!1}}},cn={key:0,class:"modal is-active"},_n={class:"modal-content fd-modal-card"},un={class:"card"},mn={class:"card-content"},hn={class:"title is-4"},pn={key:0,class:"buttons"},fn={class:"content is-small"},yn={key:0},gn=t("span",{class:"heading"},"Album artist",-1),bn={key:1},kn=t("span",{class:"heading"},"Release date",-1),wn={class:"title is-6"},vn={key:2},$n=t("span",{class:"heading"},"Year",-1),xn={class:"title is-6"},Cn=t("span",{class:"heading"},"Tracks",-1),Sn={class:"title is-6"},An=t("span",{class:"heading"},"Length",-1),qn={class:"title is-6"},Pn=t("span",{class:"heading"},"Type",-1),Tn={class:"title is-6"},Ln=t("span",{class:"heading"},"Added at",-1),Rn={class:"title is-6"},In={class:"card-footer"},Un=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),En=t("span",{class:"is-size-7"},"Add",-1),On=[Un,En],Dn=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-play"})],-1),Nn=t("span",{class:"is-size-7"},"Add Next",-1),zn=[Dn,Nn],Vn=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),Bn=t("span",{class:"is-size-7"},"Play",-1),Fn=[Vn,Bn];function Mn(s,e,a,r,o,i){const n=m("cover-artwork");return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",cn,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=p=>s.$emit("close"))}),t("div",_n,[t("div",un,[t("div",mn,[_(n,{artwork_url:a.album.artwork_url,artist:a.album.artist,album:a.album.name,class:"image is-square fd-has-margin-bottom fd-has-shadow"},null,8,["artwork_url","artist","album"]),t("p",hn,[t("a",{class:"has-text-link",onClick:e[1]||(e[1]=(...p)=>i.open_album&&i.open_album(...p))},u(a.album.name),1)]),i.media_kind_resolved==="podcast"?(l(),c("div",pn,[t("a",{class:"button is-small",onClick:e[2]||(e[2]=(...p)=>i.mark_played&&i.mark_played(...p))},"Mark as played"),t("a",{class:"button is-small",onClick:e[3]||(e[3]=p=>s.$emit("remove-podcast"))},"Remove podcast")])):y("",!0),t("div",fn,[a.album.artist?(l(),c("p",yn,[gn,t("a",{class:"title is-6 has-text-link",onClick:e[4]||(e[4]=(...p)=>i.open_artist&&i.open_artist(...p))},u(a.album.artist),1)])):y("",!0),a.album.date_released?(l(),c("p",bn,[kn,t("span",wn,u(s.$filters.time(a.album.date_released,"L")),1)])):a.album.year>0?(l(),c("p",vn,[$n,t("span",xn,u(a.album.year),1)])):y("",!0),t("p",null,[Cn,t("span",Sn,u(a.album.track_count),1)]),t("p",null,[An,t("span",qn,u(s.$filters.duration(a.album.length_ms)),1)]),t("p",null,[Pn,t("span",Tn,u(a.album.media_kind)+" - "+u(a.album.data_kind),1)]),t("p",null,[Ln,t("span",Rn,u(s.$filters.time(a.album.time_added,"L LT")),1)])])]),t("footer",In,[t("a",{class:"card-footer-item has-text-dark",onClick:e[5]||(e[5]=(...p)=>i.queue_add&&i.queue_add(...p))},On),t("a",{class:"card-footer-item has-text-dark",onClick:e[6]||(e[6]=(...p)=>i.queue_add_next&&i.queue_add_next(...p))},zn),t("a",{class:"card-footer-item has-text-dark",onClick:e[7]||(e[7]=(...p)=>i.play&&i.play(...p))},Fn)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[8]||(e[8]=p=>s.$emit("close"))})])):y("",!0)]),_:1})])}var it=w(dn,[["render",Mn]]);const jn={name:"ModalDialog",props:["show","title","ok_action","delete_action","close_action"],emits:["delete","close","ok"]},Gn={key:0,class:"modal is-active"},Hn={class:"modal-content fd-modal-card"},Wn={class:"card"},Kn={class:"card-content"},Yn={key:0,class:"title is-4"},Qn={class:"card-footer"},Jn=t("span",{class:"icon"},[t("i",{class:"mdi mdi-cancel"})],-1),Xn={class:"is-size-7"},Zn=t("span",{class:"icon"},[t("i",{class:"mdi mdi-delete"})],-1),tl={class:"is-size-7"},sl=t("span",{class:"icon"},[t("i",{class:"mdi mdi-check"})],-1),el={class:"is-size-7"};function il(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",Gn,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",Hn,[t("div",Wn,[t("div",Kn,[a.title?(l(),c("p",Yn,u(a.title),1)):y("",!0),I(s.$slots,"modal-content")]),t("footer",Qn,[t("a",{class:"card-footer-item has-text-dark",onClick:e[1]||(e[1]=n=>s.$emit("close"))},[Jn,t("span",Xn,u(a.close_action?a.close_action:"Cancel"),1)]),a.delete_action?(l(),c("a",{key:0,class:"card-footer-item has-background-danger has-text-white has-text-weight-bold",onClick:e[2]||(e[2]=n=>s.$emit("delete"))},[Zn,t("span",tl,u(a.delete_action),1)])):y("",!0),a.ok_action?(l(),c("a",{key:1,class:"card-footer-item has-background-info has-text-white has-text-weight-bold",onClick:e[3]||(e[3]=n=>s.$emit("ok"))},[sl,t("span",el,u(a.ok_action),1)])):y("",!0)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[4]||(e[4]=n=>s.$emit("close"))})])):y("",!0)]),_:3})])}var as=w(jn,[["render",il]]);class ot{constructor(e,a={hideSingles:!1,hideSpotify:!1,sort:"Name",group:!1}){this.items=e,this.options=a,this.grouped={},this.sortedAndFiltered=[],this.indexList=[],this.init()}init(){this.createSortedAndFilteredList(),this.createGroupedList(),this.createIndexList()}getAlbumIndex(e){return this.options.sort==="Recently added"?e.time_added.substring(0,4):this.options.sort==="Recently added (browse)"?this.getRecentlyAddedBrowseIndex(e.time_added):this.options.sort==="Recently released"||this.options.sort==="Release date"?e.date_released?e.date_released.substring(0,4):"0000":e.name_sort.charAt(0).toUpperCase()}getRecentlyAddedBrowseIndex(e){if(!e)return"0000";const a=new Date().getTime()-new Date(e).getTime();return a<864e5?"Today":a<6048e5?"Last week":a<2592e6?"Last month":e.substring(0,4)}isAlbumVisible(e){return!(this.options.hideSingles&&e.track_count<=2||this.options.hideSpotify&&e.data_kind==="spotify")}createIndexList(){this.indexList=[...new Set(this.sortedAndFiltered.map(e=>this.getAlbumIndex(e)))]}createSortedAndFilteredList(){let e=this.items;(this.options.hideSingles||this.options.hideSpotify||this.options.hideOther)&&(e=e.filter(a=>this.isAlbumVisible(a))),this.options.sort==="Recently added"||this.options.sort==="Recently added (browse)"?e=[...e].sort((a,r)=>r.time_added.localeCompare(a.time_added)):this.options.sort==="Recently released"?e=[...e].sort((a,r)=>a.date_released?r.date_released?r.date_released.localeCompare(a.date_released):-1:1):this.options.sort==="Release date"&&(e=[...e].sort((a,r)=>a.date_released?r.date_released?a.date_released.localeCompare(r.date_released):1:-1)),this.sortedAndFiltered=e}createGroupedList(){this.options.group||(this.grouped={}),this.grouped=this.sortedAndFiltered.reduce((e,a)=>{const r=this.getAlbumIndex(a);return e[r]=[...e[r]||[],a],e},{})}}const ol={name:"ListAlbums",components:{ListItemAlbum:Us,ModalDialogAlbum:it,ModalDialog:as,CoverArtwork:M},props:["albums","media_kind"],emits:["play-count-changed","podcast-deleted"],data(){return{show_details_modal:!1,selected_album:{},show_remove_podcast_modal:!1,rss_playlist_to_remove:{}}},computed:{is_visible_artwork(){return this.$store.getters.settings_option("webinterface","show_cover_artwork_in_album_lists").value},media_kind_resolved:function(){return this.media_kind?this.media_kind:this.selected_album.media_kind},albums_list:function(){return Array.isArray(this.albums)?this.albums:this.albums?this.albums.sortedAndFiltered:[]},is_grouped:function(){return this.albums instanceof ot&&this.albums.options.group}},methods:{open_album:function(s){this.selected_album=s,this.media_kind_resolved==="podcast"?this.$router.push({path:"/podcasts/"+s.id}):this.media_kind_resolved==="audiobook"?this.$router.push({path:"/audiobooks/"+s.id}):this.$router.push({path:"/music/albums/"+s.id})},open_dialog:function(s){this.selected_album=s,this.show_details_modal=!0},open_remove_podcast_dialog:function(){f.library_album_tracks(this.selected_album.id,{limit:1}).then(({data:s})=>{f.library_track_playlists(s.items[0].id).then(({data:e})=>{const a=e.items.filter(r=>r.type==="rss");if(a.length!==1){this.$store.dispatch("add_notification",{text:"Podcast cannot be removed. Probably it was not added as an RSS playlist.",type:"danger"});return}this.rss_playlist_to_remove=a[0],this.show_remove_podcast_modal=!0,this.show_details_modal=!1})})},play_count_changed:function(){this.$emit("play-count-changed")},remove_podcast:function(){this.show_remove_podcast_modal=!1,f.library_playlist_delete(this.rss_playlist_to_remove.id).then(()=>{this.$emit("podcast-deleted")})}}},al={key:0},nl=["id"],ll=["album","onClick"],rl={key:0,class:"media-left fd-has-action"},dl={class:"image is-64x64 fd-has-shadow fd-has-action"},cl={class:"media-content fd-has-action is-clipped"},_l={style:{"margin-top":"0.7rem"}},ul={class:"title is-6"},ml={class:"subtitle is-7 has-text-grey"},hl={key:0,class:"subtitle is-7 has-text-grey has-text-weight-normal"},pl={class:"media-right",style:{"padding-top":"0.7rem"}},fl=["onClick"],yl=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),gl=[yl],bl={key:1},kl={class:"image is-64x64 fd-has-shadow fd-has-action"},wl=["onClick"],vl=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),$l=[vl],xl=t("p",null,"Permanently remove this podcast from your library?",-1),Cl={class:"is-size-7"},Sl=C(" (This will also remove the RSS playlist "),Al=C(".) ");function ql(s,e,a,r,o,i){const n=m("cover-artwork"),p=m("list-item-album"),h=m("modal-dialog-album"),k=m("modal-dialog");return l(),c("div",null,[i.is_grouped?(l(),c("div",al,[(l(!0),c(L,null,R(a.albums.indexList,b=>(l(),c("div",{key:b,class:"mb-6"},[t("span",{id:"index_"+b,class:"tag is-info is-light is-small has-text-weight-bold"},u(b),9,nl),(l(!0),c(L,null,R(a.albums.grouped[b],g=>(l(),c("div",{key:g.id,class:"media",album:g,onClick:v=>i.open_album(g)},[i.is_visible_artwork?(l(),c("div",rl,[t("p",dl,[_(n,{artwork_url:g.artwork_url,artist:g.artist,album:g.name,maxwidth:64,maxheight:64},null,8,["artwork_url","artist","album"])])])):y("",!0),t("div",cl,[t("div",_l,[t("h1",ul,u(g.name),1),t("h2",ml,[t("b",null,u(g.artist),1)]),g.date_released&&g.media_kind==="music"?(l(),c("h2",hl,u(s.$filters.time(g.date_released,"L")),1)):y("",!0)])]),t("div",pl,[t("a",{onClick:E(v=>i.open_dialog(g),["prevent","stop"])},gl,8,fl)])],8,ll))),128))]))),128))])):(l(),c("div",bl,[(l(!0),c(L,null,R(i.albums_list,b=>(l(),$(p,{key:b.id,album:b,onClick:g=>i.open_album(b)},st({actions:d(()=>[t("a",{onClick:E(g=>i.open_dialog(b),["prevent","stop"])},$l,8,wl)]),_:2},[i.is_visible_artwork?{name:"artwork",fn:d(()=>[t("p",kl,[_(n,{artwork_url:b.artwork_url,artist:b.artist,album:b.name,maxwidth:64,maxheight:64},null,8,["artwork_url","artist","album"])])])}:void 0]),1032,["album","onClick"]))),128))])),_(h,{show:o.show_details_modal,album:o.selected_album,media_kind:a.media_kind,onRemovePodcast:e[0]||(e[0]=b=>i.open_remove_podcast_dialog()),onPlayCountChanged:e[1]||(e[1]=b=>i.play_count_changed()),onClose:e[2]||(e[2]=b=>o.show_details_modal=!1)},null,8,["show","album","media_kind"]),_(k,{show:o.show_remove_podcast_modal,title:"Remove podcast",delete_action:"Remove",onClose:e[3]||(e[3]=b=>o.show_remove_podcast_modal=!1),onDelete:i.remove_podcast},{"modal-content":d(()=>[xl,t("p",Cl,[Sl,t("b",null,u(o.rss_playlist_to_remove.name),1),Al])]),_:1},8,["show","onDelete"])])}var G=w(ol,[["render",ql]]);const Pl={name:"ListItemTrack",props:["track"]},Tl=["id"],Ll={key:0,class:"media-left fd-has-action"},Rl={class:"media-content fd-has-action is-clipped"},Il={class:"subtitle is-7 has-text-grey"},Ul={class:"subtitle is-7 has-text-grey"},El={class:"media-right"};function Ol(s,e,a,r,o,i){return l(),c("div",{id:"index_"+a.track.title_sort.charAt(0).toUpperCase(),class:S(["media",{"with-progress":s.$slots.progress}])},[s.$slots.icon?(l(),c("figure",Ll,[I(s.$slots,"icon")])):y("",!0),t("div",Rl,[t("h1",{class:S(["title is-6",{"has-text-grey":a.track.media_kind==="podcast"&&a.track.play_count>0}])},u(a.track.title),3),t("h2",Il,[t("b",null,u(a.track.artist),1)]),t("h2",Ul,u(a.track.album),1),I(s.$slots,"progress")]),t("div",El,[I(s.$slots,"actions")])],10,Tl)}var at=w(Pl,[["render",Ol]]);const Dl={name:"ModalDialogTrack",props:["show","track"],emits:["close","play-count-changed"],data(){return{spotify_track:{}}},watch:{track(){if(this.track&&this.track.data_kind==="spotify"){const s=new B;s.setAccessToken(this.$store.state.spotify.webapi_token),s.getTrack(this.track.path.slice(this.track.path.lastIndexOf(":")+1)).then(e=>{this.spotify_track=e})}else this.spotify_track={}}},methods:{play_track:function(){this.$emit("close"),f.player_play_uri(this.track.uri,!1)},queue_add:function(){this.$emit("close"),f.queue_add(this.track.uri)},queue_add_next:function(){this.$emit("close"),f.queue_add_next(this.track.uri)},open_album:function(){this.$emit("close"),this.track.media_kind==="podcast"?this.$router.push({path:"/podcasts/"+this.track.album_id}):this.track.media_kind==="audiobook"?this.$router.push({path:"/audiobooks/"+this.track.album_id}):this.$router.push({path:"/music/albums/"+this.track.album_id})},open_artist:function(){this.$emit("close"),this.$router.push({path:"/music/artists/"+this.track.album_artist_id})},open_genre:function(){this.$router.push({name:"Genre",params:{genre:this.track.genre}})},open_spotify_artist:function(){this.$emit("close"),this.$router.push({path:"/music/spotify/artists/"+this.spotify_track.artists[0].id})},open_spotify_album:function(){this.$emit("close"),this.$router.push({path:"/music/spotify/albums/"+this.spotify_track.album.id})},mark_new:function(){f.library_track_update(this.track.id,{play_count:"reset"}).then(()=>{this.$emit("play-count-changed"),this.$emit("close")})},mark_played:function(){f.library_track_update(this.track.id,{play_count:"increment"}).then(()=>{this.$emit("play-count-changed"),this.$emit("close")})}}},Nl={key:0,class:"modal is-active"},zl={class:"modal-content fd-modal-card"},Vl={class:"card"},Bl={class:"card-content"},Fl={class:"title is-4"},Ml={class:"subtitle"},jl={key:0,class:"buttons"},Gl={class:"content is-small"},Hl=t("span",{class:"heading"},"Album",-1),Wl={key:0},Kl=t("span",{class:"heading"},"Album artist",-1),Yl={key:1},Ql=t("span",{class:"heading"},"Composer",-1),Jl={class:"title is-6"},Xl={key:2},Zl=t("span",{class:"heading"},"Release date",-1),tr={class:"title is-6"},sr={key:3},er=t("span",{class:"heading"},"Year",-1),ir={class:"title is-6"},or={key:4},ar=t("span",{class:"heading"},"Genre",-1),nr=t("span",{class:"heading"},"Track / Disc",-1),lr={class:"title is-6"},rr=t("span",{class:"heading"},"Length",-1),dr={class:"title is-6"},cr=t("span",{class:"heading"},"Path",-1),_r={class:"title is-6"},ur=t("span",{class:"heading"},"Type",-1),mr={class:"title is-6"},hr={key:0,class:"has-text-weight-normal"},pr=C("("),fr=C(", "),yr=C(")"),gr=t("span",{class:"heading"},"Quality",-1),br={class:"title is-6"},kr={key:0},wr={key:1},vr={key:2},$r=t("span",{class:"heading"},"Added at",-1),xr={class:"title is-6"},Cr=t("span",{class:"heading"},"Rating",-1),Sr={class:"title is-6"},Ar={key:5},qr=t("span",{class:"heading"},"Comment",-1),Pr={class:"title is-6"},Tr={class:"card-footer"},Lr=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),Rr=t("span",{class:"is-size-7"},"Add",-1),Ir=[Lr,Rr],Ur=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-play"})],-1),Er=t("span",{class:"is-size-7"},"Add Next",-1),Or=[Ur,Er],Dr=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),Nr=t("span",{class:"is-size-7"},"Play",-1),zr=[Dr,Nr];function Vr(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",Nl,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",zl,[t("div",Vl,[t("div",Bl,[t("p",Fl,u(a.track.title),1),t("p",Ml,u(a.track.artist),1),a.track.media_kind==="podcast"?(l(),c("div",jl,[a.track.play_count>0?(l(),c("a",{key:0,class:"button is-small",onClick:e[1]||(e[1]=(...n)=>i.mark_new&&i.mark_new(...n))},"Mark as new")):y("",!0),a.track.play_count===0?(l(),c("a",{key:1,class:"button is-small",onClick:e[2]||(e[2]=(...n)=>i.mark_played&&i.mark_played(...n))},"Mark as played")):y("",!0)])):y("",!0),t("div",Gl,[t("p",null,[Hl,t("a",{class:"title is-6 has-text-link",onClick:e[3]||(e[3]=(...n)=>i.open_album&&i.open_album(...n))},u(a.track.album),1)]),a.track.album_artist&&a.track.media_kind!=="audiobook"?(l(),c("p",Wl,[Kl,t("a",{class:"title is-6 has-text-link",onClick:e[4]||(e[4]=(...n)=>i.open_artist&&i.open_artist(...n))},u(a.track.album_artist),1)])):y("",!0),a.track.composer?(l(),c("p",Yl,[Ql,t("span",Jl,u(a.track.composer),1)])):y("",!0),a.track.date_released?(l(),c("p",Xl,[Zl,t("span",tr,u(s.$filters.time(a.track.date_released,"L")),1)])):a.track.year>0?(l(),c("p",sr,[er,t("span",ir,u(a.track.year),1)])):y("",!0),a.track.genre?(l(),c("p",or,[ar,t("a",{class:"title is-6 has-text-link",onClick:e[5]||(e[5]=(...n)=>i.open_genre&&i.open_genre(...n))},u(a.track.genre),1)])):y("",!0),t("p",null,[nr,t("span",lr,u(a.track.track_number)+" / "+u(a.track.disc_number),1)]),t("p",null,[rr,t("span",dr,u(s.$filters.duration(a.track.length_ms)),1)]),t("p",null,[cr,t("span",_r,u(a.track.path),1)]),t("p",null,[ur,t("span",mr,[C(u(a.track.media_kind)+" - "+u(a.track.data_kind)+" ",1),a.track.data_kind==="spotify"?(l(),c("span",hr,[pr,t("a",{onClick:e[6]||(e[6]=(...n)=>i.open_spotify_artist&&i.open_spotify_artist(...n))},"artist"),fr,t("a",{onClick:e[7]||(e[7]=(...n)=>i.open_spotify_album&&i.open_spotify_album(...n))},"album"),yr])):y("",!0)])]),t("p",null,[gr,t("span",br,[C(u(a.track.type)+" ",1),a.track.samplerate?(l(),c("span",kr," | "+u(a.track.samplerate)+" Hz",1)):y("",!0),a.track.channels?(l(),c("span",wr," | "+u(s.$filters.channels(a.track.channels)),1)):y("",!0),a.track.bitrate?(l(),c("span",vr," | "+u(a.track.bitrate)+" Kb/s",1)):y("",!0)])]),t("p",null,[$r,t("span",xr,u(s.$filters.time(a.track.time_added,"L LT")),1)]),t("p",null,[Cr,t("span",Sr,u(Math.floor(a.track.rating/10))+" / 10",1)]),a.track.comment?(l(),c("p",Ar,[qr,t("span",Pr,u(a.track.comment),1)])):y("",!0)])]),t("footer",Tr,[t("a",{class:"card-footer-item has-text-dark",onClick:e[8]||(e[8]=(...n)=>i.queue_add&&i.queue_add(...n))},Ir),t("a",{class:"card-footer-item has-text-dark",onClick:e[9]||(e[9]=(...n)=>i.queue_add_next&&i.queue_add_next(...n))},Or),t("a",{class:"card-footer-item has-text-dark",onClick:e[10]||(e[10]=(...n)=>i.play_track&&i.play_track(...n))},zr)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[11]||(e[11]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var nt=w(Dl,[["render",Vr]]);const Br={name:"ListTracks",components:{ListItemTrack:at,ModalDialogTrack:nt},props:["tracks","uris","expression"],data(){return{show_details_modal:!1,selected_track:{}}},methods:{play_track:function(s,e){this.uris?f.player_play_uri(this.uris,!1,s):this.expression?f.player_play_expression(this.expression,!1,s):f.player_play_uri(e.uri,!1)},open_dialog:function(s){this.selected_track=s,this.show_details_modal=!0}}},Fr=["onClick"],Mr=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),jr=[Mr];function Gr(s,e,a,r,o,i){const n=m("list-item-track"),p=m("modal-dialog-track");return l(),c("div",null,[(l(!0),c(L,null,R(a.tracks,(h,k)=>(l(),$(n,{key:h.id,track:h,onClick:b=>i.play_track(k,h)},{actions:d(()=>[t("a",{onClick:E(b=>i.open_dialog(h),["prevent","stop"])},jr,8,Fr)]),_:2},1032,["track","onClick"]))),128)),_(p,{show:o.show_details_modal,track:o.selected_track,onClose:e[0]||(e[0]=h=>o.show_details_modal=!1)},null,8,["show","track"])])}var H=w(Br,[["render",Gr]]);const ct={load:function(s){return Promise.all([f.search({type:"album",expression:"time_added after 8 weeks ago and media_kind is music having track_count > 3 order by time_added desc",limit:3}),f.search({type:"track",expression:"time_played after 8 weeks ago and media_kind is music order by time_played desc",limit:3})])},set:function(s,e){s.recently_added=e[0].data.albums,s.recently_played=e[1].data.tracks}},Hr={name:"PageBrowse",components:{ContentWithHeading:U,TabsMusic:j,ListAlbums:G,ListTracks:H},beforeRouteEnter(s,e,a){ct.load(s).then(r=>{a(o=>ct.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;ct.load(s).then(o=>{ct.set(r,o),a()})},data(){return{recently_added:{items:[]},recently_played:{items:[]},show_track_details_modal:!1,selected_track:{}}},methods:{open_browse:function(s){this.$router.push({path:"/music/browse/"+s})}}},Wr={class:"fd-page-with-tabs"},Kr=t("p",{class:"title is-4"},"Recently added",-1),Yr=t("p",{class:"heading"},"albums",-1),Qr={class:"level"},Jr={class:"level-item"},Xr=t("p",{class:"title is-4"},"Recently played",-1),Zr=t("p",{class:"heading"},"tracks",-1),td={class:"level"},sd={class:"level-item"};function ed(s,e,a,r,o,i){const n=m("tabs-music"),p=m("list-albums"),h=m("content-with-heading"),k=m("list-tracks");return l(),c("div",Wr,[_(n),_(h,null,{"heading-left":d(()=>[Kr,Yr]),content:d(()=>[_(p,{albums:o.recently_added.items},null,8,["albums"])]),footer:d(()=>[t("nav",Qr,[t("p",Jr,[t("a",{class:"button is-light is-small is-rounded",onClick:e[0]||(e[0]=b=>i.open_browse("recently_added"))},"Show more")])])]),_:1}),_(h,null,{"heading-left":d(()=>[Xr,Zr]),content:d(()=>[_(k,{tracks:o.recently_played.items},null,8,["tracks"])]),footer:d(()=>[t("nav",td,[t("p",sd,[t("a",{class:"button is-light is-small is-rounded",onClick:e[1]||(e[1]=b=>i.open_browse("recently_played"))},"Show more")])])]),_:1})])}var id=w(Hr,[["render",ed]]);const _t={load:function(s){const e=T.getters.settings_option_recently_added_limit;return f.search({type:"album",expression:"media_kind is music having track_count > 3 order by time_added desc",limit:e})},set:function(s,e){s.recently_added=e.data.albums}},od={name:"PageBrowseType",components:{ContentWithHeading:U,TabsMusic:j,ListAlbums:G},beforeRouteEnter(s,e,a){_t.load(s).then(r=>{a(o=>_t.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;_t.load(s).then(o=>{_t.set(r,o),a()})},data(){return{recently_added:{items:[]}}},computed:{albums_list(){return new ot(this.recently_added.items,{hideSingles:!1,hideSpotify:!1,sort:"Recently added (browse)",group:!0})}}},ad={class:"fd-page-with-tabs"},nd=t("p",{class:"title is-4"},"Recently added",-1),ld=t("p",{class:"heading"},"albums",-1);function rd(s,e,a,r,o,i){const n=m("tabs-music"),p=m("list-albums"),h=m("content-with-heading");return l(),c("div",ad,[_(n),_(h,null,{"heading-left":d(()=>[nd,ld]),content:d(()=>[_(p,{albums:i.albums_list},null,8,["albums"])]),_:1})])}var dd=w(od,[["render",rd]]);const ut={load:function(s){return f.search({type:"track",expression:"time_played after 8 weeks ago and media_kind is music order by time_played desc",limit:50})},set:function(s,e){s.recently_played=e.data.tracks}},cd={name:"PageBrowseType",components:{ContentWithHeading:U,TabsMusic:j,ListTracks:H},beforeRouteEnter(s,e,a){ut.load(s).then(r=>{a(o=>ut.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;ut.load(s).then(o=>{ut.set(r,o),a()})},data(){return{recently_played:{}}}},_d={class:"fd-page-with-tabs"},ud=t("p",{class:"title is-4"},"Recently played",-1),md=t("p",{class:"heading"},"tracks",-1);function hd(s,e,a,r,o,i){const n=m("tabs-music"),p=m("list-tracks"),h=m("content-with-heading");return l(),c("div",_d,[_(n),_(h,null,{"heading-left":d(()=>[ud,md]),content:d(()=>[_(p,{tracks:o.recently_played.items},null,8,["tracks"])]),_:1})])}var pd=w(cd,[["render",hd]]);const fd={name:"IndexButtonList",props:["index"],computed:{filtered_index(){const s="!\"#$%&'()*+,-./:;<=>?@[\\]^`{|}~";return this.index.filter(e=>!s.includes(e))}},methods:{nav:function(s){this.$router.push({hash:"#index_"+s})},scroll_to_top:function(){window.scrollTo({top:0,behavior:"smooth"})}}},yd={class:"buttons is-centered fd-is-square",style:{"margin-bottom":"16px"}},gd=["onClick"];function bd(s,e,a,r,o,i){return l(),c("section",null,[t("nav",yd,[(l(!0),c(L,null,R(i.filtered_index,n=>(l(),c("a",{key:n,class:"button is-small",onClick:p=>i.nav(n)},u(n),9,gd))),128))])])}var W=w(fd,[["render",bd]]);const kd={name:"ListItemArtist",props:["artist"]},wd={class:"media"},vd={class:"media-content fd-has-action is-clipped"},$d={class:"title is-6"},xd={class:"media-right"};function Cd(s,e,a,r,o,i){return l(),c("div",wd,[t("div",vd,[t("h1",$d,u(a.artist.name),1)]),t("div",xd,[I(s.$slots,"actions")])])}var Sd=w(kd,[["render",Cd]]);const Ad={name:"ModalDialogArtist",props:["show","artist"],emits:["close"],methods:{play:function(){this.$emit("close"),f.player_play_uri(this.artist.uri,!1)},queue_add:function(){this.$emit("close"),f.queue_add(this.artist.uri)},queue_add_next:function(){this.$emit("close"),f.queue_add_next(this.artist.uri)},open_artist:function(){this.$emit("close"),this.$router.push({path:"/music/artists/"+this.artist.id})}}},qd={key:0,class:"modal is-active"},Pd={class:"modal-content fd-modal-card"},Td={class:"card"},Ld={class:"card-content"},Rd={class:"title is-4"},Id={class:"content is-small"},Ud=t("span",{class:"heading"},"Albums",-1),Ed={class:"title is-6"},Od=t("span",{class:"heading"},"Tracks",-1),Dd={class:"title is-6"},Nd=t("span",{class:"heading"},"Type",-1),zd={class:"title is-6"},Vd=t("span",{class:"heading"},"Added at",-1),Bd={class:"title is-6"},Fd={class:"card-footer"},Md=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),jd=t("span",{class:"is-size-7"},"Add",-1),Gd=[Md,jd],Hd=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-play"})],-1),Wd=t("span",{class:"is-size-7"},"Add Next",-1),Kd=[Hd,Wd],Yd=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),Qd=t("span",{class:"is-size-7"},"Play",-1),Jd=[Yd,Qd];function Xd(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",qd,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",Pd,[t("div",Td,[t("div",Ld,[t("p",Rd,[t("a",{class:"has-text-link",onClick:e[1]||(e[1]=(...n)=>i.open_artist&&i.open_artist(...n))},u(a.artist.name),1)]),t("div",Id,[t("p",null,[Ud,t("span",Ed,u(a.artist.album_count),1)]),t("p",null,[Od,t("span",Dd,u(a.artist.track_count),1)]),t("p",null,[Nd,t("span",zd,u(a.artist.data_kind),1)]),t("p",null,[Vd,t("span",Bd,u(s.$filters.time(a.artist.time_added,"L LT")),1)])])]),t("footer",Fd,[t("a",{class:"card-footer-item has-text-dark",onClick:e[2]||(e[2]=(...n)=>i.queue_add&&i.queue_add(...n))},Gd),t("a",{class:"card-footer-item has-text-dark",onClick:e[3]||(e[3]=(...n)=>i.queue_add_next&&i.queue_add_next(...n))},Kd),t("a",{class:"card-footer-item has-text-dark",onClick:e[4]||(e[4]=(...n)=>i.play&&i.play(...n))},Jd)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[5]||(e[5]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var Mt=w(Ad,[["render",Xd]]);class ns{constructor(e,a={hideSingles:!1,hideSpotify:!1,sort:"Name",group:!1}){this.items=e,this.options=a,this.grouped={},this.sortedAndFiltered=[],this.indexList=[],this.init()}init(){this.createSortedAndFilteredList(),this.createGroupedList(),this.createIndexList()}getArtistIndex(e){return this.options.sort==="Name"?e.name_sort.charAt(0).toUpperCase():e.time_added.substring(0,4)}isArtistVisible(e){return!(this.options.hideSingles&&e.track_count<=e.album_count*2||this.options.hideSpotify&&e.data_kind==="spotify")}createIndexList(){this.indexList=[...new Set(this.sortedAndFiltered.map(e=>this.getArtistIndex(e)))]}createSortedAndFilteredList(){let e=this.items;(this.options.hideSingles||this.options.hideSpotify||this.options.hideOther)&&(e=e.filter(a=>this.isArtistVisible(a))),this.options.sort==="Recently added"&&(e=[...e].sort((a,r)=>r.time_added.localeCompare(a.time_added))),this.sortedAndFiltered=e}createGroupedList(){this.options.group||(this.grouped={}),this.grouped=this.sortedAndFiltered.reduce((e,a)=>{const r=this.getArtistIndex(a);return e[r]=[...e[r]||[],a],e},{})}}const Zd={name:"ListArtists",components:{ListItemArtist:Sd,ModalDialogArtist:Mt},props:["artists","media_kind"],data(){return{show_details_modal:!1,selected_artist:{}}},computed:{media_kind_resolved:function(){return this.media_kind?this.media_kind:this.selected_artist.media_kind},artists_list:function(){return Array.isArray(this.artists)?this.artists:this.artists.sortedAndFiltered},is_grouped:function(){return this.artists instanceof ns&&this.artists.options.group}},methods:{open_artist:function(s){this.selected_artist=s,this.media_kind_resolved==="podcast"||(this.media_kind_resolved==="audiobook"?this.$router.push({path:"/audiobooks/artists/"+s.id}):this.$router.push({path:"/music/artists/"+s.id}))},open_dialog:function(s){this.selected_artist=s,this.show_details_modal=!0}}},tc={key:0},sc=["id"],ec=["onClick"],ic=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),oc=[ic],ac={key:1},nc=["onClick"],lc=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),rc=[lc];function dc(s,e,a,r,o,i){const n=m("list-item-artist"),p=m("modal-dialog-artist");return l(),c("div",null,[i.is_grouped?(l(),c("div",tc,[(l(!0),c(L,null,R(a.artists.indexList,h=>(l(),c("div",{key:h,class:"mb-6"},[t("span",{id:"index_"+h,class:"tag is-info is-light is-small has-text-weight-bold"},u(h),9,sc),(l(!0),c(L,null,R(a.artists.grouped[h],k=>(l(),$(n,{key:k.id,artist:k,onClick:b=>i.open_artist(k)},{actions:d(()=>[t("a",{onClick:E(b=>i.open_dialog(k),["prevent","stop"])},oc,8,ec)]),_:2},1032,["artist","onClick"]))),128))]))),128))])):(l(),c("div",ac,[(l(!0),c(L,null,R(i.artists_list,h=>(l(),$(n,{key:h.id,artist:h,onClick:k=>i.open_artist(h)},{actions:d(()=>[t("a",{onClick:E(k=>i.open_dialog(h),["prevent","stop"])},rc,8,nc)]),_:2},1032,["artist","onClick"]))),128))])),_(p,{show:o.show_details_modal,artist:o.selected_artist,media_kind:a.media_kind,onClose:e[0]||(e[0]=h=>o.show_details_modal=!1)},null,8,["show","artist","media_kind"])])}var ls=w(Zd,[["render",dc]]);const cc={name:"DropdownMenu",props:["modelValue","options"],emits:["update:modelValue"],data(){return{is_active:!1}},methods:{onClickOutside(s){this.is_active=!1},select(s){this.is_active=!1,this.$emit("update:modelValue",s)}}},_c={class:"dropdown-trigger"},uc=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-chevron-down","aria-hidden":"true"})],-1),mc={id:"dropdown-menu",class:"dropdown-menu",role:"menu"},hc={class:"dropdown-content"},pc=["onClick"];function fc(s,e,a,r,o,i){const n=ys("click-away");return D((l(),c("div",{class:S(["dropdown",{"is-active":o.is_active}])},[t("div",_c,[t("button",{class:"button","aria-haspopup":"true","aria-controls":"dropdown-menu",onClick:e[0]||(e[0]=p=>o.is_active=!o.is_active)},[t("span",null,u(a.modelValue),1),uc])]),t("div",mc,[t("div",hc,[(l(!0),c(L,null,R(a.options,p=>(l(),c("a",{key:p,class:S(["dropdown-item",{"is-active":a.modelValue===p}]),onClick:h=>i.select(p)},u(p),11,pc))),128))])])],2)),[[n,i.onClickOutside]])}var rs=w(cc,[["render",fc]]);const mt={load:function(s){return f.library_artists("music")},set:function(s,e){s.artists=e.data}},yc={name:"PageArtists",components:{ContentWithHeading:U,TabsMusic:j,IndexButtonList:W,ListArtists:ls,DropdownMenu:rs},beforeRouteEnter(s,e,a){mt.load(s).then(r=>{a(o=>mt.set(o,r))})},beforeRouteUpdate(s,e,a){if(this.artists.items.length>0){a();return}const r=this;mt.load(s).then(o=>{mt.set(r,o),a()})},data(){return{artists:{items:[]},sort_options:["Name","Recently added"]}},computed:{artists_list(){return new ns(this.artists.items,{hideSingles:this.hide_singles,hideSpotify:this.hide_spotify,sort:this.sort,group:!0})},spotify_enabled(){return this.$store.state.spotify.webapi_token_valid},hide_singles:{get(){return this.$store.state.hide_singles},set(s){this.$store.commit(Ft,s)}},hide_spotify:{get(){return this.$store.state.hide_spotify},set(s){this.$store.commit(is,s)}},sort:{get(){return this.$store.state.artists_sort},set(s){this.$store.commit(Ps,s)}}},methods:{scrollToTop:function(){window.scrollTo({top:0,behavior:"smooth"})}}},gc={class:"fd-page-with-tabs"},bc={class:"columns"},kc={class:"column"},wc=t("p",{class:"heading",style:{"margin-bottom":"24px"}},"Filter",-1),vc={class:"field"},$c={class:"control"},xc=t("label",{for:"switchHideSingles"},"Hide singles",-1),Cc=t("p",{class:"help"}," If active, hides artists that only appear on singles or playlists. ",-1),Sc={key:0,class:"field"},Ac={class:"control"},qc=t("label",{for:"switchHideSpotify"},"Hide artists from Spotify",-1),Pc=t("p",{class:"help"}," If active, hides artists that only appear in your Spotify library. ",-1),Tc={class:"column"},Lc=t("p",{class:"heading",style:{"margin-bottom":"24px"}},"Sort by",-1),Rc=t("p",{class:"title is-4"},"Artists",-1),Ic={class:"heading"};function Uc(s,e,a,r,o,i){const n=m("tabs-music"),p=m("index-button-list"),h=m("dropdown-menu"),k=m("list-artists"),b=m("content-with-heading");return l(),c("div",gc,[_(n),_(b,null,{options:d(()=>[_(p,{index:i.artists_list.indexList},null,8,["index"]),t("div",bc,[t("div",kc,[wc,t("div",vc,[t("div",$c,[D(t("input",{id:"switchHideSingles","onUpdate:modelValue":e[0]||(e[0]=g=>i.hide_singles=g),type:"checkbox",name:"switchHideSingles",class:"switch"},null,512),[[Y,i.hide_singles]]),xc]),Cc]),i.spotify_enabled?(l(),c("div",Sc,[t("div",Ac,[D(t("input",{id:"switchHideSpotify","onUpdate:modelValue":e[1]||(e[1]=g=>i.hide_spotify=g),type:"checkbox",name:"switchHideSpotify",class:"switch"},null,512),[[Y,i.hide_spotify]]),qc]),Pc])):y("",!0)]),t("div",Tc,[Lc,_(h,{modelValue:i.sort,"onUpdate:modelValue":e[2]||(e[2]=g=>i.sort=g),options:o.sort_options},null,8,["modelValue","options"])])])]),"heading-left":d(()=>[Rc,t("p",Ic,u(i.artists_list.sortedAndFiltered.length)+" Artists ",1)]),"heading-right":d(()=>[]),content:d(()=>[_(k,{artists:i.artists_list},null,8,["artists"])]),_:1})])}var Ec=w(yc,[["render",Uc]]);const ht={load:function(s){return Promise.all([f.library_artist(s.params.artist_id),f.library_artist_albums(s.params.artist_id)])},set:function(s,e){s.artist=e[0].data,s.albums=e[1].data}},Oc={name:"PageArtist",components:{ContentWithHeading:U,ListAlbums:G,ModalDialogArtist:Mt,DropdownMenu:rs},beforeRouteEnter(s,e,a){ht.load(s).then(r=>{a(o=>ht.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;ht.load(s).then(o=>{ht.set(r,o),a()})},data(){return{artist:{},albums:{items:[]},sort_options:["Name","Release date"],show_artist_details_modal:!1}},computed:{albums_list(){return new ot(this.albums.items,{sort:this.sort,group:!1})},sort:{get(){return this.$store.state.artist_albums_sort},set(s){this.$store.commit(Ts,s)}}},methods:{open_tracks:function(){this.$router.push({path:"/music/artists/"+this.artist.id+"/tracks"})},play:function(){f.player_play_uri(this.albums.items.map(s=>s.uri).join(","),!0)}}},Dc={class:"columns"},Nc={class:"column"},zc=t("p",{class:"heading",style:{"margin-bottom":"24px"}},"Sort by",-1),Vc={class:"title is-4"},Bc={class:"buttons is-centered"},Fc=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),Mc=[Fc],jc=t("span",{class:"icon"},[t("i",{class:"mdi mdi-shuffle"})],-1),Gc=t("span",null,"Shuffle",-1),Hc=[jc,Gc],Wc={class:"heading has-text-centered-mobile"};function Kc(s,e,a,r,o,i){const n=m("dropdown-menu"),p=m("list-albums"),h=m("modal-dialog-artist"),k=m("content-with-heading");return l(),$(k,null,{options:d(()=>[t("div",Dc,[t("div",Nc,[zc,_(n,{modelValue:i.sort,"onUpdate:modelValue":e[0]||(e[0]=b=>i.sort=b),options:o.sort_options},null,8,["modelValue","options"])])])]),"heading-left":d(()=>[t("p",Vc,u(o.artist.name),1)]),"heading-right":d(()=>[t("div",Bc,[t("a",{class:"button is-small is-light is-rounded",onClick:e[1]||(e[1]=b=>o.show_artist_details_modal=!0)},Mc),t("a",{class:"button is-small is-dark is-rounded",onClick:e[2]||(e[2]=(...b)=>i.play&&i.play(...b))},Hc)])]),content:d(()=>[t("p",Wc,[C(u(o.artist.album_count)+" albums | ",1),t("a",{class:"has-text-link",onClick:e[3]||(e[3]=(...b)=>i.open_tracks&&i.open_tracks(...b))},u(o.artist.track_count)+" tracks",1)]),_(p,{albums:i.albums_list},null,8,["albums"]),_(h,{show:o.show_artist_details_modal,artist:o.artist,onClose:e[4]||(e[4]=b=>o.show_artist_details_modal=!1)},null,8,["show","artist"])]),_:1})}var Yc=w(Oc,[["render",Kc]]);const pt={load:function(s){return f.library_albums("music")},set:function(s,e){s.albums=e.data,s.index_list=[...new Set(s.albums.items.filter(a=>!s.$store.state.hide_singles||a.track_count>2).map(a=>a.name_sort.charAt(0).toUpperCase()))]}},Qc={name:"PageAlbums",components:{ContentWithHeading:U,TabsMusic:j,IndexButtonList:W,ListAlbums:G,DropdownMenu:rs},beforeRouteEnter(s,e,a){pt.load(s).then(r=>{a(o=>pt.set(o,r))})},beforeRouteUpdate(s,e,a){if(this.albums.items.length>0){a();return}const r=this;pt.load(s).then(o=>{pt.set(r,o),a()})},data(){return{albums:{items:[]},sort_options:["Name","Recently added","Recently released"]}},computed:{albums_list(){return new ot(this.albums.items,{hideSingles:this.hide_singles,hideSpotify:this.hide_spotify,sort:this.sort,group:!0})},spotify_enabled(){return this.$store.state.spotify.webapi_token_valid},hide_singles:{get(){return this.$store.state.hide_singles},set(s){this.$store.commit(Ft,s)}},hide_spotify:{get(){return this.$store.state.hide_spotify},set(s){this.$store.commit(is,s)}},sort:{get(){return this.$store.state.albums_sort},set(s){this.$store.commit(Ls,s)}}},methods:{scrollToTop:function(){window.scrollTo({top:0,behavior:"smooth"})}}},Jc={class:"fd-page-with-tabs"},Xc={class:"columns"},Zc={class:"column"},t_=t("p",{class:"heading",style:{"margin-bottom":"24px"}},"Filter",-1),s_={class:"field"},e_={class:"control"},i_=t("label",{for:"switchHideSingles"},"Hide singles",-1),o_=t("p",{class:"help"}," If active, hides singles and albums with tracks that only appear in playlists. ",-1),a_={key:0,class:"field"},n_={class:"control"},l_=t("label",{for:"switchHideSpotify"},"Hide albums from Spotify",-1),r_=t("p",{class:"help"}," If active, hides albums that only appear in your Spotify library. ",-1),d_={class:"column"},c_=t("p",{class:"heading",style:{"margin-bottom":"24px"}},"Sort by",-1),__=t("p",{class:"title is-4"},"Albums",-1),u_={class:"heading"};function m_(s,e,a,r,o,i){const n=m("tabs-music"),p=m("index-button-list"),h=m("dropdown-menu"),k=m("list-albums"),b=m("content-with-heading");return l(),c("div",Jc,[_(n),_(b,null,{options:d(()=>[_(p,{index:i.albums_list.indexList},null,8,["index"]),t("div",Xc,[t("div",Zc,[t_,t("div",s_,[t("div",e_,[D(t("input",{id:"switchHideSingles","onUpdate:modelValue":e[0]||(e[0]=g=>i.hide_singles=g),type:"checkbox",name:"switchHideSingles",class:"switch"},null,512),[[Y,i.hide_singles]]),i_]),o_]),i.spotify_enabled?(l(),c("div",a_,[t("div",n_,[D(t("input",{id:"switchHideSpotify","onUpdate:modelValue":e[1]||(e[1]=g=>i.hide_spotify=g),type:"checkbox",name:"switchHideSpotify",class:"switch"},null,512),[[Y,i.hide_spotify]]),l_]),r_])):y("",!0)]),t("div",d_,[c_,_(h,{modelValue:i.sort,"onUpdate:modelValue":e[2]||(e[2]=g=>i.sort=g),options:o.sort_options},null,8,["modelValue","options"])])])]),"heading-left":d(()=>[__,t("p",u_,u(i.albums_list.sortedAndFiltered.length)+" Albums",1)]),"heading-right":d(()=>[]),content:d(()=>[_(k,{albums:i.albums_list},null,8,["albums"])]),_:1})])}var h_=w(Qc,[["render",m_]]);const p_={},f_={class:"hero is-light is-bold fd-content"},y_={class:"hero-body"},g_={class:"container"},b_={class:"columns is-centered"},k_={class:"column is-four-fifths"},w_={class:"columns",style:{"flex-direction":"row-reverse"}},v_={class:"column fd-has-cover"},$_={class:"column is-three-fifths has-text-centered-mobile",style:{margin:"auto 0"}},x_={class:"section fd-content"},C_={class:"container"},S_={class:"columns is-centered"},A_={class:"column is-four-fifths"},q_={style:{"margin-top":"16px"}};function P_(s,e){return l(),c("div",null,[t("section",f_,[t("div",y_,[t("div",g_,[t("div",b_,[t("div",k_,[t("div",w_,[t("div",v_,[I(s.$slots,"heading-right")]),t("div",$_,[I(s.$slots,"heading-left")])])])])])])]),t("section",x_,[t("div",C_,[t("div",S_,[t("div",A_,[I(s.$slots,"content"),t("div",q_,[I(s.$slots,"footer")])])])])])])}var ds=w(p_,[["render",P_]]);const ft={load:function(s){return Promise.all([f.library_album(s.params.album_id),f.library_album_tracks(s.params.album_id)])},set:function(s,e){s.album=e[0].data,s.tracks=e[1].data.items}},T_={name:"PageAlbum",components:{ContentWithHero:ds,ListTracks:H,ModalDialogAlbum:it,CoverArtwork:M},beforeRouteEnter(s,e,a){ft.load(s).then(r=>{a(o=>ft.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;ft.load(s).then(o=>{ft.set(r,o),a()})},data(){return{album:{},tracks:[],show_album_details_modal:!1}},methods:{open_artist:function(){this.show_details_modal=!1,this.$router.push({path:"/music/artists/"+this.album.artist_id})},play:function(){f.player_play_uri(this.album.uri,!0)}}},L_={class:"title is-5"},R_={class:"subtitle is-6 has-text-link has-text-weight-normal"},I_={class:"buttons fd-is-centered-mobile fd-has-margin-top"},U_=t("span",{class:"icon"},[t("i",{class:"mdi mdi-shuffle"})],-1),E_=t("span",null,"Shuffle",-1),O_=[U_,E_],D_=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),N_=[D_],z_={class:"image is-square fd-has-shadow fd-has-action"},V_={class:"heading is-7 has-text-centered-mobile fd-has-margin-top"};function B_(s,e,a,r,o,i){const n=m("cover-artwork"),p=m("list-tracks"),h=m("modal-dialog-album"),k=m("content-with-hero");return l(),$(k,null,{"heading-left":d(()=>[t("h1",L_,u(o.album.name),1),t("h2",R_,[t("a",{class:"has-text-link",onClick:e[0]||(e[0]=(...b)=>i.open_artist&&i.open_artist(...b))},u(o.album.artist),1)]),t("div",I_,[t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...b)=>i.play&&i.play(...b))},O_),t("a",{class:"button is-small is-light is-rounded",onClick:e[2]||(e[2]=b=>o.show_album_details_modal=!0)},N_)])]),"heading-right":d(()=>[t("p",z_,[_(n,{artwork_url:o.album.artwork_url,artist:o.album.artist,album:o.album.name,onClick:e[3]||(e[3]=b=>o.show_album_details_modal=!0)},null,8,["artwork_url","artist","album"])])]),content:d(()=>[t("p",V_,u(o.album.track_count)+" tracks ",1),_(p,{tracks:o.tracks,uris:o.album.uri},null,8,["tracks","uris"]),_(h,{show:o.show_album_details_modal,album:o.album,onClose:e[4]||(e[4]=b=>o.show_album_details_modal=!1)},null,8,["show","album"])]),_:1})}var F_=w(T_,[["render",B_]]);const M_={name:"ListItemGenre",props:["genre"]},j_=["id"],G_={class:"media-content fd-has-action is-clipped"},H_={class:"title is-6"},W_={class:"media-right"};function K_(s,e,a,r,o,i){return l(),c("div",{id:"index_"+a.genre.name.charAt(0).toUpperCase(),class:"media"},[t("div",G_,[t("h1",H_,u(a.genre.name),1)]),t("div",W_,[I(s.$slots,"actions")])],8,j_)}var Y_=w(M_,[["render",K_]]);const Q_={name:"ModalDialogGenre",props:["show","genre"],emits:["close"],methods:{play:function(){this.$emit("close"),f.player_play_expression('genre is "'+this.genre.name+'" and media_kind is music',!1)},queue_add:function(){this.$emit("close"),f.queue_expression_add('genre is "'+this.genre.name+'" and media_kind is music')},queue_add_next:function(){this.$emit("close"),f.queue_expression_add_next('genre is "'+this.genre.name+'" and media_kind is music')},open_genre:function(){this.$emit("close"),this.$router.push({name:"Genre",params:{genre:this.genre.name}})}}},J_={key:0,class:"modal is-active"},X_={class:"modal-content fd-modal-card"},Z_={class:"card"},tu={class:"card-content"},su={class:"title is-4"},eu={class:"card-footer"},iu=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),ou=t("span",{class:"is-size-7"},"Add",-1),au=[iu,ou],nu=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-play"})],-1),lu=t("span",{class:"is-size-7"},"Add Next",-1),ru=[nu,lu],du=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),cu=t("span",{class:"is-size-7"},"Play",-1),_u=[du,cu];function uu(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",J_,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",X_,[t("div",Z_,[t("div",tu,[t("p",su,[t("a",{class:"has-text-link",onClick:e[1]||(e[1]=(...n)=>i.open_genre&&i.open_genre(...n))},u(a.genre.name),1)])]),t("footer",eu,[t("a",{class:"card-footer-item has-text-dark",onClick:e[2]||(e[2]=(...n)=>i.queue_add&&i.queue_add(...n))},au),t("a",{class:"card-footer-item has-text-dark",onClick:e[3]||(e[3]=(...n)=>i.queue_add_next&&i.queue_add_next(...n))},ru),t("a",{class:"card-footer-item has-text-dark",onClick:e[4]||(e[4]=(...n)=>i.play&&i.play(...n))},_u)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[5]||(e[5]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var cs=w(Q_,[["render",uu]]);const yt={load:function(s){return f.library_genres()},set:function(s,e){s.genres=e.data}},mu={name:"PageGenres",components:{ContentWithHeading:U,TabsMusic:j,IndexButtonList:W,ListItemGenre:Y_,ModalDialogGenre:cs},beforeRouteEnter(s,e,a){yt.load(s).then(r=>{a(o=>yt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;yt.load(s).then(o=>{yt.set(r,o),a()})},data(){return{genres:{items:[]},show_details_modal:!1,selected_genre:{}}},computed:{index_list(){return[...new Set(this.genres.items.map(s=>s.name.charAt(0).toUpperCase()))]}},methods:{open_genre:function(s){this.$router.push({name:"Genre",params:{genre:s.name}})},open_dialog:function(s){this.selected_genre=s,this.show_details_modal=!0}}},hu={class:"fd-page-with-tabs"},pu=t("p",{class:"title is-4"},"Genres",-1),fu={class:"heading"},yu=["onClick"],gu=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),bu=[gu];function ku(s,e,a,r,o,i){const n=m("tabs-music"),p=m("index-button-list"),h=m("list-item-genre"),k=m("modal-dialog-genre"),b=m("content-with-heading");return l(),c("div",hu,[_(n),_(b,null,{options:d(()=>[_(p,{index:i.index_list},null,8,["index"])]),"heading-left":d(()=>[pu,t("p",fu,u(o.genres.total)+" genres",1)]),content:d(()=>[(l(!0),c(L,null,R(o.genres.items,g=>(l(),$(h,{key:g.name,genre:g,onClick:v=>i.open_genre(g)},{actions:d(()=>[t("a",{onClick:E(v=>i.open_dialog(g),["prevent","stop"])},bu,8,yu)]),_:2},1032,["genre","onClick"]))),128)),_(k,{show:o.show_details_modal,genre:o.selected_genre,onClose:e[0]||(e[0]=g=>o.show_details_modal=!1)},null,8,["show","genre"])]),_:1})])}var wu=w(mu,[["render",ku]]);const gt={load:function(s){return f.library_genre(s.params.genre)},set:function(s,e){s.name=s.$route.params.genre,s.genre_albums=e.data.albums}},vu={name:"PageGenre",components:{ContentWithHeading:U,IndexButtonList:W,ListAlbums:G,ModalDialogGenre:cs},beforeRouteEnter(s,e,a){gt.load(s).then(r=>{a(o=>gt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;gt.load(s).then(o=>{gt.set(r,o),a()})},data(){return{name:"",genre_albums:{items:[]},show_genre_details_modal:!1}},computed:{index_list(){return[...new Set(this.genre_albums.items.map(s=>s.name.charAt(0).toUpperCase()))]}},methods:{open_tracks:function(){this.show_details_modal=!1,this.$router.push({name:"GenreTracks",params:{genre:this.name}})},play:function(){f.player_play_expression('genre is "'+this.name+'" and media_kind is music',!0)},open_dialog:function(s){this.selected_album=s,this.show_details_modal=!0}}},$u={class:"title is-4"},xu={class:"buttons is-centered"},Cu=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),Su=[Cu],Au=t("span",{class:"icon"},[t("i",{class:"mdi mdi-shuffle"})],-1),qu=t("span",null,"Shuffle",-1),Pu=[Au,qu],Tu={class:"heading has-text-centered-mobile"};function Lu(s,e,a,r,o,i){const n=m("index-button-list"),p=m("list-albums"),h=m("modal-dialog-genre"),k=m("content-with-heading");return l(),c("div",null,[_(k,null,{options:d(()=>[_(n,{index:i.index_list},null,8,["index"])]),"heading-left":d(()=>[t("p",$u,u(o.name),1)]),"heading-right":d(()=>[t("div",xu,[t("a",{class:"button is-small is-light is-rounded",onClick:e[0]||(e[0]=b=>o.show_genre_details_modal=!0)},Su),t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...b)=>i.play&&i.play(...b))},Pu)])]),content:d(()=>[t("p",Tu,[C(u(o.genre_albums.total)+" albums | ",1),t("a",{class:"has-text-link",onClick:e[2]||(e[2]=(...b)=>i.open_tracks&&i.open_tracks(...b))},"tracks")]),_(p,{albums:o.genre_albums.items},null,8,["albums"]),_(h,{show:o.show_genre_details_modal,genre:{name:o.name},onClose:e[3]||(e[3]=b=>o.show_genre_details_modal=!1)},null,8,["show","genre"])]),_:1})])}var Ru=w(vu,[["render",Lu]]);const bt={load:function(s){return f.library_genre_tracks(s.params.genre)},set:function(s,e){s.genre=s.$route.params.genre,s.tracks=e.data.tracks}},Iu={name:"PageGenreTracks",components:{ContentWithHeading:U,ListTracks:H,IndexButtonList:W,ModalDialogGenre:cs},beforeRouteEnter(s,e,a){bt.load(s).then(r=>{a(o=>bt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;bt.load(s).then(o=>{bt.set(r,o),a()})},data(){return{tracks:{items:[]},genre:"",show_genre_details_modal:!1}},computed:{index_list(){return[...new Set(this.tracks.items.map(s=>s.title_sort.charAt(0).toUpperCase()))]},expression(){return'genre is "'+this.genre+'" and media_kind is music'}},methods:{open_genre:function(){this.show_details_modal=!1,this.$router.push({name:"Genre",params:{genre:this.genre}})},play:function(){f.player_play_expression(this.expression,!0)}}},Uu={class:"title is-4"},Eu={class:"buttons is-centered"},Ou=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),Du=[Ou],Nu=t("span",{class:"icon"},[t("i",{class:"mdi mdi-shuffle"})],-1),zu=t("span",null,"Shuffle",-1),Vu=[Nu,zu],Bu={class:"heading has-text-centered-mobile"};function Fu(s,e,a,r,o,i){const n=m("index-button-list"),p=m("list-tracks"),h=m("modal-dialog-genre"),k=m("content-with-heading");return l(),c("div",null,[_(k,null,{options:d(()=>[_(n,{index:i.index_list},null,8,["index"])]),"heading-left":d(()=>[t("p",Uu,u(o.genre),1)]),"heading-right":d(()=>[t("div",Eu,[t("a",{class:"button is-small is-light is-rounded",onClick:e[0]||(e[0]=b=>o.show_genre_details_modal=!0)},Du),t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...b)=>i.play&&i.play(...b))},Vu)])]),content:d(()=>[t("p",Bu,[t("a",{class:"has-text-link",onClick:e[2]||(e[2]=(...b)=>i.open_genre&&i.open_genre(...b))},"albums"),C(" | "+u(o.tracks.total)+" tracks ",1)]),_(p,{tracks:o.tracks.items,expression:i.expression},null,8,["tracks","expression"]),_(h,{show:o.show_genre_details_modal,genre:{name:o.genre},onClose:e[3]||(e[3]=b=>o.show_genre_details_modal=!1)},null,8,["show","genre"])]),_:1})])}var Mu=w(Iu,[["render",Fu]]);const kt={load:function(s){return Promise.all([f.library_artist(s.params.artist_id),f.library_artist_tracks(s.params.artist_id)])},set:function(s,e){s.artist=e[0].data,s.tracks=e[1].data.tracks}},ju={name:"PageArtistTracks",components:{ContentWithHeading:U,ListTracks:H,IndexButtonList:W,ModalDialogArtist:Mt},beforeRouteEnter(s,e,a){kt.load(s).then(r=>{a(o=>kt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;kt.load(s).then(o=>{kt.set(r,o),a()})},data(){return{artist:{},tracks:{items:[]},show_artist_details_modal:!1}},computed:{index_list(){return[...new Set(this.tracks.items.map(s=>s.title_sort.charAt(0).toUpperCase()))]},track_uris(){return this.tracks.items.map(s=>s.uri).join(",")}},methods:{open_artist:function(){this.show_details_modal=!1,this.$router.push({path:"/music/artists/"+this.artist.id})},play:function(){f.player_play_uri(this.tracks.items.map(s=>s.uri).join(","),!0)}}},Gu={class:"title is-4"},Hu={class:"buttons is-centered"},Wu=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),Ku=[Wu],Yu=t("span",{class:"icon"},[t("i",{class:"mdi mdi-shuffle"})],-1),Qu=t("span",null,"Shuffle",-1),Ju=[Yu,Qu],Xu={class:"heading has-text-centered-mobile"};function Zu(s,e,a,r,o,i){const n=m("index-button-list"),p=m("list-tracks"),h=m("modal-dialog-artist"),k=m("content-with-heading");return l(),c("div",null,[_(k,null,{options:d(()=>[_(n,{index:i.index_list},null,8,["index"])]),"heading-left":d(()=>[t("p",Gu,u(o.artist.name),1)]),"heading-right":d(()=>[t("div",Hu,[t("a",{class:"button is-small is-light is-rounded",onClick:e[0]||(e[0]=b=>o.show_artist_details_modal=!0)},Ku),t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...b)=>i.play&&i.play(...b))},Ju)])]),content:d(()=>[t("p",Xu,[t("a",{class:"has-text-link",onClick:e[2]||(e[2]=(...b)=>i.open_artist&&i.open_artist(...b))},u(o.artist.album_count)+" albums",1),C(" | "+u(o.artist.track_count)+" tracks ",1)]),_(p,{tracks:o.tracks.items,uris:i.track_uris},null,8,["tracks","uris"]),_(h,{show:o.show_artist_details_modal,artist:o.artist,onClose:e[3]||(e[3]=b=>o.show_artist_details_modal=!1)},null,8,["show","artist"])]),_:1})])}var tm=w(ju,[["render",Zu]]);const sm={name:"ListItemComposer",props:["composer"]},em=["id"],im={class:"media-content fd-has-action is-clipped"},om={class:"title is-6"},am={class:"media-right"};function nm(s,e,a,r,o,i){return l(),c("div",{id:"index_"+a.composer.name.charAt(0).toUpperCase(),class:"media"},[t("div",im,[t("h1",om,u(a.composer.name),1)]),t("div",am,[I(s.$slots,"actions")])],8,em)}var lm=w(sm,[["render",nm]]);const rm={name:"ModalDialogComposer",props:["show","composer"],emits:["close"],methods:{play:function(){this.$emit("close"),f.player_play_expression('composer is "'+this.composer.name+'" and media_kind is music',!1)},queue_add:function(){this.$emit("close"),f.queue_expression_add('composer is "'+this.composer.name+'" and media_kind is music')},queue_add_next:function(){this.$emit("close"),f.queue_expression_add_next('composer is "'+this.composer.name+'" and media_kind is music')},open_albums:function(){this.$emit("close"),this.$router.push({name:"ComposerAlbums",params:{composer:this.composer.name}})},open_tracks:function(){this.show_details_modal=!1,this.$router.push({name:"ComposerTracks",params:{composer:this.composer.name}})}}},dm={key:0,class:"modal is-active"},cm={class:"modal-content fd-modal-card"},_m={class:"card"},um={class:"card-content"},mm={class:"title is-4"},hm=t("span",{class:"heading"},"Albums",-1),pm=t("span",{class:"heading"},"Tracks",-1),fm={class:"card-footer"},ym=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),gm=t("span",{class:"is-size-7"},"Add",-1),bm=[ym,gm],km=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-play"})],-1),wm=t("span",{class:"is-size-7"},"Add Next",-1),vm=[km,wm],$m=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),xm=t("span",{class:"is-size-7"},"Play",-1),Cm=[$m,xm];function Sm(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",dm,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",cm,[t("div",_m,[t("div",um,[t("p",mm,[t("a",{class:"has-text-link",onClick:e[1]||(e[1]=(...n)=>i.open_albums&&i.open_albums(...n))},u(a.composer.name),1)]),t("p",null,[hm,t("a",{class:"has-text-link is-6",onClick:e[2]||(e[2]=(...n)=>i.open_albums&&i.open_albums(...n))},u(a.composer.album_count),1)]),t("p",null,[pm,t("a",{class:"has-text-link is-6",onClick:e[3]||(e[3]=(...n)=>i.open_tracks&&i.open_tracks(...n))},u(a.composer.track_count),1)])]),t("footer",fm,[t("a",{class:"card-footer-item has-text-dark",onClick:e[4]||(e[4]=(...n)=>i.queue_add&&i.queue_add(...n))},bm),t("a",{class:"card-footer-item has-text-dark",onClick:e[5]||(e[5]=(...n)=>i.queue_add_next&&i.queue_add_next(...n))},vm),t("a",{class:"card-footer-item has-text-dark",onClick:e[6]||(e[6]=(...n)=>i.play&&i.play(...n))},Cm)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[7]||(e[7]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var _s=w(rm,[["render",Sm]]);class Es{constructor(e,a={hideSingles:!1,hideSpotify:!1,sort:"Name",group:!1}){this.items=e,this.options=a,this.grouped={},this.sortedAndFiltered=[],this.indexList=[],this.init()}init(){this.createSortedAndFilteredList(),this.createGroupedList(),this.createIndexList()}getComposerIndex(e){return this.options.sort==="Name"?e.name_sort.charAt(0).toUpperCase():e.time_added.substring(0,4)}isComposerVisible(e){return!(this.options.hideSingles&&e.track_count<=e.album_count*2||this.options.hideSpotify&&e.data_kind==="spotify")}createIndexList(){this.indexList=[...new Set(this.sortedAndFiltered.map(e=>this.getComposerIndex(e)))]}createSortedAndFilteredList(){let e=this.items;(this.options.hideSingles||this.options.hideSpotify||this.options.hideOther)&&(e=e.filter(a=>this.isComposerVisible(a))),this.options.sort==="Recently added"&&(e=[...e].sort((a,r)=>r.time_added.localeCompare(a.time_added))),this.sortedAndFiltered=e}createGroupedList(){this.options.group||(this.grouped={}),this.grouped=this.sortedAndFiltered.reduce((e,a)=>{const r=this.getComposerIndex(a);return e[r]=[...e[r]||[],a],e},{})}}const Am={name:"ListComposers",components:{ListItemComposer:lm,ModalDialogComposer:_s},props:["composers","media_kind"],data(){return{show_details_modal:!1,selected_composer:{}}},computed:{media_kind_resolved:function(){return this.media_kind?this.media_kind:this.selected_composer.media_kind},composers_list:function(){return Array.isArray(this.composers)?this.composers:this.composers.sortedAndFiltered},is_grouped:function(){return this.composers instanceof Es&&this.composers.options.group}},methods:{open_composer:function(s){this.selected_composer=s,this.$router.push({name:"ComposerTracks",params:{composer:s.name}})},open_dialog:function(s){this.selected_composer=s,this.show_details_modal=!0}}},qm={key:0},Pm=["id"],Tm=["onClick"],Lm=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),Rm=[Lm],Im={key:1},Um=["onClick"],Em=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),Om=[Em];function Dm(s,e,a,r,o,i){const n=m("list-item-composer"),p=m("modal-dialog-composer");return l(),c("div",null,[i.is_grouped?(l(),c("div",qm,[(l(!0),c(L,null,R(a.composers.indexList,h=>(l(),c("div",{key:h,class:"mb-6"},[t("span",{id:"index_"+h,class:"tag is-info is-light is-small has-text-weight-bold"},u(h),9,Pm),(l(!0),c(L,null,R(a.composers.grouped[h],k=>(l(),$(n,{key:k.id,composer:k,onClick:b=>i.open_composer(k)},{actions:d(()=>[t("a",{onClick:E(b=>i.open_dialog(k),["prevent","stop"])},Rm,8,Tm)]),_:2},1032,["composer","onClick"]))),128))]))),128))])):(l(),c("div",Im,[(l(!0),c(L,null,R(i.composers_list,h=>(l(),$(n,{key:h.id,composer:h,onClick:k=>i.open_composer(h)},{actions:d(()=>[t("a",{onClick:E(k=>i.open_dialog(h),["prevent","stop"])},Om,8,Um)]),_:2},1032,["composer","onClick"]))),128))])),_(p,{show:o.show_details_modal,composer:o.selected_composer,media_kind:a.media_kind,onClose:e[0]||(e[0]=h=>o.show_details_modal=!1)},null,8,["show","composer","media_kind"])])}var Os=w(Am,[["render",Dm]]);const wt={load:function(s){return f.library_composers()},set:function(s,e){e.data.composers?(s.composers=e.data.composers,s.heading=s.$route.params.genre):(s.composers=e.data,s.heading="Composers")}},Nm={name:"PageComposers",components:{ContentWithHeading:U,TabsMusic:j,IndexButtonList:W,ListComposers:Os},beforeRouteEnter(s,e,a){wt.load(s).then(r=>{a(o=>wt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;wt.load(s).then(o=>{wt.set(r,o),a()})},data(){return{composers:{items:[]},heading:"",show_details_modal:!1,selected_composer:{}}},computed:{index_list(){return[...new Set(this.composers.items.map(s=>s.name.charAt(0).toUpperCase()))]},composers_list(){return new Es(this.composers.items,{sort:"Name",group:!0})}},methods:{open_composer:function(s){this.$router.push({name:"ComposerAlbums",params:{composer:s.name}})},open_dialog:function(s){this.selected_composer=s,this.show_details_modal=!0}}},zm={class:"title is-4"},Vm={class:"heading"};function Bm(s,e,a,r,o,i){const n=m("tabs-music"),p=m("index-button-list"),h=m("list-composers"),k=m("content-with-heading");return l(),c("div",null,[_(n),_(k,null,{options:d(()=>[_(p,{index:i.composers_list.indexList},null,8,["index"])]),"heading-left":d(()=>[t("p",zm,u(o.heading),1),t("p",Vm,u(o.composers.total)+" composers",1)]),content:d(()=>[_(h,{composers:i.composers_list},null,8,["composers"])]),_:1})])}var Fm=w(Nm,[["render",Bm]]);const vt={load:function(s){return f.library_composer(s.params.composer)},set:function(s,e){s.name=s.$route.params.composer,s.composer_albums=e.data.albums}},Mm={name:"PageComposer",components:{ContentWithHeading:U,ListItemAlbums:Us,ModalDialogAlbum:it,ModalDialogComposer:_s},beforeRouteEnter(s,e,a){vt.load(s).then(r=>{a(o=>vt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;vt.load(s).then(o=>{vt.set(r,o),a()})},data(){return{name:"",composer_albums:{items:[]},show_details_modal:!1,selected_album:{},show_composer_details_modal:!1}},computed:{index_list(){return[...new Set(this.composer_albums.items.map(s=>s.name_sort.charAt(0).toUpperCase()))]}},methods:{open_tracks:function(){this.show_details_modal=!1,this.$router.push({name:"ComposerTracks",params:{composer:this.name}})},play:function(){f.player_play_expression('composer is "'+this.name+'" and media_kind is music',!0)},open_album:function(s){this.$router.push({path:"/music/albums/"+s.id})},open_dialog:function(s){this.selected_album=s,this.show_details_modal=!0}}},jm={class:"title is-4"},Gm={class:"buttons is-centered"},Hm=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),Wm=[Hm],Km=t("span",{class:"icon"},[t("i",{class:"mdi mdi-shuffle"})],-1),Ym=t("span",null,"Shuffle",-1),Qm=[Km,Ym],Jm={class:"heading has-text-centered-mobile"},Xm=["onClick"],Zm=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),th=[Zm];function sh(s,e,a,r,o,i){const n=m("index-button-list"),p=m("list-item-albums"),h=m("modal-dialog-album"),k=m("modal-dialog-composer"),b=m("content-with-heading");return l(),c("div",null,[_(b,null,{options:d(()=>[_(n,{index:i.index_list},null,8,["index"])]),"heading-left":d(()=>[t("p",jm,u(o.name),1)]),"heading-right":d(()=>[t("div",Gm,[t("a",{class:"button is-small is-light is-rounded",onClick:e[0]||(e[0]=g=>o.show_composer_details_modal=!0)},Wm),t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...g)=>i.play&&i.play(...g))},Qm)])]),content:d(()=>[t("p",Jm,[C(u(o.composer_albums.total)+" albums | ",1),t("a",{class:"has-text-link",onClick:e[2]||(e[2]=(...g)=>i.open_tracks&&i.open_tracks(...g))},"tracks")]),(l(!0),c(L,null,R(o.composer_albums.items,g=>(l(),$(p,{key:g.id,album:g,onClick:v=>i.open_album(g)},{actions:d(()=>[t("a",{onClick:v=>i.open_dialog(g)},th,8,Xm)]),_:2},1032,["album","onClick"]))),128)),_(h,{show:o.show_details_modal,album:o.selected_album,onClose:e[3]||(e[3]=g=>o.show_details_modal=!1)},null,8,["show","album"]),_(k,{show:o.show_composer_details_modal,composer:{name:o.name},onClose:e[4]||(e[4]=g=>o.show_composer_details_modal=!1)},null,8,["show","composer"])]),_:1})])}var eh=w(Mm,[["render",sh]]);const $t={load:function(s){return f.library_composer_tracks(s.params.composer)},set:function(s,e){s.composer=s.$route.params.composer,s.tracks=e.data.tracks}},ih={name:"PageComposerTracks",components:{ContentWithHeading:U,ListItemTrack:at,ModalDialogTrack:nt,ModalDialogComposer:_s},beforeRouteEnter(s,e,a){$t.load(s).then(r=>{a(o=>$t.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;$t.load(s).then(o=>{$t.set(r,o),a()})},data(){return{tracks:{items:[]},composer:"",min_rating:0,show_details_modal:!1,selected_track:{},show_composer_details_modal:!1}},computed:{index_list(){return[...new Set(this.tracks.items.map(s=>s.title_sort.charAt(0).toUpperCase()))]},rated_tracks(){return this.tracks.items.filter(s=>s.rating>=this.min_rating)}},methods:{open_albums:function(){this.show_details_modal=!1,this.$router.push({name:"ComposerAlbums",params:{composer:this.composer}})},play:function(){f.player_play_expression('composer is "'+this.composer+'" and media_kind is music',!0)},play_track:function(s){f.player_play_expression('composer is "'+this.composer+'" and media_kind is music',!1,s)},show_rating:function(s){s===.5&&(s=0),this.min_rating=Math.ceil(s)*20},open_dialog:function(s){this.selected_track=s,this.show_details_modal=!0}}},oh={class:"title is-4"},ah={class:"buttons is-centered"},nh=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),lh=[nh],rh=t("span",{class:"icon"},[t("i",{class:"mdi mdi-shuffle"})],-1),dh=t("span",null,"Shuffle",-1),ch=[rh,dh],_h={class:"heading has-text-centered-mobile"},uh=["onClick"],mh=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),hh=[mh];function ph(s,e,a,r,o,i){const n=m("index-button-list"),p=m("list-item-track"),h=m("modal-dialog-track"),k=m("modal-dialog-composer"),b=m("content-with-heading");return l(),c("div",null,[_(b,null,{options:d(()=>[_(n,{index:i.index_list},null,8,["index"])]),"heading-left":d(()=>[t("p",oh,u(o.composer),1)]),"heading-right":d(()=>[t("div",ah,[t("a",{class:"button is-small is-light is-rounded",onClick:e[0]||(e[0]=g=>o.show_composer_details_modal=!0)},lh),t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...g)=>i.play&&i.play(...g))},ch)])]),content:d(()=>[t("p",_h,[t("a",{class:"has-text-link",onClick:e[2]||(e[2]=(...g)=>i.open_albums&&i.open_albums(...g))},"albums"),C(" | "+u(o.tracks.total)+" tracks ",1)]),(l(!0),c(L,null,R(i.rated_tracks,(g,v)=>(l(),$(p,{key:g.id,track:g,onClick:A=>i.play_track(v)},{actions:d(()=>[t("a",{onClick:E(A=>i.open_dialog(g),["prevent","stop"])},hh,8,uh)]),_:2},1032,["track","onClick"]))),128)),_(h,{show:o.show_details_modal,track:o.selected_track,onClose:e[3]||(e[3]=g=>o.show_details_modal=!1)},null,8,["show","track"]),_(k,{show:o.show_composer_details_modal,composer:{name:o.composer},onClose:e[4]||(e[4]=g=>o.show_composer_details_modal=!1)},null,8,["show","composer"])]),_:1})])}var fh=w(ih,[["render",ph]]);const yh={name:"ModalDialogAddRss",props:["show"],emits:["close","podcast-added"],data(){return{url:"",loading:!1}},watch:{show(){this.show&&(this.loading=!1,setTimeout(()=>{this.$refs.url_field.focus()},10))}},methods:{add_stream:function(){this.loading=!0,f.library_add(this.url).then(()=>{this.$emit("close"),this.$emit("podcast-added"),this.url=""}).catch(()=>{this.loading=!1})}}},gh={key:0,class:"modal is-active"},bh={class:"modal-content fd-modal-card"},kh={class:"card"},wh={class:"card-content"},vh=t("p",{class:"title is-4"},"Add Podcast RSS feed URL",-1),$h={class:"field"},xh={class:"control is-expanded has-icons-left"},Ch=["disabled"],Sh=t("span",{class:"icon is-left"},[t("i",{class:"mdi mdi-rss"})],-1),Ah=t("p",{class:"help"}," Adding a podcast includes creating an RSS playlist, that will allow OwnTone to manage the podcast subscription. ",-1),qh={key:0,class:"card-footer"},Ph=t("a",{class:"card-footer-item button is-loading"},[t("span",{class:"icon"},[t("i",{class:"mdi mdi-web"})]),t("span",{class:"is-size-7"},"Processing ...")],-1),Th=[Ph],Lh={key:1,class:"card-footer"},Rh=t("span",{class:"icon"},[t("i",{class:"mdi mdi-cancel"})],-1),Ih=t("span",{class:"is-size-7"},"Cancel",-1),Uh=[Rh,Ih],Eh=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),Oh=t("span",{class:"is-size-7"},"Add",-1),Dh=[Eh,Oh];function Nh(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",gh,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",bh,[t("div",kh,[t("div",wh,[vh,t("form",{onSubmit:e[2]||(e[2]=E((...n)=>i.add_stream&&i.add_stream(...n),["prevent"]))},[t("div",$h,[t("p",xh,[D(t("input",{ref:"url_field","onUpdate:modelValue":e[1]||(e[1]=n=>o.url=n),class:"input is-shadowless",type:"text",placeholder:"http://url-to-rss",disabled:o.loading},null,8,Ch),[[V,o.url]]),Sh]),Ah])],32)]),o.loading?(l(),c("footer",qh,Th)):(l(),c("footer",Lh,[t("a",{class:"card-footer-item has-text-danger",onClick:e[3]||(e[3]=n=>s.$emit("close"))},Uh),t("a",{class:"card-footer-item has-background-info has-text-white has-text-weight-bold",onClick:e[4]||(e[4]=(...n)=>i.add_stream&&i.add_stream(...n))},Dh)]))])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[5]||(e[5]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var zh=w(yh,[["render",Nh]]);const Vh={name:"ProgressBar",props:["max","value"],computed:{width(){return this.value>0&&this.max>0?parseInt(this.value*100/this.max):0},width_percent(){return this.width+"%"}}};function Bh(s,e,a,r,o,i){return i.width>0?(l(),c("div",{key:0,class:"progress-bar mt-2",style:Jt({width:i.width_percent})},null,4)):y("",!0)}var Ds=w(Vh,[["render",Bh]]);const xt={load:function(s){return Promise.all([f.library_albums("podcast"),f.library_podcasts_new_episodes()])},set:function(s,e){s.albums=e[0].data,s.new_episodes=e[1].data.tracks}},Fh={name:"PagePodcasts",components:{ContentWithHeading:U,ListItemTrack:at,ListAlbums:G,ModalDialogTrack:nt,ModalDialogAddRss:zh,ProgressBar:Ds},beforeRouteEnter(s,e,a){xt.load(s).then(r=>{a(o=>xt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;xt.load(s).then(o=>{xt.set(r,o),a()})},data(){return{albums:{items:[]},new_episodes:{items:[]},show_url_modal:!1,show_track_details_modal:!1,selected_track:{}}},computed:{rss(){return this.$store.state.rss_count}},methods:{play_track:function(s){f.player_play_uri(s.uri,!1)},open_track_dialog:function(s){this.selected_track=s,this.show_track_details_modal=!0},mark_all_played:function(){this.new_episodes.items.forEach(s=>{f.library_track_update(s.id,{play_count:"increment"})}),this.new_episodes.items={}},open_add_podcast_dialog:function(s){this.show_url_modal=!0},reload_new_episodes:function(){f.library_podcasts_new_episodes().then(({data:s})=>{this.new_episodes=s.tracks})},reload_podcasts:function(){f.library_albums("podcast").then(({data:s})=>{this.albums=s,this.reload_new_episodes()})},update_rss:function(){this.$store.commit(os,"rss"),this.$store.commit(et,!0)}}},Mh=t("p",{class:"title is-4"},"New episodes",-1),jh={class:"buttons is-centered"},Gh=t("span",{class:"icon"},[t("i",{class:"mdi mdi-pencil"})],-1),Hh=t("span",null,"Mark All Played",-1),Wh=[Gh,Hh],Kh=["onClick"],Yh=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),Qh=[Yh],Jh=t("p",{class:"title is-4"},"Podcasts",-1),Xh={class:"heading"},Zh={class:"buttons is-centered"},tp=t("span",{class:"icon"},[t("i",{class:"mdi mdi-refresh"})],-1),sp=t("span",null,"Update",-1),ep=[tp,sp],ip=t("span",{class:"icon"},[t("i",{class:"mdi mdi-rss"})],-1),op=t("span",null,"Add Podcast",-1),ap=[ip,op];function np(s,e,a,r,o,i){const n=m("progress-bar"),p=m("list-item-track"),h=m("modal-dialog-track"),k=m("content-with-heading"),b=m("list-albums"),g=m("modal-dialog-add-rss");return l(),c("div",null,[o.new_episodes.items.length>0?(l(),$(k,{key:0},{"heading-left":d(()=>[Mh]),"heading-right":d(()=>[t("div",jh,[t("a",{class:"button is-small",onClick:e[0]||(e[0]=(...v)=>i.mark_all_played&&i.mark_all_played(...v))},Wh)])]),content:d(()=>[(l(!0),c(L,null,R(o.new_episodes.items,v=>(l(),$(p,{key:v.id,track:v,onClick:A=>i.play_track(v)},{progress:d(()=>[_(n,{max:v.length_ms,value:v.seek_ms},null,8,["max","value"])]),actions:d(()=>[t("a",{onClick:A=>i.open_track_dialog(v)},Qh,8,Kh)]),_:2},1032,["track","onClick"]))),128)),_(h,{show:o.show_track_details_modal,track:o.selected_track,onClose:e[1]||(e[1]=v=>o.show_track_details_modal=!1),onPlayCountChanged:i.reload_new_episodes},null,8,["show","track","onPlayCountChanged"])]),_:1})):y("",!0),_(k,null,{"heading-left":d(()=>[Jh,t("p",Xh,u(o.albums.total)+" podcasts",1)]),"heading-right":d(()=>[t("div",Zh,[i.rss.tracks>0?(l(),c("a",{key:0,class:"button is-small",onClick:e[2]||(e[2]=(...v)=>i.update_rss&&i.update_rss(...v))},ep)):y("",!0),t("a",{class:"button is-small",onClick:e[3]||(e[3]=(...v)=>i.open_add_podcast_dialog&&i.open_add_podcast_dialog(...v))},ap)])]),content:d(()=>[_(b,{albums:o.albums.items,onPlayCountChanged:e[4]||(e[4]=v=>i.reload_new_episodes()),onPodcastDeleted:e[5]||(e[5]=v=>i.reload_podcasts())},null,8,["albums"]),_(g,{show:o.show_url_modal,onClose:e[6]||(e[6]=v=>o.show_url_modal=!1),onPodcastAdded:e[7]||(e[7]=v=>i.reload_podcasts())},null,8,["show"])]),_:1})])}var lp=w(Fh,[["render",np]]);const Ct={load:function(s){return Promise.all([f.library_album(s.params.album_id),f.library_podcast_episodes(s.params.album_id)])},set:function(s,e){s.album=e[0].data,s.tracks=e[1].data.tracks.items}},rp={name:"PagePodcast",components:{ContentWithHeading:U,ListItemTrack:at,ModalDialogTrack:nt,ModalDialogAlbum:it,ModalDialog:as,ProgressBar:Ds},beforeRouteEnter(s,e,a){Ct.load(s).then(r=>{a(o=>Ct.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;Ct.load(s).then(o=>{Ct.set(r,o),a()})},data(){return{album:{},tracks:[],show_details_modal:!1,selected_track:{},show_album_details_modal:!1,show_remove_podcast_modal:!1,rss_playlist_to_remove:{}}},computed:{new_tracks(){return this.tracks.filter(s=>s.play_count===0).length}},methods:{play:function(){f.player_play_uri(this.album.uri,!1)},play_track:function(s){f.player_play_uri(s.uri,!1)},open_dialog:function(s){this.selected_track=s,this.show_details_modal=!0},open_remove_podcast_dialog:function(){this.show_album_details_modal=!1,f.library_track_playlists(this.tracks[0].id).then(({data:s})=>{const e=s.items.filter(a=>a.type==="rss");if(e.length!==1){this.$store.dispatch("add_notification",{text:"Podcast cannot be removed. Probably it was not added as an RSS playlist.",type:"danger"});return}this.rss_playlist_to_remove=e[0],this.show_remove_podcast_modal=!0})},remove_podcast:function(){this.show_remove_podcast_modal=!1,f.library_playlist_delete(this.rss_playlist_to_remove.id).then(()=>{this.$router.replace({path:"/podcasts"})})},reload_tracks:function(){f.library_podcast_episodes(this.album.id).then(({data:s})=>{this.tracks=s.tracks.items})}}},dp={class:"title is-4"},cp={class:"buttons is-centered"},_p=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),up=[_p],mp=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),hp=t("span",null,"Play",-1),pp=[mp,hp],fp={class:"heading has-text-centered-mobile"},yp=["onClick"],gp=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),bp=[gp],kp=t("p",null,"Permanently remove this podcast from your library?",-1),wp={class:"is-size-7"},vp=C(" (This will also remove the RSS playlist "),$p=C(".) ");function xp(s,e,a,r,o,i){const n=m("progress-bar"),p=m("list-item-track"),h=m("modal-dialog-track"),k=m("modal-dialog-album"),b=m("modal-dialog"),g=m("content-with-heading");return l(),$(g,null,{"heading-left":d(()=>[t("div",dp,u(o.album.name),1)]),"heading-right":d(()=>[t("div",cp,[t("a",{class:"button is-small is-light is-rounded",onClick:e[0]||(e[0]=v=>o.show_album_details_modal=!0)},up),t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...v)=>i.play&&i.play(...v))},pp)])]),content:d(()=>[t("p",fp,u(o.album.track_count)+" tracks ",1),(l(!0),c(L,null,R(o.tracks,v=>(l(),$(p,{key:v.id,track:v,onClick:A=>i.play_track(v)},{progress:d(()=>[_(n,{max:v.length_ms,value:v.seek_ms},null,8,["max","value"])]),actions:d(()=>[t("a",{onClick:E(A=>i.open_dialog(v),["prevent","stop"])},bp,8,yp)]),_:2},1032,["track","onClick"]))),128)),_(h,{show:o.show_details_modal,track:o.selected_track,onClose:e[2]||(e[2]=v=>o.show_details_modal=!1),onPlayCountChanged:i.reload_tracks},null,8,["show","track","onPlayCountChanged"]),_(k,{show:o.show_album_details_modal,album:o.album,media_kind:"podcast",new_tracks:i.new_tracks,onClose:e[3]||(e[3]=v=>o.show_album_details_modal=!1),onPlayCountChanged:i.reload_tracks,onRemovePodcast:i.open_remove_podcast_dialog},null,8,["show","album","new_tracks","onPlayCountChanged","onRemovePodcast"]),_(b,{show:o.show_remove_podcast_modal,title:"Remove podcast",delete_action:"Remove",onClose:e[4]||(e[4]=v=>o.show_remove_podcast_modal=!1),onDelete:i.remove_podcast},{"modal-content":d(()=>[kp,t("p",wp,[vp,t("b",null,u(o.rss_playlist_to_remove.name),1),$p])]),_:1},8,["show","onDelete"])]),_:1})}var Cp=w(rp,[["render",xp]]);const Sp={name:"TabsAudiobooks"},Ap={class:"section fd-tabs-section"},qp={class:"container"},Pp={class:"columns is-centered"},Tp={class:"column is-four-fifths"},Lp={class:"tabs is-centered is-small"},Rp=["onClick","onKeypress"],Ip=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-artist"})],-1),Up=t("span",{class:""},"Authors",-1),Ep=[Ip,Up],Op=["onClick","onKeypress"],Dp=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-album"})],-1),Np=t("span",{class:""},"Audiobooks",-1),zp=[Dp,Np];function Vp(s,e,a,r,o,i){const n=m("router-link");return l(),c("section",Ap,[t("div",qp,[t("div",Pp,[t("div",Tp,[t("div",Lp,[t("ul",null,[_(n,{to:"/audiobooks/artists",custom:""},{default:d(({navigate:p,isActive:h})=>[t("li",{class:S({"is-active":h})},[t("a",{onClick:p,onKeypress:z(p,["enter"])},Ep,40,Rp)],2)]),_:1}),_(n,{to:"/audiobooks/albums",custom:""},{default:d(({navigate:p,isActive:h})=>[t("li",{class:S({"is-active":h})},[t("a",{onClick:p,onKeypress:z(p,["enter"])},zp,40,Op)],2)]),_:1})])])])])])])}var Ns=w(Sp,[["render",Vp]]);const St={load:function(s){return f.library_albums("audiobook")},set:function(s,e){s.albums=e.data}},Bp={name:"PageAudiobooksAlbums",components:{TabsAudiobooks:Ns,ContentWithHeading:U,IndexButtonList:W,ListAlbums:G},beforeRouteEnter(s,e,a){St.load(s).then(r=>{a(o=>St.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;St.load(s).then(o=>{St.set(r,o),a()})},data(){return{albums:{items:[]}}},computed:{albums_list(){return new ot(this.albums.items,{sort:"Name",group:!0})}},methods:{}},Fp={class:"fd-page-with-tabs"},Mp=t("p",{class:"title is-4"},"Audiobooks",-1),jp={class:"heading"};function Gp(s,e,a,r,o,i){const n=m("tabs-audiobooks"),p=m("index-button-list"),h=m("list-albums"),k=m("content-with-heading");return l(),c("div",Fp,[_(n),_(k,null,{options:d(()=>[_(p,{index:i.albums_list.indexList},null,8,["index"])]),"heading-left":d(()=>[Mp,t("p",jp,u(i.albums_list.sortedAndFiltered.length)+" Audiobooks ",1)]),content:d(()=>[_(h,{albums:i.albums_list},null,8,["albums"])]),_:1})])}var Hp=w(Bp,[["render",Gp]]);const At={load:function(s){return f.library_artists("audiobook")},set:function(s,e){s.artists=e.data}},Wp={name:"PageAudiobooksArtists",components:{ContentWithHeading:U,TabsAudiobooks:Ns,IndexButtonList:W,ListArtists:ls},beforeRouteEnter(s,e,a){At.load(s).then(r=>{a(o=>At.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;At.load(s).then(o=>{At.set(r,o),a()})},data(){return{artists:{items:[]}}},computed:{artists_list(){return new ns(this.artists.items,{sort:"Name",group:!0})}},methods:{}},Kp={class:"fd-page-with-tabs"},Yp=t("p",{class:"title is-4"},"Authors",-1),Qp={class:"heading"};function Jp(s,e,a,r,o,i){const n=m("tabs-audiobooks"),p=m("index-button-list"),h=m("list-artists"),k=m("content-with-heading");return l(),c("div",Kp,[_(n),_(k,null,{options:d(()=>[_(p,{index:i.artists_list.indexList},null,8,["index"])]),"heading-left":d(()=>[Yp,t("p",Qp,u(i.artists_list.sortedAndFiltered.length)+" Authors ",1)]),"heading-right":d(()=>[]),content:d(()=>[_(h,{artists:i.artists_list},null,8,["artists"])]),_:1})])}var Xp=w(Wp,[["render",Jp]]);const qt={load:function(s){return Promise.all([f.library_artist(s.params.artist_id),f.library_artist_albums(s.params.artist_id)])},set:function(s,e){s.artist=e[0].data,s.albums=e[1].data}},Zp={name:"PageAudiobooksArtist",components:{ContentWithHeading:U,ListAlbums:G,ModalDialogArtist:Mt},beforeRouteEnter(s,e,a){qt.load(s).then(r=>{a(o=>qt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;qt.load(s).then(o=>{qt.set(r,o),a()})},data(){return{artist:{},albums:{},show_artist_details_modal:!1}},methods:{play:function(){f.player_play_uri(this.albums.items.map(s=>s.uri).join(","),!1)}}},tf={class:"title is-4"},sf={class:"buttons is-centered"},ef=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),of=[ef],af=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),nf=t("span",null,"Shuffle",-1),lf=[af,nf],rf={class:"heading has-text-centered-mobile"};function df(s,e,a,r,o,i){const n=m("list-albums"),p=m("modal-dialog-artist"),h=m("content-with-heading");return l(),$(h,null,{"heading-left":d(()=>[t("p",tf,u(o.artist.name),1)]),"heading-right":d(()=>[t("div",sf,[t("a",{class:"button is-small is-light is-rounded",onClick:e[0]||(e[0]=k=>o.show_artist_details_modal=!0)},of),t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...k)=>i.play&&i.play(...k))},lf)])]),content:d(()=>[t("p",rf,u(o.artist.album_count)+" albums ",1),_(n,{albums:o.albums.items},null,8,["albums"]),_(p,{show:o.show_artist_details_modal,artist:o.artist,onClose:e[2]||(e[2]=k=>o.show_artist_details_modal=!1)},null,8,["show","artist"])]),_:1})}var cf=w(Zp,[["render",df]]);const Pt={load:function(s){return Promise.all([f.library_album(s.params.album_id),f.library_album_tracks(s.params.album_id)])},set:function(s,e){s.album=e[0].data,s.tracks=e[1].data.items}},_f={name:"PageAudiobooksAlbum",components:{ContentWithHero:ds,ListTracks:H,ModalDialogAlbum:it,CoverArtwork:M},beforeRouteEnter(s,e,a){Pt.load(s).then(r=>{a(o=>Pt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;Pt.load(s).then(o=>{Pt.set(r,o),a()})},data(){return{album:{},tracks:[],show_album_details_modal:!1}},methods:{open_artist:function(){this.show_details_modal=!1,this.$router.push({path:"/audiobooks/artists/"+this.album.artist_id})},play:function(){f.player_play_uri(this.album.uri,!1)},play_track:function(s){f.player_play_uri(this.album.uri,!1,s)},open_dialog:function(s){this.selected_track=s,this.show_details_modal=!0}}},uf={class:"title is-5"},mf={class:"subtitle is-6 has-text-link has-text-weight-normal"},hf={class:"buttons fd-is-centered-mobile fd-has-margin-top"},pf=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),ff=t("span",null,"Play",-1),yf=[pf,ff],gf=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),bf=[gf],kf={class:"image is-square fd-has-shadow fd-has-action"},wf={class:"heading is-7 has-text-centered-mobile fd-has-margin-top"};function vf(s,e,a,r,o,i){const n=m("cover-artwork"),p=m("list-tracks"),h=m("modal-dialog-album"),k=m("content-with-hero");return l(),$(k,null,{"heading-left":d(()=>[t("h1",uf,u(o.album.name),1),t("h2",mf,[t("a",{class:"has-text-link",onClick:e[0]||(e[0]=(...b)=>i.open_artist&&i.open_artist(...b))},u(o.album.artist),1)]),t("div",hf,[t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...b)=>i.play&&i.play(...b))},yf),t("a",{class:"button is-small is-light is-rounded",onClick:e[2]||(e[2]=b=>o.show_album_details_modal=!0)},bf)])]),"heading-right":d(()=>[t("p",kf,[_(n,{artwork_url:o.album.artwork_url,artist:o.album.artist,album:o.album.name,onClick:e[3]||(e[3]=b=>o.show_album_details_modal=!0)},null,8,["artwork_url","artist","album"])])]),content:d(()=>[t("p",wf,u(o.album.track_count)+" tracks ",1),_(p,{tracks:o.tracks,uris:o.album.uri},null,8,["tracks","uris"]),_(h,{show:o.show_album_details_modal,album:o.album,media_kind:"audiobook",onClose:e[4]||(e[4]=b=>o.show_album_details_modal=!1)},null,8,["show","album"])]),_:1})}var $f=w(_f,[["render",vf]]);const xf={name:"ListItemPlaylist",props:["playlist"]},Cf={class:"media"},Sf={key:0,class:"media-left fd-has-action"},Af={class:"media-content fd-has-action is-clipped"},qf={class:"title is-6"},Pf={class:"media-right"};function Tf(s,e,a,r,o,i){return l(),c("div",Cf,[s.$slots.icon?(l(),c("figure",Sf,[I(s.$slots,"icon")])):y("",!0),t("div",Af,[t("h1",qf,u(a.playlist.name),1)]),t("div",Pf,[I(s.$slots,"actions")])])}var zs=w(xf,[["render",Tf]]);const Lf={name:"ModalDialogPlaylist",props:["show","playlist","uris"],emits:["close"],methods:{play:function(){this.$emit("close"),f.player_play_uri(this.uris?this.uris:this.playlist.uri,!1)},queue_add:function(){this.$emit("close"),f.queue_add(this.uris?this.uris:this.playlist.uri)},queue_add_next:function(){this.$emit("close"),f.queue_add_next(this.uris?this.uris:this.playlist.uri)},open_playlist:function(){this.$emit("close"),this.$router.push({path:"/playlists/"+this.playlist.id+"/tracks"})}}},Rf={key:0,class:"modal is-active"},If={class:"modal-content fd-modal-card"},Uf={class:"card"},Ef={class:"card-content"},Of={class:"title is-4"},Df={class:"content is-small"},Nf=t("span",{class:"heading"},"Path",-1),zf={class:"title is-6"},Vf=t("span",{class:"heading"},"Type",-1),Bf={class:"title is-6"},Ff={key:0,class:"card-footer"},Mf=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),jf=t("span",{class:"is-size-7"},"Add",-1),Gf=[Mf,jf],Hf=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-play"})],-1),Wf=t("span",{class:"is-size-7"},"Add Next",-1),Kf=[Hf,Wf],Yf=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),Qf=t("span",{class:"is-size-7"},"Play",-1),Jf=[Yf,Qf];function Xf(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",Rf,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",If,[t("div",Uf,[t("div",Ef,[t("p",Of,[t("a",{class:"has-text-link",onClick:e[1]||(e[1]=(...n)=>i.open_playlist&&i.open_playlist(...n))},u(a.playlist.name),1)]),t("div",Df,[t("p",null,[Nf,t("span",zf,u(a.playlist.path),1)]),t("p",null,[Vf,t("span",Bf,u(a.playlist.type),1)])])]),a.playlist.folder?y("",!0):(l(),c("footer",Ff,[t("a",{class:"card-footer-item has-text-dark",onClick:e[2]||(e[2]=(...n)=>i.queue_add&&i.queue_add(...n))},Gf),t("a",{class:"card-footer-item has-text-dark",onClick:e[3]||(e[3]=(...n)=>i.queue_add_next&&i.queue_add_next(...n))},Kf),t("a",{class:"card-footer-item has-text-dark",onClick:e[4]||(e[4]=(...n)=>i.play&&i.play(...n))},Jf)]))])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[5]||(e[5]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var us=w(Lf,[["render",Xf]]);const Zf={name:"ListPlaylists",components:{ListItemPlaylist:zs,ModalDialogPlaylist:us},props:["playlists"],data(){return{show_details_modal:!1,selected_playlist:{}}},methods:{open_playlist:function(s){s.type!=="folder"?this.$router.push({path:"/playlists/"+s.id+"/tracks"}):this.$router.push({path:"/playlists/"+s.id})},open_dialog:function(s){this.selected_playlist=s,this.show_details_modal=!0}}},ty={class:"icon"},sy=["onClick"],ey=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),iy=[ey];function oy(s,e,a,r,o,i){const n=m("list-item-playlist"),p=m("modal-dialog-playlist");return l(),c("div",null,[(l(!0),c(L,null,R(a.playlists,h=>(l(),$(n,{key:h.id,playlist:h,onClick:k=>i.open_playlist(h)},{icon:d(()=>[t("span",ty,[t("i",{class:S(["mdi",{"mdi-library-music":h.type!=="folder","mdi-rss":h.type==="rss","mdi-folder":h.type==="folder"}])},null,2)])]),actions:d(()=>[t("a",{onClick:E(k=>i.open_dialog(h),["prevent","stop"])},iy,8,sy)]),_:2},1032,["playlist","onClick"]))),128)),_(p,{show:o.show_details_modal,playlist:o.selected_playlist,onClose:e[0]||(e[0]=h=>o.show_details_modal=!1)},null,8,["show","playlist"])])}var Vs=w(Zf,[["render",oy]]);const Tt={load:function(s){return Promise.all([f.library_playlist(s.params.playlist_id),f.library_playlist_folder(s.params.playlist_id)])},set:function(s,e){s.playlist=e[0].data,s.playlists=e[1].data}},ay={name:"PagePlaylists",components:{ContentWithHeading:U,ListPlaylists:Vs},beforeRouteEnter(s,e,a){Tt.load(s).then(r=>{a(o=>Tt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;Tt.load(s).then(o=>{Tt.set(r,o),a()})},data(){return{playlist:{},playlists:{}}}},ny={class:"title is-4"},ly={class:"heading"};function ry(s,e,a,r,o,i){const n=m("list-playlists"),p=m("content-with-heading");return l(),$(p,null,{"heading-left":d(()=>[t("p",ny,u(o.playlist.name),1),t("p",ly,u(o.playlists.total)+" playlists",1)]),content:d(()=>[_(n,{playlists:o.playlists.items},null,8,["playlists"])]),_:1})}var dy=w(ay,[["render",ry]]);const Lt={load:function(s){return Promise.all([f.library_playlist(s.params.playlist_id),f.library_playlist_tracks(s.params.playlist_id)])},set:function(s,e){s.playlist=e[0].data,s.tracks=e[1].data.items}},cy={name:"PagePlaylist",components:{ContentWithHeading:U,ListTracks:H,ModalDialogPlaylist:us},beforeRouteEnter(s,e,a){Lt.load(s).then(r=>{a(o=>Lt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;Lt.load(s).then(o=>{Lt.set(r,o),a()})},data(){return{playlist:{},tracks:[],show_playlist_details_modal:!1}},computed:{uris(){return this.playlist.random?this.tracks.map(s=>s.uri).join(","):this.playlist.uri}},methods:{play:function(){f.player_play_uri(this.uris,!0)}}},_y={class:"title is-4"},uy={class:"buttons is-centered"},my=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),hy=[my],py=t("span",{class:"icon"},[t("i",{class:"mdi mdi-shuffle"})],-1),fy=t("span",null,"Shuffle",-1),yy=[py,fy],gy={class:"heading has-text-centered-mobile"};function by(s,e,a,r,o,i){const n=m("list-tracks"),p=m("modal-dialog-playlist"),h=m("content-with-heading");return l(),$(h,null,{"heading-left":d(()=>[t("div",_y,u(o.playlist.name),1)]),"heading-right":d(()=>[t("div",uy,[t("a",{class:"button is-small is-light is-rounded",onClick:e[0]||(e[0]=k=>o.show_playlist_details_modal=!0)},hy),t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...k)=>i.play&&i.play(...k))},yy)])]),content:d(()=>[t("p",gy,u(o.tracks.length)+" tracks",1),_(n,{tracks:o.tracks,uris:i.uris},null,8,["tracks","uris"]),_(p,{show:o.show_playlist_details_modal,playlist:o.playlist,uris:i.uris,onClose:e[2]||(e[2]=k=>o.show_playlist_details_modal=!1)},null,8,["show","playlist","uris"])]),_:1})}var ky=w(cy,[["render",by]]);const wy={name:"ListItemDirectory",props:["directory"]},vy={class:"media"},$y=t("figure",{class:"media-left fd-has-action"},[t("span",{class:"icon"},[t("i",{class:"mdi mdi-folder"})])],-1),xy={class:"media-content fd-has-action is-clipped"},Cy={class:"title is-6"},Sy={class:"subtitle is-7 has-text-grey-light"},Ay={class:"media-right"};function qy(s,e,a,r,o,i){return l(),c("div",vy,[$y,t("div",xy,[t("h1",Cy,u(a.directory.path.substring(a.directory.path.lastIndexOf("/")+1)),1),t("h2",Sy,u(a.directory.path),1)]),t("div",Ay,[I(s.$slots,"actions")])])}var Py=w(wy,[["render",qy]]);const Ty={name:"ModalDialogDirectory",props:["show","directory"],emits:["close"],methods:{play:function(){this.$emit("close"),f.player_play_expression('path starts with "'+this.directory.path+'" order by path asc',!1)},queue_add:function(){this.$emit("close"),f.queue_expression_add('path starts with "'+this.directory.path+'" order by path asc')},queue_add_next:function(){this.$emit("close"),f.queue_expression_add_next('path starts with "'+this.directory.path+'" order by path asc')}}},Ly={key:0,class:"modal is-active"},Ry={class:"modal-content fd-modal-card"},Iy={class:"card"},Uy={class:"card-content"},Ey={class:"title is-4"},Oy={class:"card-footer"},Dy=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),Ny=t("span",{class:"is-size-7"},"Add",-1),zy=[Dy,Ny],Vy=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-play"})],-1),By=t("span",{class:"is-size-7"},"Add Next",-1),Fy=[Vy,By],My=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),jy=t("span",{class:"is-size-7"},"Play",-1),Gy=[My,jy];function Hy(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",Ly,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",Ry,[t("div",Iy,[t("div",Uy,[t("p",Ey,u(a.directory.path),1)]),t("footer",Oy,[t("a",{class:"card-footer-item has-text-dark",onClick:e[1]||(e[1]=(...n)=>i.queue_add&&i.queue_add(...n))},zy),t("a",{class:"card-footer-item has-text-dark",onClick:e[2]||(e[2]=(...n)=>i.queue_add_next&&i.queue_add_next(...n))},Fy),t("a",{class:"card-footer-item has-text-dark",onClick:e[3]||(e[3]=(...n)=>i.play&&i.play(...n))},Gy)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[4]||(e[4]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var Wy=w(Ty,[["render",Hy]]);const Rt={load:function(s){return s.query.directory?f.library_files(s.query.directory):Promise.resolve()},set:function(s,e){e?s.files=e.data:s.files={directories:s.$store.state.config.directories.map(a=>({path:a})),tracks:{items:[]},playlists:{items:[]}}}},Ky={name:"PageFiles",components:{ContentWithHeading:U,ListItemDirectory:Py,ListItemPlaylist:zs,ListItemTrack:at,ModalDialogDirectory:Wy,ModalDialogPlaylist:us,ModalDialogTrack:nt},beforeRouteEnter(s,e,a){Rt.load(s).then(r=>{a(o=>Rt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;Rt.load(s).then(o=>{Rt.set(r,o),a()})},data(){return{files:{directories:[],tracks:{items:[]},playlists:{items:[]}},show_directory_details_modal:!1,selected_directory:{},show_playlist_details_modal:!1,selected_playlist:{},show_track_details_modal:!1,selected_track:{}}},computed:{current_directory(){return this.$route.query&&this.$route.query.directory?this.$route.query.directory:"/"}},methods:{open_parent_directory:function(){this.current_directory.slice(0,this.current_directory.lastIndexOf("/"))===""||this.$store.state.config.directories.includes(this.current_directory)?this.$router.push({path:"/files"}):this.$router.push({path:"/files",query:{directory:this.current_directory.slice(0,this.current_directory.lastIndexOf("/"))}})},open_directory:function(s){this.$router.push({path:"/files",query:{directory:s.path}})},open_directory_dialog:function(s){this.selected_directory=s,this.show_directory_details_modal=!0},play:function(){f.player_play_expression('path starts with "'+this.current_directory+'" order by path asc',!1)},play_track:function(s){f.player_play_uri(this.files.tracks.items.map(e=>e.uri).join(","),!1,s)},open_track_dialog:function(s){this.selected_track=s,this.show_track_details_modal=!0},open_playlist:function(s){this.$router.push({path:"/playlists/"+s.id+"/tracks"})},open_playlist_dialog:function(s){this.selected_playlist=s,this.show_playlist_details_modal=!0}}},Yy=t("p",{class:"title is-4"},"Files",-1),Qy={class:"title is-7 has-text-grey"},Jy={class:"buttons is-centered"},Xy=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),Zy=[Xy],tg=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),sg=t("span",null,"Play",-1),eg=[tg,sg],ig=t("figure",{class:"media-left fd-has-action"},[t("span",{class:"icon"},[t("i",{class:"mdi mdi-subdirectory-arrow-left"})])],-1),og=t("div",{class:"media-content fd-has-action is-clipped"},[t("h1",{class:"title is-6"},"..")],-1),ag={class:"media-right"},ng=["onClick"],lg=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),rg=[lg],dg=t("span",{class:"icon"},[t("i",{class:"mdi mdi-library-music"})],-1),cg=["onClick"],_g=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),ug=[_g],mg=t("span",{class:"icon"},[t("i",{class:"mdi mdi-file-outline"})],-1),hg=["onClick"],pg=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),fg=[pg];function yg(s,e,a,r,o,i){const n=m("list-item-directory"),p=m("list-item-playlist"),h=m("list-item-track"),k=m("modal-dialog-directory"),b=m("modal-dialog-playlist"),g=m("modal-dialog-track"),v=m("content-with-heading");return l(),c("div",null,[_(v,null,{"heading-left":d(()=>[Yy,t("p",Qy,u(i.current_directory),1)]),"heading-right":d(()=>[t("div",Jy,[t("a",{class:"button is-small is-light is-rounded",onClick:e[0]||(e[0]=A=>i.open_directory_dialog({path:i.current_directory}))},Zy),t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...A)=>i.play&&i.play(...A))},eg)])]),content:d(()=>[s.$route.query.directory?(l(),c("div",{key:0,class:"media",onClick:e[2]||(e[2]=A=>i.open_parent_directory())},[ig,og,t("div",ag,[I(s.$slots,"actions")])])):y("",!0),(l(!0),c(L,null,R(o.files.directories,A=>(l(),$(n,{key:A.path,directory:A,onClick:q=>i.open_directory(A)},{actions:d(()=>[t("a",{onClick:q=>i.open_directory_dialog(A)},rg,8,ng)]),_:2},1032,["directory","onClick"]))),128)),(l(!0),c(L,null,R(o.files.playlists.items,A=>(l(),$(p,{key:A.id,playlist:A,onClick:q=>i.open_playlist(A)},{icon:d(()=>[dg]),actions:d(()=>[t("a",{onClick:q=>i.open_playlist_dialog(A)},ug,8,cg)]),_:2},1032,["playlist","onClick"]))),128)),(l(!0),c(L,null,R(o.files.tracks.items,(A,q)=>(l(),$(h,{key:A.id,track:A,onClick:F=>i.play_track(q)},{icon:d(()=>[mg]),actions:d(()=>[t("a",{onClick:F=>i.open_track_dialog(A)},fg,8,hg)]),_:2},1032,["track","onClick"]))),128)),_(k,{show:o.show_directory_details_modal,directory:o.selected_directory,onClose:e[3]||(e[3]=A=>o.show_directory_details_modal=!1)},null,8,["show","directory"]),_(b,{show:o.show_playlist_details_modal,playlist:o.selected_playlist,onClose:e[4]||(e[4]=A=>o.show_playlist_details_modal=!1)},null,8,["show","playlist"]),_(g,{show:o.show_track_details_modal,track:o.selected_track,onClose:e[5]||(e[5]=A=>o.show_track_details_modal=!1)},null,8,["show","track"])]),_:3})])}var gg=w(Ky,[["render",yg]]);const It={load:function(s){return f.library_radio_streams()},set:function(s,e){s.tracks=e.data.tracks}},bg={name:"PageRadioStreams",components:{ContentWithHeading:U,ListTracks:H},beforeRouteEnter(s,e,a){It.load(s).then(r=>{a(o=>It.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;It.load(s).then(o=>{It.set(r,o),a()})},data(){return{tracks:{items:[]}}}},kg=t("p",{class:"title is-4"},"Radio",-1),wg={class:"heading has-text-centered-mobile"};function vg(s,e,a,r,o,i){const n=m("list-tracks"),p=m("content-with-heading");return l(),c("div",null,[_(p,null,{"heading-left":d(()=>[kg]),content:d(()=>[t("p",wg,u(o.tracks.total)+" tracks ",1),_(n,{tracks:o.tracks.items},null,8,["tracks"])]),_:1})])}var $g=w(bg,[["render",vg]]);const xg={name:"ContentText"},Cg={class:"section fd-content py-3"},Sg={class:"container"},Ag={class:"columns is-centered"},qg={class:"column is-four-fifths"};function Pg(s,e,a,r,o,i){return l(),c("section",Cg,[t("div",Sg,[t("div",Ag,[t("div",qg,[I(s.$slots,"content")])])])])}var Bs=w(xg,[["render",Pg]]);const Tg={name:"TabsSearch",props:["query"],computed:{spotify_enabled(){return this.$store.state.spotify.webapi_token_valid},route_query:function(){return this.query?{type:"track,artist,album,playlist,audiobook,podcast",query:this.query,limit:3,offset:0}:null}},methods:{search_library:function(){this.$store.state.search_path="/search/library",this.$router.push({path:this.$store.state.search_path,query:this.route_query})},search_spotify:function(){this.$store.state.search_path="/search/spotify",this.$router.push({path:this.$store.state.search_path,query:this.route_query})}}},Lg={key:0,class:"section fd-remove-padding-bottom"},Rg={class:"container"},Ig={class:"columns is-centered"},Ug={class:"column is-four-fifths"},Eg={class:"tabs is-centered is-small is-toggle is-toggle-rounded"},Og=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-library-books"})],-1),Dg=t("span",{class:""},"Library",-1),Ng=[Og,Dg],zg=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-spotify"})],-1),Vg=t("span",{class:""},"Spotify",-1),Bg=[zg,Vg];function Fg(s,e,a,r,o,i){return i.spotify_enabled?(l(),c("section",Lg,[t("div",Rg,[t("div",Ig,[t("div",Ug,[t("div",Eg,[t("ul",null,[t("li",{class:S({"is-active":s.$store.state.search_path==="/search/library"})},[t("a",{onClick:e[0]||(e[0]=(...n)=>i.search_library&&i.search_library(...n))},Ng)],2),t("li",{class:S({"is-active":s.$store.state.search_path==="/search/spotify"})},[t("a",{onClick:e[1]||(e[1]=(...n)=>i.search_spotify&&i.search_spotify(...n))},Bg)],2)])])])])])])):y("",!0)}var Fs=w(Tg,[["render",Fg]]);const Mg={name:"PageSearch",components:{ContentWithHeading:U,ContentText:Bs,TabsSearch:Fs,ListTracks:H,ListArtists:ls,ListAlbums:G,ListPlaylists:Vs,ListComposers:Os},data(){return{search_query:"",tracks:{items:[],total:0},artists:{items:[],total:0},albums:{items:[],total:0},composers:{items:[],total:0},playlists:{items:[],total:0},audiobooks:{items:[],total:0},podcasts:{items:[],total:0}}},computed:{recent_searches(){return this.$store.state.recent_searches},show_tracks(){return this.$route.query.type&&this.$route.query.type.includes("track")},show_all_tracks_button(){return this.tracks.total>this.tracks.items.length},show_artists(){return this.$route.query.type&&this.$route.query.type.includes("artist")},show_all_artists_button(){return this.artists.total>this.artists.items.length},show_albums(){return this.$route.query.type&&this.$route.query.type.includes("album")},show_all_albums_button(){return this.albums.total>this.albums.items.length},show_composers(){return this.$route.query.type&&this.$route.query.type.includes("composer")},show_all_composers_button(){return this.composers.total>this.composers.items.length},show_playlists(){return this.$route.query.type&&this.$route.query.type.includes("playlist")},show_all_playlists_button(){return this.playlists.total>this.playlists.items.length},show_audiobooks(){return this.$route.query.type&&this.$route.query.type.includes("audiobook")},show_all_audiobooks_button(){return this.audiobooks.total>this.audiobooks.items.length},show_podcasts(){return this.$route.query.type&&this.$route.query.type.includes("podcast")},show_all_podcasts_button(){return this.podcasts.total>this.podcasts.items.length},is_visible_artwork(){return this.$store.getters.settings_option("webinterface","show_cover_artwork_in_album_lists").value}},watch:{$route(s,e){this.search(s)}},mounted:function(){this.search(this.$route)},methods:{search:function(s){if(!s.query.query||s.query.query===""){this.search_query="",this.$refs.search_field.focus();return}this.search_query=s.query.query,this.searchMusic(s.query),this.searchAudiobooks(s.query),this.searchPodcasts(s.query),this.$store.commit(es,s.query.query)},searchMusic:function(s){if(s.type.indexOf("track")<0&&s.type.indexOf("artist")<0&&s.type.indexOf("album")<0&&s.type.indexOf("playlist")<0)return;const e={type:s.type,media_kind:"music"};s.query.startsWith("query:")?e.expression=s.query.replace(/^query:/,"").trim():e.query=s.query,s.limit&&(e.limit=s.limit,e.offset=s.offset),f.search(e).then(({data:a})=>{this.tracks=a.tracks?a.tracks:{items:[],total:0},this.artists=a.artists?a.artists:{items:[],total:0},this.albums=a.albums?a.albums:{items:[],total:0},this.composers=a.composers?a.composers:{items:[],total:0},this.playlists=a.playlists?a.playlists:{items:[],total:0}})},searchAudiobooks:function(s){if(s.type.indexOf("audiobook")<0)return;const e={type:"album",media_kind:"audiobook"};s.query.startsWith("query:")?e.expression=s.query.replace(/^query:/,"").trim():e.expression='((album includes "'+s.query+'" or artist includes "'+s.query+'") and media_kind is audiobook)',s.limit&&(e.limit=s.limit,e.offset=s.offset),f.search(e).then(({data:a})=>{this.audiobooks=a.albums?a.albums:{items:[],total:0}})},searchPodcasts:function(s){if(s.type.indexOf("podcast")<0)return;const e={type:"album",media_kind:"podcast"};s.query.startsWith("query:")?e.expression=s.query.replace(/^query:/,"").trim():e.expression='((album includes "'+s.query+'" or artist includes "'+s.query+'") and media_kind is podcast)',s.limit&&(e.limit=s.limit,e.offset=s.offset),f.search(e).then(({data:a})=>{this.podcasts=a.albums?a.albums:{items:[],total:0}})},new_search:function(){!this.search_query||(this.$router.push({path:this.$store.state.search_path,query:{type:"track,artist,album,playlist,audiobook,podcast,composer",query:this.search_query,limit:3,offset:0}}),this.$refs.search_field.blur())},open_search_tracks:function(){this.$router.push({path:"/search/library",query:{type:"track",query:this.$route.query.query}})},open_search_artists:function(){this.$router.push({path:"/search/library",query:{type:"artist",query:this.$route.query.query}})},open_search_albums:function(){this.$router.push({path:"/search/library",query:{type:"album",query:this.$route.query.query}})},open_search_composers:function(){this.$router.push({path:"/search/library",query:{type:"tracks",query:this.$route.query.query}})},open_search_playlists:function(){this.$router.push({path:"/search/library",query:{type:"playlist",query:this.$route.query.query}})},open_search_audiobooks:function(){this.$router.push({path:"/search/library",query:{type:"audiobook",query:this.$route.query.query}})},open_search_podcasts:function(){this.$router.push({path:"/search/library",query:{type:"podcast",query:this.$route.query.query}})},open_composer:function(s){this.$router.push({name:"ComposerAlbums",params:{composer:s.name}})},open_playlist:function(s){this.$router.push({path:"/playlists/"+s.id+"/tracks"})},open_recent_search:function(s){this.search_query=s,this.new_search()},open_track_dialog:function(s){this.selected_track=s,this.show_track_details_modal=!0},open_album_dialog:function(s){this.selected_album=s,this.show_album_details_modal=!0},open_artist_dialog:function(s){this.selected_artist=s,this.show_artist_details_modal=!0},open_composer_dialog:function(s){this.selected_composer=s,this.show_composer_details_modal=!0},open_playlist_dialog:function(s){this.selected_playlist=s,this.show_playlist_details_modal=!0}}},jg={class:"section fd-remove-padding-bottom"},Gg={class:"container"},Hg={class:"columns is-centered"},Wg={class:"column is-four-fifths"},Kg={class:"field"},Yg={class:"control is-expanded has-icons-left"},Qg=t("span",{class:"icon is-left"},[t("i",{class:"mdi mdi-magnify"})],-1),Jg=t("p",{class:"help has-text-centered"},[C(" Tip: you can search by a smart playlist query language "),t("a",{href:"https://github.com/owntone/owntone-server/blob/master/README_SMARTPL.md",target:"_blank"},"expression"),C(" if you prefix it with "),t("code",null,"query:"),C(". ")],-1),Xg={class:"tags",style:{"margin-top":"16px"}},Zg=["onClick"],tb=t("p",{class:"title is-4"},"Tracks",-1),sb={key:0,class:"level"},eb={class:"level-item"},ib=t("p",null,[t("i",null,"No tracks found")],-1),ob=t("p",{class:"title is-4"},"Artists",-1),ab={key:0,class:"level"},nb={class:"level-item"},lb=t("p",null,[t("i",null,"No artists found")],-1),rb=t("p",{class:"title is-4"},"Albums",-1),db={key:0,class:"level"},cb={class:"level-item"},_b=t("p",null,[t("i",null,"No albums found")],-1),ub=t("p",{class:"title is-4"},"Composers",-1),mb={key:0,class:"level"},hb={class:"level-item"},pb=t("p",null,[t("i",null,"No composers found")],-1),fb=t("p",{class:"title is-4"},"Playlists",-1),yb={key:0,class:"level"},gb={class:"level-item"},bb=t("p",null,[t("i",null,"No playlists found")],-1),kb=t("p",{class:"title is-4"},"Podcasts",-1),wb={key:0,class:"level"},vb={class:"level-item"},$b=t("p",null,[t("i",null,"No podcasts found")],-1),xb=t("p",{class:"title is-4"},"Audiobooks",-1),Cb={key:0,class:"level"},Sb={class:"level-item"},Ab=t("p",null,[t("i",null,"No audiobooks found")],-1);function qb(s,e,a,r,o,i){const n=m("tabs-search"),p=m("list-tracks"),h=m("content-with-heading"),k=m("content-text"),b=m("list-artists"),g=m("list-albums"),v=m("list-composers"),A=m("list-playlists");return l(),c("div",null,[t("section",jg,[t("div",Gg,[t("div",Hg,[t("div",Wg,[t("form",{onSubmit:e[1]||(e[1]=E((...q)=>i.new_search&&i.new_search(...q),["prevent"]))},[t("div",Kg,[t("p",Yg,[D(t("input",{ref:"search_field","onUpdate:modelValue":e[0]||(e[0]=q=>o.search_query=q),class:"input is-rounded is-shadowless",type:"text",placeholder:"Search",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"},null,512),[[V,o.search_query]]),Qg]),Jg])],32),t("div",Xg,[(l(!0),c(L,null,R(i.recent_searches,q=>(l(),c("a",{key:q,class:"tag",onClick:F=>i.open_recent_search(q)},u(q),9,Zg))),128))])])])])]),_(n,{query:o.search_query},null,8,["query"]),i.show_tracks&&o.tracks.total?(l(),$(h,{key:0},{"heading-left":d(()=>[tb]),content:d(()=>[_(p,{tracks:o.tracks.items},null,8,["tracks"])]),footer:d(()=>[i.show_all_tracks_button?(l(),c("nav",sb,[t("p",eb,[t("a",{class:"button is-light is-small is-rounded",onClick:e[2]||(e[2]=(...q)=>i.open_search_tracks&&i.open_search_tracks(...q))},"Show all "+u(o.tracks.total.toLocaleString())+" tracks",1)])])):y("",!0)]),_:1})):y("",!0),i.show_tracks&&!o.tracks.total?(l(),$(k,{key:1,class:"mt-6"},{content:d(()=>[ib]),_:1})):y("",!0),i.show_artists&&o.artists.total?(l(),$(h,{key:2},{"heading-left":d(()=>[ob]),content:d(()=>[_(b,{artists:o.artists.items},null,8,["artists"])]),footer:d(()=>[i.show_all_artists_button?(l(),c("nav",ab,[t("p",nb,[t("a",{class:"button is-light is-small is-rounded",onClick:e[3]||(e[3]=(...q)=>i.open_search_artists&&i.open_search_artists(...q))},"Show all "+u(o.artists.total.toLocaleString())+" artists",1)])])):y("",!0)]),_:1})):y("",!0),i.show_artists&&!o.artists.total?(l(),$(k,{key:3},{content:d(()=>[lb]),_:1})):y("",!0),i.show_albums&&o.albums.total?(l(),$(h,{key:4},{"heading-left":d(()=>[rb]),content:d(()=>[_(g,{albums:o.albums.items},null,8,["albums"])]),footer:d(()=>[i.show_all_albums_button?(l(),c("nav",db,[t("p",cb,[t("a",{class:"button is-light is-small is-rounded",onClick:e[4]||(e[4]=(...q)=>i.open_search_albums&&i.open_search_albums(...q))},"Show all "+u(o.albums.total.toLocaleString())+" albums",1)])])):y("",!0)]),_:1})):y("",!0),i.show_albums&&!o.albums.total?(l(),$(k,{key:5},{content:d(()=>[_b]),_:1})):y("",!0),i.show_composers&&o.composers.total?(l(),$(h,{key:6},{"heading-left":d(()=>[ub]),content:d(()=>[_(v,{composers:o.composers.items},null,8,["composers"])]),footer:d(()=>[i.show_all_composers_button?(l(),c("nav",mb,[t("p",hb,[t("a",{class:"button is-light is-small is-rounded",onClick:e[5]||(e[5]=(...q)=>i.open_search_composers&&i.open_search_composers(...q))},"Show all "+u(o.composers.total)+" composers",1)])])):y("",!0)]),_:1})):y("",!0),i.show_composers&&!o.composers.total?(l(),$(k,{key:7},{content:d(()=>[pb]),_:1})):y("",!0),i.show_playlists&&o.playlists.total?(l(),$(h,{key:8},{"heading-left":d(()=>[fb]),content:d(()=>[_(A,{playlists:o.playlists.items},null,8,["playlists"])]),footer:d(()=>[i.show_all_playlists_button?(l(),c("nav",yb,[t("p",gb,[t("a",{class:"button is-light is-small is-rounded",onClick:e[6]||(e[6]=(...q)=>i.open_search_playlists&&i.open_search_playlists(...q))},"Show all "+u(o.playlists.total.toLocaleString())+" playlists",1)])])):y("",!0)]),_:1})):y("",!0),i.show_playlists&&!o.playlists.total?(l(),$(k,{key:9},{content:d(()=>[bb]),_:1})):y("",!0),i.show_podcasts&&o.podcasts.total?(l(),$(h,{key:10},{"heading-left":d(()=>[kb]),content:d(()=>[_(g,{albums:o.podcasts.items},null,8,["albums"])]),footer:d(()=>[i.show_all_podcasts_button?(l(),c("nav",wb,[t("p",vb,[t("a",{class:"button is-light is-small is-rounded",onClick:e[7]||(e[7]=(...q)=>i.open_search_podcasts&&i.open_search_podcasts(...q))},"Show all "+u(o.podcasts.total.toLocaleString())+" podcasts",1)])])):y("",!0)]),_:1})):y("",!0),i.show_podcasts&&!o.podcasts.total?(l(),$(k,{key:11},{content:d(()=>[$b]),_:1})):y("",!0),i.show_audiobooks&&o.audiobooks.total?(l(),$(h,{key:12},{"heading-left":d(()=>[xb]),content:d(()=>[_(g,{albums:o.audiobooks.items},null,8,["albums"])]),footer:d(()=>[i.show_all_audiobooks_button?(l(),c("nav",Cb,[t("p",Sb,[t("a",{class:"button is-light is-small is-rounded",onClick:e[8]||(e[8]=(...q)=>i.open_search_audiobooks&&i.open_search_audiobooks(...q))},"Show all "+u(o.audiobooks.total.toLocaleString())+" audiobooks",1)])])):y("",!0)]),_:1})):y("",!0),i.show_audiobooks&&!o.audiobooks.total?(l(),$(k,{key:13},{content:d(()=>[Ab]),_:1})):y("",!0)])}var Pb=w(Mg,[["render",qb]]);const Tb={name:"PageAbout",data(){return{show_update_dropdown:!1,show_update_library:!1}},computed:{config(){return this.$store.state.config},library(){return this.$store.state.library}},methods:{onClickOutside(s){this.show_update_dropdown=!1},showUpdateDialog(){this.$store.commit(et,!0)}}},Lb={class:"section"},Rb={class:"container"},Ib={class:"columns is-centered"},Ub={class:"column is-four-fifths has-text-centered-mobile"},Eb={class:"heading"},Ob=t("b",null,"OwnTone",-1),Db={class:"title is-4"},Nb={class:"section"},zb={class:"container"},Vb={class:"columns is-centered"},Bb={class:"column is-four-fifths"},Fb={class:"content"},Mb={class:"level is-mobile"},jb=t("div",{class:"level-left"},[t("div",{class:"level-item"},[t("h2",{class:"title is-5"},"Library")])],-1),Gb={class:"level-right"},Hb={key:0},Wb=t("a",{class:"button is-small is-loading"},"Update",-1),Kb=[Wb],Yb={key:1},Qb={class:"table"},Jb=t("th",null,"Artists",-1),Xb={class:"has-text-right"},Zb=t("th",null,"Albums",-1),t1={class:"has-text-right"},s1=t("th",null,"Tracks",-1),e1={class:"has-text-right"},i1=t("th",null,"Total playtime",-1),o1={class:"has-text-right"},a1=t("th",null,"Library updated",-1),n1={class:"has-text-right"},l1={class:"has-text-grey"},r1=t("th",null,"Uptime",-1),d1={class:"has-text-right"},c1={class:"has-text-grey"},_1={class:"section"},u1={class:"container"},m1={class:"columns is-centered"},h1={class:"column is-four-fifths"},p1={class:"content has-text-centered-mobile"},f1={class:"is-size-7"},y1=Xs('<p class="is-size-7"> Web interface built with <a href="http://bulma.io">Bulma</a>, <a href="https://materialdesignicons.com/">Material Design Icons</a>, <a href="https://vuejs.org/">Vue.js</a>, <a href="https://github.com/mzabriskie/axios">axios</a> and <a href="https://github.com/owntone/owntone-server/network/dependencies">more</a>. </p>',1);function g1(s,e,a,r,o,i){return l(),c("div",null,[t("section",Lb,[t("div",Rb,[t("div",Ib,[t("div",Ub,[t("p",Eb,[Ob,C(" - version "+u(i.config.version),1)]),t("h1",Db,u(i.config.library_name),1)])])])]),t("section",Nb,[t("div",zb,[t("div",Vb,[t("div",Bb,[t("div",Fb,[t("nav",Mb,[jb,t("div",Gb,[i.library.updating?(l(),c("div",Hb,Kb)):(l(),c("div",Yb,[t("a",{class:"button is-small",onClick:e[0]||(e[0]=n=>i.showUpdateDialog())},"Update")]))])]),t("table",Qb,[t("tbody",null,[t("tr",null,[Jb,t("td",Xb,u(s.$filters.number(i.library.artists)),1)]),t("tr",null,[Zb,t("td",t1,u(s.$filters.number(i.library.albums)),1)]),t("tr",null,[s1,t("td",e1,u(s.$filters.number(i.library.songs)),1)]),t("tr",null,[i1,t("td",o1,u(s.$filters.duration(i.library.db_playtime*1e3,"y [years], d [days], h [hours], m [minutes]")),1)]),t("tr",null,[a1,t("td",n1,[C(u(s.$filters.timeFromNow(i.library.updated_at))+" ",1),t("span",l1,"("+u(s.$filters.time(i.library.updated_at,"lll"))+")",1)])]),t("tr",null,[r1,t("td",d1,[C(u(s.$filters.timeFromNow(i.library.started_at,!0))+" ",1),t("span",c1,"("+u(s.$filters.time(i.library.started_at,"ll"))+")",1)])])])])])])])])]),t("section",_1,[t("div",u1,[t("div",m1,[t("div",h1,[t("div",p1,[t("p",f1," Compiled with support for "+u(i.config.buildoptions.join(", "))+". ",1),y1])])])])])])}var b1=w(Tb,[["render",g1]]);const k1={name:"SpotifyListItemAlbum",props:["album"]},w1={class:"media"},v1={key:0,class:"media-left fd-has-action"},$1={class:"media-content fd-has-action is-clipped"},x1={class:"title is-6"},C1={class:"subtitle is-7 has-text-grey"},S1={class:"subtitle is-7 has-text-grey has-text-weight-normal"},A1={class:"media-right"};function q1(s,e,a,r,o,i){return l(),c("div",w1,[s.$slots.artwork?(l(),c("div",v1,[I(s.$slots,"artwork")])):y("",!0),t("div",$1,[t("h1",x1,u(a.album.name),1),t("h2",C1,[t("b",null,u(a.album.artists[0].name),1)]),t("h2",S1," ("+u(a.album.album_type)+", "+u(s.$filters.time(a.album.release_date,"L"))+") ",1)]),t("div",A1,[I(s.$slots,"actions")])])}var jt=w(k1,[["render",q1]]);const P1={name:"SpotifyListItemPlaylist",props:["playlist"],methods:{open_playlist:function(){this.$router.push({path:"/music/spotify/playlists/"+this.playlist.id})}}},T1={class:"media"},L1={class:"title is-6"},R1={class:"subtitle is-7"},I1={class:"media-right"};function U1(s,e,a,r,o,i){return l(),c("div",T1,[t("div",{class:"media-content fd-has-action is-clipped",onClick:e[0]||(e[0]=(...n)=>i.open_playlist&&i.open_playlist(...n))},[t("h1",L1,u(a.playlist.name),1),t("h2",R1,u(a.playlist.owner.display_name),1)]),t("div",I1,[I(s.$slots,"actions")])])}var ms=w(P1,[["render",U1]]);const E1={name:"SpotifyModalDialogAlbum",props:["show","album"],emits:["close"],data(){return{artwork_visible:!1}},computed:{artwork_url:function(){return this.album.images&&this.album.images.length>0?this.album.images[0].url:""}},methods:{play:function(){this.$emit("close"),f.player_play_uri(this.album.uri,!1)},queue_add:function(){this.$emit("close"),f.queue_add(this.album.uri)},queue_add_next:function(){this.$emit("close"),f.queue_add_next(this.album.uri)},open_album:function(){this.$router.push({path:"/music/spotify/albums/"+this.album.id})},open_artist:function(){this.$router.push({path:"/music/spotify/artists/"+this.album.artists[0].id})},artwork_loaded:function(){this.artwork_visible=!0},artwork_error:function(){this.artwork_visible=!1}}},O1={key:0,class:"modal is-active"},D1={class:"modal-content fd-modal-card"},N1={class:"card"},z1={class:"card-content"},V1={class:"image is-square fd-has-margin-bottom"},B1=["src"],F1={class:"title is-4"},M1={class:"content is-small"},j1=t("span",{class:"heading"},"Album artist",-1),G1=t("span",{class:"heading"},"Release date",-1),H1={class:"title is-6"},W1=t("span",{class:"heading"},"Type",-1),K1={class:"title is-6"},Y1={class:"card-footer"},Q1=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),J1=t("span",{class:"is-size-7"},"Add",-1),X1=[Q1,J1],Z1=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-play"})],-1),tk=t("span",{class:"is-size-7"},"Add Next",-1),sk=[Z1,tk],ek=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),ik=t("span",{class:"is-size-7"},"Play",-1),ok=[ek,ik];function ak(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",O1,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",D1,[t("div",N1,[t("div",z1,[D(t("figure",V1,[t("img",{src:i.artwork_url,class:"fd-has-shadow",onLoad:e[1]||(e[1]=(...n)=>i.artwork_loaded&&i.artwork_loaded(...n)),onError:e[2]||(e[2]=(...n)=>i.artwork_error&&i.artwork_error(...n))},null,40,B1)],512),[[Vt,o.artwork_visible]]),t("p",F1,[t("a",{class:"has-text-link",onClick:e[3]||(e[3]=(...n)=>i.open_album&&i.open_album(...n))},u(a.album.name),1)]),t("div",M1,[t("p",null,[j1,t("a",{class:"title is-6 has-text-link",onClick:e[4]||(e[4]=(...n)=>i.open_artist&&i.open_artist(...n))},u(a.album.artists[0].name),1)]),t("p",null,[G1,t("span",H1,u(s.$filters.time(a.album.release_date,"L")),1)]),t("p",null,[W1,t("span",K1,u(a.album.album_type),1)])])]),t("footer",Y1,[t("a",{class:"card-footer-item has-text-dark",onClick:e[5]||(e[5]=(...n)=>i.queue_add&&i.queue_add(...n))},X1),t("a",{class:"card-footer-item has-text-dark",onClick:e[6]||(e[6]=(...n)=>i.queue_add_next&&i.queue_add_next(...n))},sk),t("a",{class:"card-footer-item has-text-dark",onClick:e[7]||(e[7]=(...n)=>i.play&&i.play(...n))},ok)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[8]||(e[8]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var lt=w(E1,[["render",ak]]);const nk={name:"SpotifyModalDialogPlaylist",props:["show","playlist"],emits:["close"],methods:{play:function(){this.$emit("close"),f.player_play_uri(this.playlist.uri,!1)},queue_add:function(){this.$emit("close"),f.queue_add(this.playlist.uri)},queue_add_next:function(){this.$emit("close"),f.queue_add_next(this.playlist.uri)},open_playlist:function(){this.$router.push({path:"/music/spotify/playlists/"+this.playlist.id})}}},lk={key:0,class:"modal is-active"},rk={class:"modal-content fd-modal-card"},dk={class:"card"},ck={class:"card-content"},_k={class:"title is-4"},uk={class:"content is-small"},mk=t("span",{class:"heading"},"Owner",-1),hk={class:"title is-6"},pk=t("span",{class:"heading"},"Tracks",-1),fk={class:"title is-6"},yk=t("span",{class:"heading"},"Path",-1),gk={class:"title is-6"},bk={class:"card-footer"},kk=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),wk=t("span",{class:"is-size-7"},"Add",-1),vk=[kk,wk],$k=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-play"})],-1),xk=t("span",{class:"is-size-7"},"Add Next",-1),Ck=[$k,xk],Sk=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),Ak=t("span",{class:"is-size-7"},"Play",-1),qk=[Sk,Ak];function Pk(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",lk,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",rk,[t("div",dk,[t("div",ck,[t("p",_k,[t("a",{class:"has-text-link",onClick:e[1]||(e[1]=(...n)=>i.open_playlist&&i.open_playlist(...n))},u(a.playlist.name),1)]),t("div",uk,[t("p",null,[mk,t("span",hk,u(a.playlist.owner.display_name),1)]),t("p",null,[pk,t("span",fk,u(a.playlist.tracks.total),1)]),t("p",null,[yk,t("span",gk,u(a.playlist.uri),1)])])]),t("footer",bk,[t("a",{class:"card-footer-item has-text-dark",onClick:e[2]||(e[2]=(...n)=>i.queue_add&&i.queue_add(...n))},vk),t("a",{class:"card-footer-item has-text-dark",onClick:e[3]||(e[3]=(...n)=>i.queue_add_next&&i.queue_add_next(...n))},Ck),t("a",{class:"card-footer-item has-text-dark",onClick:e[4]||(e[4]=(...n)=>i.play&&i.play(...n))},qk)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[5]||(e[5]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var Gt=w(nk,[["render",Pk]]);const Ut={load:function(s){if(T.state.spotify_new_releases.length>0&&T.state.spotify_featured_playlists.length>0)return Promise.resolve();const e=new B;return e.setAccessToken(T.state.spotify.webapi_token),Promise.all([e.getNewReleases({country:T.state.spotify.webapi_country,limit:50}),e.getFeaturedPlaylists({country:T.state.spotify.webapi_country,limit:50})])},set:function(s,e){e&&(T.commit(ts,e[0].albums.items),T.commit(ss,e[1].playlists.items))}},Tk={name:"SpotifyPageBrowse",components:{ContentWithHeading:U,TabsMusic:j,SpotifyListItemAlbum:jt,SpotifyListItemPlaylist:ms,SpotifyModalDialogAlbum:lt,SpotifyModalDialogPlaylist:Gt,CoverArtwork:M},beforeRouteEnter(s,e,a){Ut.load(s).then(r=>{a(o=>Ut.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;Ut.load(s).then(o=>{Ut.set(r,o),a()})},data(){return{show_album_details_modal:!1,selected_album:{},show_playlist_details_modal:!1,selected_playlist:{}}},computed:{new_releases(){return this.$store.state.spotify_new_releases.slice(0,3)},featured_playlists(){return this.$store.state.spotify_featured_playlists.slice(0,3)},is_visible_artwork(){return this.$store.getters.settings_option("webinterface","show_cover_artwork_in_album_lists").value}},methods:{open_album:function(s){this.$router.push({path:"/music/spotify/albums/"+s.id})},open_album_dialog:function(s){this.selected_album=s,this.show_album_details_modal=!0},open_playlist_dialog:function(s){this.selected_playlist=s,this.show_playlist_details_modal=!0},artwork_url:function(s){return s.images&&s.images.length>0?s.images[0].url:""}}},Lk={class:"fd-page-with-tabs"},Rk=t("p",{class:"title is-4"},"New Releases",-1),Ik={class:"image is-64x64 fd-has-shadow fd-has-action"},Uk=["onClick"],Ek=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),Ok=[Ek],Dk={class:"level"},Nk={class:"level-item"},zk=C(" Show more "),Vk=t("p",{class:"title is-4"},"Featured Playlists",-1),Bk=["onClick"],Fk=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),Mk=[Fk],jk={class:"level"},Gk={class:"level-item"},Hk=C(" Show more ");function Wk(s,e,a,r,o,i){const n=m("tabs-music"),p=m("cover-artwork"),h=m("spotify-list-item-album"),k=m("spotify-modal-dialog-album"),b=m("router-link"),g=m("content-with-heading"),v=m("spotify-list-item-playlist"),A=m("spotify-modal-dialog-playlist");return l(),c("div",Lk,[_(n),_(g,null,{"heading-left":d(()=>[Rk]),content:d(()=>[(l(!0),c(L,null,R(i.new_releases,q=>(l(),$(h,{key:q.id,album:q,onClick:F=>i.open_album(q)},st({actions:d(()=>[t("a",{onClick:F=>i.open_album_dialog(q)},Ok,8,Uk)]),_:2},[i.is_visible_artwork?{name:"artwork",fn:d(()=>[t("p",Ik,[_(p,{artwork_url:i.artwork_url(q),artist:q.artist,album:q.name,maxwidth:64,maxheight:64},null,8,["artwork_url","artist","album"])])])}:void 0]),1032,["album","onClick"]))),128)),_(k,{show:o.show_album_details_modal,album:o.selected_album,onClose:e[0]||(e[0]=q=>o.show_album_details_modal=!1)},null,8,["show","album"])]),footer:d(()=>[t("nav",Dk,[t("p",Nk,[_(b,{to:"/music/spotify/new-releases",class:"button is-light is-small is-rounded"},{default:d(()=>[zk]),_:1})])])]),_:1}),_(g,null,{"heading-left":d(()=>[Vk]),content:d(()=>[(l(!0),c(L,null,R(i.featured_playlists,q=>(l(),$(v,{key:q.id,playlist:q},{actions:d(()=>[t("a",{onClick:F=>i.open_playlist_dialog(q)},Mk,8,Bk)]),_:2},1032,["playlist"]))),128)),_(A,{show:o.show_playlist_details_modal,playlist:o.selected_playlist,onClose:e[1]||(e[1]=q=>o.show_playlist_details_modal=!1)},null,8,["show","playlist"])]),footer:d(()=>[t("nav",jk,[t("p",Gk,[_(b,{to:"/music/spotify/featured-playlists",class:"button is-light is-small is-rounded"},{default:d(()=>[Hk]),_:1})])])]),_:1})])}var Kk=w(Tk,[["render",Wk]]);const Et={load:function(s){if(T.state.spotify_new_releases.length>0)return Promise.resolve();const e=new B;return e.setAccessToken(T.state.spotify.webapi_token),e.getNewReleases({country:T.state.spotify.webapi_country,limit:50})},set:function(s,e){e&&T.commit(ts,e.albums.items)}},Yk={name:"SpotifyPageBrowseNewReleases",components:{ContentWithHeading:U,TabsMusic:j,SpotifyListItemAlbum:jt,SpotifyModalDialogAlbum:lt,CoverArtwork:M},beforeRouteEnter(s,e,a){Et.load(s).then(r=>{a(o=>Et.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;Et.load(s).then(o=>{Et.set(r,o),a()})},data(){return{show_album_details_modal:!1,selected_album:{}}},computed:{new_releases(){return this.$store.state.spotify_new_releases},is_visible_artwork(){return this.$store.getters.settings_option("webinterface","show_cover_artwork_in_album_lists").value}},methods:{open_album:function(s){this.$router.push({path:"/music/spotify/albums/"+s.id})},open_album_dialog:function(s){this.selected_album=s,this.show_album_details_modal=!0},artwork_url:function(s){return s.images&&s.images.length>0?s.images[0].url:""}}},Qk={class:"fd-page-with-tabs"},Jk=t("p",{class:"title is-4"},"New Releases",-1),Xk={class:"image is-64x64 fd-has-shadow fd-has-action"},Zk=["onClick"],tw=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),sw=[tw];function ew(s,e,a,r,o,i){const n=m("tabs-music"),p=m("cover-artwork"),h=m("spotify-list-item-album"),k=m("spotify-modal-dialog-album"),b=m("content-with-heading");return l(),c("div",Qk,[_(n),_(b,null,{"heading-left":d(()=>[Jk]),content:d(()=>[(l(!0),c(L,null,R(i.new_releases,g=>(l(),$(h,{key:g.id,album:g,onClick:v=>i.open_album(g)},st({actions:d(()=>[t("a",{onClick:v=>i.open_album_dialog(g)},sw,8,Zk)]),_:2},[i.is_visible_artwork?{name:"artwork",fn:d(()=>[t("p",Xk,[_(p,{artwork_url:i.artwork_url(g),artist:g.artist,album:g.name,maxwidth:64,maxheight:64},null,8,["artwork_url","artist","album"])])])}:void 0]),1032,["album","onClick"]))),128)),_(k,{show:o.show_album_details_modal,album:o.selected_album,onClose:e[0]||(e[0]=g=>o.show_album_details_modal=!1)},null,8,["show","album"])]),_:1})])}var iw=w(Yk,[["render",ew]]);const Ot={load:function(s){if(T.state.spotify_featured_playlists.length>0)return Promise.resolve();const e=new B;e.setAccessToken(T.state.spotify.webapi_token),e.getFeaturedPlaylists({country:T.state.spotify.webapi_country,limit:50})},set:function(s,e){e&&T.commit(ss,e.playlists.items)}},ow={name:"SpotifyPageBrowseFeaturedPlaylists",components:{ContentWithHeading:U,TabsMusic:j,SpotifyListItemPlaylist:ms,SpotifyModalDialogPlaylist:Gt},beforeRouteEnter(s,e,a){Ot.load(s).then(r=>{a(o=>Ot.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;Ot.load(s).then(o=>{Ot.set(r,o),a()})},data(){return{show_playlist_details_modal:!1,selected_playlist:{}}},computed:{featured_playlists(){return this.$store.state.spotify_featured_playlists}},methods:{open_playlist_dialog:function(s){this.selected_playlist=s,this.show_playlist_details_modal=!0}}},aw={class:"fd-page-with-tabs"},nw=t("p",{class:"title is-4"},"Featured Playlists",-1),lw=["onClick"],rw=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),dw=[rw];function cw(s,e,a,r,o,i){const n=m("tabs-music"),p=m("spotify-list-item-playlist"),h=m("spotify-modal-dialog-playlist"),k=m("content-with-heading");return l(),c("div",aw,[_(n),_(k,null,{"heading-left":d(()=>[nw]),content:d(()=>[(l(!0),c(L,null,R(i.featured_playlists,b=>(l(),$(p,{key:b.id,playlist:b},{actions:d(()=>[t("a",{onClick:g=>i.open_playlist_dialog(b)},dw,8,lw)]),_:2},1032,["playlist"]))),128)),_(h,{show:o.show_playlist_details_modal,playlist:o.selected_playlist,onClose:e[0]||(e[0]=b=>o.show_playlist_details_modal=!1)},null,8,["show","playlist"])]),_:1})])}var _w=w(ow,[["render",cw]]);const uw={name:"SpotifyModalDialogArtist",props:["show","artist"],emits:["close"],methods:{play:function(){this.$emit("close"),f.player_play_uri(this.artist.uri,!1)},queue_add:function(){this.$emit("close"),f.queue_add(this.artist.uri)},queue_add_next:function(){this.$emit("close"),f.queue_add_next(this.artist.uri)},open_artist:function(){this.$router.push({path:"/music/spotify/artists/"+this.artist.id})}}},mw={key:0,class:"modal is-active"},hw={class:"modal-content fd-modal-card"},pw={class:"card"},fw={class:"card-content"},yw={class:"title is-4"},gw={class:"content is-small"},bw=t("span",{class:"heading"},"Popularity / Followers",-1),kw={class:"title is-6"},ww=t("span",{class:"heading"},"Genres",-1),vw={class:"title is-6"},$w={class:"card-footer"},xw=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),Cw=t("span",{class:"is-size-7"},"Add",-1),Sw=[xw,Cw],Aw=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-play"})],-1),qw=t("span",{class:"is-size-7"},"Add Next",-1),Pw=[Aw,qw],Tw=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),Lw=t("span",{class:"is-size-7"},"Play",-1),Rw=[Tw,Lw];function Iw(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",mw,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",hw,[t("div",pw,[t("div",fw,[t("p",yw,[t("a",{class:"has-text-link",onClick:e[1]||(e[1]=(...n)=>i.open_artist&&i.open_artist(...n))},u(a.artist.name),1)]),t("div",gw,[t("p",null,[bw,t("span",kw,u(a.artist.popularity)+" / "+u(a.artist.followers.total),1)]),t("p",null,[ww,t("span",vw,u(a.artist.genres.join(", ")),1)])])]),t("footer",$w,[t("a",{class:"card-footer-item has-text-dark",onClick:e[2]||(e[2]=(...n)=>i.queue_add&&i.queue_add(...n))},Sw),t("a",{class:"card-footer-item has-text-dark",onClick:e[3]||(e[3]=(...n)=>i.queue_add_next&&i.queue_add_next(...n))},Pw),t("a",{class:"card-footer-item has-text-dark",onClick:e[4]||(e[4]=(...n)=>i.play&&i.play(...n))},Rw)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[5]||(e[5]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var Ms=w(uw,[["render",Iw]]);const Kt=50,Dt={load:function(s){const e=new B;return e.setAccessToken(T.state.spotify.webapi_token),Promise.all([e.getArtist(s.params.artist_id),e.getArtistAlbums(s.params.artist_id,{limit:Kt,offset:0,include_groups:"album,single",market:T.state.spotify.webapi_country})])},set:function(s,e){s.artist=e[0],s.albums=[],s.total=0,s.offset=0,s.append_albums(e[1])}},Uw={name:"SpotifyPageArtist",components:{ContentWithHeading:U,SpotifyListItemAlbum:jt,SpotifyModalDialogAlbum:lt,SpotifyModalDialogArtist:Ms,VueEternalLoading:Xt.exports.VueEternalLoading,CoverArtwork:M},beforeRouteEnter(s,e,a){Dt.load(s).then(r=>{a(o=>Dt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;Dt.load(s).then(o=>{Dt.set(r,o),a()})},data(){return{artist:{},albums:[],total:0,offset:0,show_details_modal:!1,selected_album:{},show_artist_details_modal:!1}},computed:{is_visible_artwork(){return this.$store.getters.settings_option("webinterface","show_cover_artwork_in_album_lists").value}},methods:{load_next:function({loaded:s}){const e=new B;e.setAccessToken(this.$store.state.spotify.webapi_token),e.getArtistAlbums(this.artist.id,{limit:Kt,offset:this.offset,include_groups:"album,single"}).then(a=>{this.append_albums(a),s(a.items.length,Kt)})},append_albums:function(s){this.albums=this.albums.concat(s.items),this.total=s.total,this.offset+=s.limit},play:function(){this.show_details_modal=!1,f.player_play_uri(this.artist.uri,!0)},open_album:function(s){this.$router.push({path:"/music/spotify/albums/"+s.id})},open_dialog:function(s){this.selected_album=s,this.show_details_modal=!0},artwork_url:function(s){return s.images&&s.images.length>0?s.images[0].url:""}}},Ew={class:"title is-4"},Ow={class:"buttons is-centered"},Dw=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),Nw=[Dw],zw=t("span",{class:"icon"},[t("i",{class:"mdi mdi-shuffle"})],-1),Vw=t("span",null,"Shuffle",-1),Bw=[zw,Vw],Fw={class:"heading has-text-centered-mobile"},Mw={class:"image is-64x64 fd-has-shadow fd-has-action"},jw=["onClick"],Gw=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),Hw=[Gw],Ww=C(" . ");function Kw(s,e,a,r,o,i){const n=m("cover-artwork"),p=m("spotify-list-item-album"),h=m("VueEternalLoading"),k=m("spotify-modal-dialog-album"),b=m("spotify-modal-dialog-artist"),g=m("content-with-heading");return l(),$(g,null,{"heading-left":d(()=>[t("p",Ew,u(o.artist.name),1)]),"heading-right":d(()=>[t("div",Ow,[t("a",{class:"button is-small is-light is-rounded",onClick:e[0]||(e[0]=v=>o.show_artist_details_modal=!0)},Nw),t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...v)=>i.play&&i.play(...v))},Bw)])]),content:d(()=>[t("p",Fw,u(o.total)+" albums",1),(l(!0),c(L,null,R(o.albums,v=>(l(),$(p,{key:v.id,album:v,onClick:A=>i.open_album(v)},st({actions:d(()=>[t("a",{onClick:E(A=>i.open_dialog(v),["prevent","stop"])},Hw,8,jw)]),_:2},[i.is_visible_artwork?{name:"artwork",fn:d(()=>[t("p",Mw,[_(n,{artwork_url:i.artwork_url(v),artist:v.artist,album:v.name,maxwidth:64,maxheight:64},null,8,["artwork_url","artist","album"])])])}:void 0]),1032,["album","onClick"]))),128)),o.offset<o.total?(l(),$(h,{key:0,load:i.load_next},{"no-more":d(()=>[Ww]),_:1},8,["load"])):y("",!0),_(k,{show:o.show_details_modal,album:o.selected_album,onClose:e[2]||(e[2]=v=>o.show_details_modal=!1)},null,8,["show","album"]),_(b,{show:o.show_artist_details_modal,artist:o.artist,onClose:e[3]||(e[3]=v=>o.show_artist_details_modal=!1)},null,8,["show","artist"])]),_:1})}var Yw=w(Uw,[["render",Kw]]);const Qw={name:"SpotifyListItemTrack",props:["track","position","album","context_uri"],methods:{play:function(){f.player_play_uri(this.context_uri,!1,this.position)}}},Jw={class:"media"},Xw={key:0,class:"subtitle is-7"},Zw=C(" (Track is not playable"),tv={key:0},sv=C(") "),ev={class:"media-right"};function iv(s,e,a,r,o,i){return l(),c("div",Jw,[t("div",{class:"media-content fd-has-action is-clipped",onClick:e[0]||(e[0]=(...n)=>i.play&&i.play(...n))},[t("h1",{class:S(["title is-6",{"has-text-grey-light":a.track.is_playable===!1}])},u(a.track.name),3),t("h2",{class:S(["subtitle is-7",{"has-text-grey":a.track.is_playable,"has-text-grey-light":a.track.is_playable===!1}])},[t("b",null,u(a.track.artists[0].name),1)],2),a.track.is_playable===!1?(l(),c("h2",Xw,[Zw,a.track.restrictions&&a.track.restrictions.reason?(l(),c("span",tv,", restriction reason: "+u(a.track.restrictions.reason),1)):y("",!0),sv])):y("",!0)]),t("div",ev,[I(s.$slots,"actions")])])}var hs=w(Qw,[["render",iv]]);const ov={name:"SpotifyModalDialogTrack",props:["show","track","album"],emits:["close"],methods:{play:function(){this.$emit("close"),f.player_play_uri(this.track.uri,!1)},queue_add:function(){this.$emit("close"),f.queue_add(this.track.uri)},queue_add_next:function(){this.$emit("close"),f.queue_add_next(this.track.uri)},open_album:function(){this.$router.push({path:"/music/spotify/albums/"+this.album.id})},open_artist:function(){this.$router.push({path:"/music/spotify/artists/"+this.album.artists[0].id})}}},av={key:0,class:"modal is-active"},nv={class:"modal-content fd-modal-card"},lv={class:"card"},rv={class:"card-content"},dv={class:"title is-4"},cv={class:"subtitle"},_v={class:"content is-small"},uv=t("span",{class:"heading"},"Album",-1),mv=t("span",{class:"heading"},"Album artist",-1),hv=t("span",{class:"heading"},"Release date",-1),pv={class:"title is-6"},fv=t("span",{class:"heading"},"Track / Disc",-1),yv={class:"title is-6"},gv=t("span",{class:"heading"},"Length",-1),bv={class:"title is-6"},kv=t("span",{class:"heading"},"Path",-1),wv={class:"title is-6"},vv={class:"card-footer"},$v=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),xv=t("span",{class:"is-size-7"},"Add",-1),Cv=[$v,xv],Sv=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-play"})],-1),Av=t("span",{class:"is-size-7"},"Add Next",-1),qv=[Sv,Av],Pv=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),Tv=t("span",{class:"is-size-7"},"Play",-1),Lv=[Pv,Tv];function Rv(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",av,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",nv,[t("div",lv,[t("div",rv,[t("p",dv,u(a.track.name),1),t("p",cv,u(a.track.artists[0].name),1),t("div",_v,[t("p",null,[uv,t("a",{class:"title is-6 has-text-link",onClick:e[1]||(e[1]=(...n)=>i.open_album&&i.open_album(...n))},u(a.album.name),1)]),t("p",null,[mv,t("a",{class:"title is-6 has-text-link",onClick:e[2]||(e[2]=(...n)=>i.open_artist&&i.open_artist(...n))},u(a.album.artists[0].name),1)]),t("p",null,[hv,t("span",pv,u(s.$filters.time(a.album.release_date,"L")),1)]),t("p",null,[fv,t("span",yv,u(a.track.track_number)+" / "+u(a.track.disc_number),1)]),t("p",null,[gv,t("span",bv,u(s.$filters.duration(a.track.duration_ms)),1)]),t("p",null,[kv,t("span",wv,u(a.track.uri),1)])])]),t("footer",vv,[t("a",{class:"card-footer-item has-text-dark",onClick:e[3]||(e[3]=(...n)=>i.queue_add&&i.queue_add(...n))},Cv),t("a",{class:"card-footer-item has-text-dark",onClick:e[4]||(e[4]=(...n)=>i.queue_add_next&&i.queue_add_next(...n))},qv),t("a",{class:"card-footer-item has-text-dark",onClick:e[5]||(e[5]=(...n)=>i.play&&i.play(...n))},Lv)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[6]||(e[6]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var ps=w(ov,[["render",Rv]]);const Nt={load:function(s){const e=new B;return e.setAccessToken(T.state.spotify.webapi_token),e.getAlbum(s.params.album_id,{market:T.state.spotify.webapi_country})},set:function(s,e){s.album=e}},Iv={name:"PageAlbum",components:{ContentWithHero:ds,SpotifyListItemTrack:hs,SpotifyModalDialogTrack:ps,SpotifyModalDialogAlbum:lt,CoverArtwork:M},beforeRouteEnter(s,e,a){Nt.load(s).then(r=>{a(o=>Nt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;Nt.load(s).then(o=>{Nt.set(r,o),a()})},data(){return{album:{artists:[{}],tracks:{}},show_track_details_modal:!1,selected_track:{},show_album_details_modal:!1}},computed:{artwork_url:function(){return this.album.images&&this.album.images.length>0?this.album.images[0].url:""}},methods:{open_artist:function(){this.$router.push({path:"/music/spotify/artists/"+this.album.artists[0].id})},play:function(){this.show_details_modal=!1,f.player_play_uri(this.album.uri,!0)},open_track_dialog:function(s){this.selected_track=s,this.show_track_details_modal=!0}}},Uv={class:"title is-5"},Ev={class:"subtitle is-6 has-text-link has-text-weight-normal"},Ov={class:"buttons fd-is-centered-mobile fd-has-margin-top"},Dv=t("span",{class:"icon"},[t("i",{class:"mdi mdi-shuffle"})],-1),Nv=t("span",null,"Shuffle",-1),zv=[Dv,Nv],Vv=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),Bv=[Vv],Fv={class:"image is-square fd-has-shadow fd-has-action"},Mv={class:"heading is-7 has-text-centered-mobile fd-has-margin-top"},jv=["onClick"],Gv=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),Hv=[Gv];function Wv(s,e,a,r,o,i){const n=m("cover-artwork"),p=m("spotify-list-item-track"),h=m("spotify-modal-dialog-track"),k=m("spotify-modal-dialog-album"),b=m("content-with-hero");return l(),$(b,null,{"heading-left":d(()=>[t("h1",Uv,u(o.album.name),1),t("h2",Ev,[t("a",{class:"has-text-link",onClick:e[0]||(e[0]=(...g)=>i.open_artist&&i.open_artist(...g))},u(o.album.artists[0].name),1)]),t("div",Ov,[t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...g)=>i.play&&i.play(...g))},zv),t("a",{class:"button is-small is-light is-rounded",onClick:e[2]||(e[2]=g=>o.show_album_details_modal=!0)},Bv)])]),"heading-right":d(()=>[t("p",Fv,[_(n,{artwork_url:i.artwork_url,artist:o.album.artist,album:o.album.name,onClick:e[3]||(e[3]=g=>o.show_album_details_modal=!0)},null,8,["artwork_url","artist","album"])])]),content:d(()=>[t("p",Mv,u(o.album.tracks.total)+" tracks ",1),(l(!0),c(L,null,R(o.album.tracks.items,(g,v)=>(l(),$(p,{key:g.id,track:g,position:v,album:o.album,context_uri:o.album.uri},{actions:d(()=>[t("a",{onClick:A=>i.open_track_dialog(g)},Hv,8,jv)]),_:2},1032,["track","position","album","context_uri"]))),128)),_(h,{show:o.show_track_details_modal,track:o.selected_track,album:o.album,onClose:e[4]||(e[4]=g=>o.show_track_details_modal=!1)},null,8,["show","track","album"]),_(k,{show:o.show_album_details_modal,album:o.album,onClose:e[5]||(e[5]=g=>o.show_album_details_modal=!1)},null,8,["show","album"])]),_:1})}var Kv=w(Iv,[["render",Wv]]);const Yt=50,zt={load:function(s){const e=new B;return e.setAccessToken(T.state.spotify.webapi_token),Promise.all([e.getPlaylist(s.params.playlist_id),e.getPlaylistTracks(s.params.playlist_id,{limit:Yt,offset:0})])},set:function(s,e){s.playlist=e[0],s.tracks=[],s.total=0,s.offset=0,s.append_tracks(e[1])}},Yv={name:"SpotifyPagePlaylist",components:{ContentWithHeading:U,SpotifyListItemTrack:hs,SpotifyModalDialogTrack:ps,SpotifyModalDialogPlaylist:Gt,VueEternalLoading:Xt.exports.VueEternalLoading},beforeRouteEnter(s,e,a){zt.load(s).then(r=>{a(o=>zt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;zt.load(s).then(o=>{zt.set(r,o),a()})},data(){return{playlist:{tracks:{}},tracks:[],total:0,offset:0,show_track_details_modal:!1,selected_track:{},show_playlist_details_modal:!1}},methods:{load_next:function({loaded:s}){const e=new B;e.setAccessToken(this.$store.state.spotify.webapi_token),e.getPlaylistTracks(this.playlist.id,{limit:Yt,offset:this.offset}).then(a=>{this.append_tracks(a),s(a.items.length,Yt)})},append_tracks:function(s){this.tracks=this.tracks.concat(s.items),this.total=s.total,this.offset+=s.limit},play:function(){this.show_details_modal=!1,f.player_play_uri(this.playlist.uri,!0)},open_track_dialog:function(s){this.selected_track=s,this.show_track_details_modal=!0}}},Qv={class:"title is-4"},Jv={class:"buttons is-centered"},Xv=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),Zv=[Xv],t$=t("span",{class:"icon"},[t("i",{class:"mdi mdi-shuffle"})],-1),s$=t("span",null,"Shuffle",-1),e$=[t$,s$],i$={class:"heading has-text-centered-mobile"},o$=["onClick"],a$=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),n$=[a$],l$=C(" . ");function r$(s,e,a,r,o,i){const n=m("spotify-list-item-track"),p=m("VueEternalLoading"),h=m("spotify-modal-dialog-track"),k=m("spotify-modal-dialog-playlist"),b=m("content-with-heading");return l(),$(b,null,{"heading-left":d(()=>[t("div",Qv,u(o.playlist.name),1)]),"heading-right":d(()=>[t("div",Jv,[t("a",{class:"button is-small is-light is-rounded",onClick:e[0]||(e[0]=g=>o.show_playlist_details_modal=!0)},Zv),t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...g)=>i.play&&i.play(...g))},e$)])]),content:d(()=>[t("p",i$,u(o.playlist.tracks.total)+" tracks ",1),(l(!0),c(L,null,R(o.tracks,(g,v)=>(l(),$(n,{key:g.track.id,track:g.track,album:g.track.album,position:v,context_uri:o.playlist.uri},{actions:d(()=>[t("a",{onClick:A=>i.open_track_dialog(g.track)},n$,8,o$)]),_:2},1032,["track","album","position","context_uri"]))),128)),o.offset<o.total?(l(),$(p,{key:0,load:i.load_next},{"no-more":d(()=>[l$]),_:1},8,["load"])):y("",!0),_(h,{show:o.show_track_details_modal,track:o.selected_track,album:o.selected_track.album,onClose:e[2]||(e[2]=g=>o.show_track_details_modal=!1)},null,8,["show","track","album"]),_(k,{show:o.show_playlist_details_modal,playlist:o.playlist,onClose:e[3]||(e[3]=g=>o.show_playlist_details_modal=!1)},null,8,["show","playlist"])]),_:1})}var d$=w(Yv,[["render",r$]]);const c$={name:"SpotifyListItemArtist",props:["artist"],methods:{open_artist:function(){this.$router.push({path:"/music/spotify/artists/"+this.artist.id})}}},_$={class:"media"},u$={class:"title is-6"},m$={class:"media-right"};function h$(s,e,a,r,o,i){return l(),c("div",_$,[t("div",{class:"media-content fd-has-action is-clipped",onClick:e[0]||(e[0]=(...n)=>i.open_artist&&i.open_artist(...n))},[t("h1",u$,u(a.artist.name),1)]),t("div",m$,[I(s.$slots,"actions")])])}var p$=w(c$,[["render",h$]]);const Z=50,f$={name:"SpotifyPageSearch",components:{ContentWithHeading:U,ContentText:Bs,TabsSearch:Fs,SpotifyListItemTrack:hs,SpotifyListItemArtist:p$,SpotifyListItemAlbum:jt,SpotifyListItemPlaylist:ms,SpotifyModalDialogTrack:ps,SpotifyModalDialogArtist:Ms,SpotifyModalDialogAlbum:lt,SpotifyModalDialogPlaylist:Gt,VueEternalLoading:Xt.exports.VueEternalLoading,CoverArtwork:M},data(){return{search_query:"",tracks:{items:[],total:0},artists:{items:[],total:0},albums:{items:[],total:0},playlists:{items:[],total:0},query:{},search_param:{},show_track_details_modal:!1,selected_track:{},show_album_details_modal:!1,selected_album:{},show_artist_details_modal:!1,selected_artist:{},show_playlist_details_modal:!1,selected_playlist:{},validSearchTypes:["track","artist","album","playlist"]}},computed:{recent_searches(){return this.$store.state.recent_searches.filter(s=>!s.startsWith("query:"))},show_tracks(){return this.$route.query.type&&this.$route.query.type.includes("track")},show_all_tracks_button(){return this.tracks.total>this.tracks.items.length},show_artists(){return this.$route.query.type&&this.$route.query.type.includes("artist")},show_all_artists_button(){return this.artists.total>this.artists.items.length},show_albums(){return this.$route.query.type&&this.$route.query.type.includes("album")},show_all_albums_button(){return this.albums.total>this.albums.items.length},show_playlists(){return this.$route.query.type&&this.$route.query.type.includes("playlist")},show_all_playlists_button(){return this.playlists.total>this.playlists.items.length},is_visible_artwork(){return this.$store.getters.settings_option("webinterface","show_cover_artwork_in_album_lists").value}},watch:{$route(s,e){this.query=s.query,this.search()}},mounted:function(){this.query=this.$route.query,this.search()},methods:{reset:function(){this.tracks={items:[],total:0},this.artists={items:[],total:0},this.albums={items:[],total:0},this.playlists={items:[],total:0}},search:function(){if(this.reset(),!this.query.query||this.query.query===""||this.query.query.startsWith("query:")){this.search_query="",this.$refs.search_field.focus();return}this.search_query=this.query.query,this.search_param.limit=this.query.limit?this.query.limit:Z,this.search_param.offset=this.query.offset?this.query.offset:0,this.$store.commit(es,this.query.query),this.search_all()},spotify_search:function(){return f.spotify().then(({data:s})=>{this.search_param.market=s.webapi_country;const e=new B;e.setAccessToken(s.webapi_token);const a=this.query.type.split(",").filter(r=>this.validSearchTypes.includes(r));return e.search(this.query.query,a,this.search_param)})},search_all:function(){this.spotify_search().then(s=>{this.tracks=s.tracks?s.tracks:{items:[],total:0},this.artists=s.artists?s.artists:{items:[],total:0},this.albums=s.albums?s.albums:{items:[],total:0},this.playlists=s.playlists?s.playlists:{items:[],total:0}})},search_tracks_next:function({loaded:s}){this.spotify_search().then(e=>{this.tracks.items=this.tracks.items.concat(e.tracks.items),this.tracks.total=e.tracks.total,this.search_param.offset+=e.tracks.limit,s(e.tracks.items.length,Z)})},search_artists_next:function({loaded:s}){this.spotify_search().then(e=>{this.artists.items=this.artists.items.concat(e.artists.items),this.artists.total=e.artists.total,this.search_param.offset+=e.artists.limit,s(e.artists.items.length,Z)})},search_albums_next:function({loaded:s}){this.spotify_search().then(e=>{this.albums.items=this.albums.items.concat(e.albums.items),this.albums.total=e.albums.total,this.search_param.offset+=e.albums.limit,s(e.albums.items.length,Z)})},search_playlists_next:function({loaded:s}){this.spotify_search().then(e=>{this.playlists.items=this.playlists.items.concat(e.playlists.items),this.playlists.total=e.playlists.total,this.search_param.offset+=e.playlists.limit,s(e.playlists.items.length,Z)})},new_search:function(){!this.search_query||(this.$router.push({path:"/search/spotify",query:{type:"track,artist,album,playlist,audiobook,podcast",query:this.search_query,limit:3,offset:0}}),this.$refs.search_field.blur())},open_search_tracks:function(){this.$router.push({path:"/search/spotify",query:{type:"track",query:this.$route.query.query}})},open_search_artists:function(){this.$router.push({path:"/search/spotify",query:{type:"artist",query:this.$route.query.query}})},open_search_albums:function(){this.$router.push({path:"/search/spotify",query:{type:"album",query:this.$route.query.query}})},open_search_playlists:function(){this.$router.push({path:"/search/spotify",query:{type:"playlist",query:this.$route.query.query}})},open_recent_search:function(s){this.search_query=s,this.new_search()},open_track_dialog:function(s){this.selected_track=s,this.show_track_details_modal=!0},open_album_dialog:function(s){this.selected_album=s,this.show_album_details_modal=!0},open_artist_dialog:function(s){this.selected_artist=s,this.show_artist_details_modal=!0},open_playlist_dialog:function(s){this.selected_playlist=s,this.show_playlist_details_modal=!0},open_album:function(s){this.$router.push({path:"/music/spotify/albums/"+s.id})},artwork_url:function(s){return s.images&&s.images.length>0?s.images[0].url:""}}},y$={class:"section fd-remove-padding-bottom"},g$={class:"container"},b$={class:"columns is-centered"},k$={class:"column is-four-fifths"},w$={class:"field"},v$={class:"control is-expanded has-icons-left"},$$=t("span",{class:"icon is-left"},[t("i",{class:"mdi mdi-magnify"})],-1),x$={class:"tags",style:{"margin-top":"16px"}},C$=["onClick"],S$=t("p",{class:"title is-4"},"Tracks",-1),A$=["onClick"],q$=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),P$=[q$],T$=C(" . "),L$={key:0,class:"level"},R$={class:"level-item"},I$=t("p",null,[t("i",null,"No tracks found")],-1),U$=t("p",{class:"title is-4"},"Artists",-1),E$=["onClick"],O$=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),D$=[O$],N$=C(" . "),z$={key:0,class:"level"},V$={class:"level-item"},B$=t("p",null,[t("i",null,"No artists found")],-1),F$=t("p",{class:"title is-4"},"Albums",-1),M$={class:"image is-64x64 fd-has-shadow fd-has-action"},j$=["onClick"],G$=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),H$=[G$],W$=C(" . "),K$={key:0,class:"level"},Y$={class:"level-item"},Q$=t("p",null,[t("i",null,"No albums found")],-1),J$=t("p",{class:"title is-4"},"Playlists",-1),X$=["onClick"],Z$=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),t0=[Z$],s0=C(" . "),e0={key:0,class:"level"},i0={class:"level-item"},o0=t("p",null,[t("i",null,"No playlists found")],-1);function a0(s,e,a,r,o,i){const n=m("tabs-search"),p=m("spotify-list-item-track"),h=m("VueEternalLoading"),k=m("spotify-modal-dialog-track"),b=m("content-with-heading"),g=m("content-text"),v=m("spotify-list-item-artist"),A=m("spotify-modal-dialog-artist"),q=m("cover-artwork"),F=m("spotify-list-item-album"),rt=m("spotify-modal-dialog-album"),dt=m("spotify-list-item-playlist"),O=m("spotify-modal-dialog-playlist");return l(),c("div",null,[t("section",y$,[t("div",g$,[t("div",b$,[t("div",k$,[t("form",{onSubmit:e[1]||(e[1]=E((...P)=>i.new_search&&i.new_search(...P),["prevent"]))},[t("div",w$,[t("p",v$,[D(t("input",{ref:"search_field","onUpdate:modelValue":e[0]||(e[0]=P=>o.search_query=P),class:"input is-rounded is-shadowless",type:"text",placeholder:"Search",autocomplete:"off"},null,512),[[V,o.search_query]]),$$])])],32),t("div",x$,[(l(!0),c(L,null,R(i.recent_searches,P=>(l(),c("a",{key:P,class:"tag",onClick:X=>i.open_recent_search(P)},u(P),9,C$))),128))])])])])]),_(n,{query:o.search_query},null,8,["query"]),i.show_tracks&&o.tracks.total?(l(),$(b,{key:0},{"heading-left":d(()=>[S$]),content:d(()=>[(l(!0),c(L,null,R(o.tracks.items,P=>(l(),$(p,{key:P.id,track:P,album:P.album,position:0,context_uri:P.uri},{actions:d(()=>[t("a",{onClick:X=>i.open_track_dialog(P)},P$,8,A$)]),_:2},1032,["track","album","context_uri"]))),128)),o.query.type==="track"?(l(),$(h,{key:0,load:i.search_tracks_next},{"no-more":d(()=>[T$]),_:1},8,["load"])):y("",!0),_(k,{show:o.show_track_details_modal,track:o.selected_track,album:o.selected_track.album,onClose:e[2]||(e[2]=P=>o.show_track_details_modal=!1)},null,8,["show","track","album"])]),footer:d(()=>[i.show_all_tracks_button?(l(),c("nav",L$,[t("p",R$,[t("a",{class:"button is-light is-small is-rounded",onClick:e[3]||(e[3]=(...P)=>i.open_search_tracks&&i.open_search_tracks(...P))},"Show all "+u(o.tracks.total.toLocaleString())+" tracks",1)])])):y("",!0)]),_:1})):y("",!0),i.show_tracks&&!o.tracks.total?(l(),$(g,{key:1,class:"mt-6"},{content:d(()=>[I$]),_:1})):y("",!0),i.show_artists&&o.artists.total?(l(),$(b,{key:2},{"heading-left":d(()=>[U$]),content:d(()=>[(l(!0),c(L,null,R(o.artists.items,P=>(l(),$(v,{key:P.id,artist:P},{actions:d(()=>[t("a",{onClick:X=>i.open_artist_dialog(P)},D$,8,E$)]),_:2},1032,["artist"]))),128)),o.query.type==="artist"?(l(),$(h,{key:0,load:i.search_artists_next},{"no-more":d(()=>[N$]),_:1},8,["load"])):y("",!0),_(A,{show:o.show_artist_details_modal,artist:o.selected_artist,onClose:e[4]||(e[4]=P=>o.show_artist_details_modal=!1)},null,8,["show","artist"])]),footer:d(()=>[i.show_all_artists_button?(l(),c("nav",z$,[t("p",V$,[t("a",{class:"button is-light is-small is-rounded",onClick:e[5]||(e[5]=(...P)=>i.open_search_artists&&i.open_search_artists(...P))},"Show all "+u(o.artists.total.toLocaleString())+" artists",1)])])):y("",!0)]),_:1})):y("",!0),i.show_artists&&!o.artists.total?(l(),$(g,{key:3},{content:d(()=>[B$]),_:1})):y("",!0),i.show_albums&&o.albums.total?(l(),$(b,{key:4},{"heading-left":d(()=>[F$]),content:d(()=>[(l(!0),c(L,null,R(o.albums.items,P=>(l(),$(F,{key:P.id,album:P,onClick:X=>i.open_album(P)},st({actions:d(()=>[t("a",{onClick:X=>i.open_album_dialog(P)},H$,8,j$)]),_:2},[i.is_visible_artwork?{name:"artwork",fn:d(()=>[t("p",M$,[_(q,{artwork_url:i.artwork_url(P),artist:P.artist,album:P.name,maxwidth:64,maxheight:64},null,8,["artwork_url","artist","album"])])])}:void 0]),1032,["album","onClick"]))),128)),o.query.type==="album"?(l(),$(h,{key:0,load:i.search_albums_next},{"no-more":d(()=>[W$]),_:1},8,["load"])):y("",!0),_(rt,{show:o.show_album_details_modal,album:o.selected_album,onClose:e[6]||(e[6]=P=>o.show_album_details_modal=!1)},null,8,["show","album"])]),footer:d(()=>[i.show_all_albums_button?(l(),c("nav",K$,[t("p",Y$,[t("a",{class:"button is-light is-small is-rounded",onClick:e[7]||(e[7]=(...P)=>i.open_search_albums&&i.open_search_albums(...P))},"Show all "+u(o.albums.total.toLocaleString())+" albums",1)])])):y("",!0)]),_:1})):y("",!0),i.show_albums&&!o.albums.total?(l(),$(g,{key:5},{content:d(()=>[Q$]),_:1})):y("",!0),i.show_playlists&&o.playlists.total?(l(),$(b,{key:6},{"heading-left":d(()=>[J$]),content:d(()=>[(l(!0),c(L,null,R(o.playlists.items,P=>(l(),$(dt,{key:P.id,playlist:P},{actions:d(()=>[t("a",{onClick:X=>i.open_playlist_dialog(P)},t0,8,X$)]),_:2},1032,["playlist"]))),128)),o.query.type==="playlist"?(l(),$(h,{key:0,load:i.search_playlists_next},{"no-more":d(()=>[s0]),_:1},8,["load"])):y("",!0),_(O,{show:o.show_playlist_details_modal,playlist:o.selected_playlist,onClose:e[8]||(e[8]=P=>o.show_playlist_details_modal=!1)},null,8,["show","playlist"])]),footer:d(()=>[i.show_all_playlists_button?(l(),c("nav",e0,[t("p",i0,[t("a",{class:"button is-light is-small is-rounded",onClick:e[9]||(e[9]=(...P)=>i.open_search_playlists&&i.open_search_playlists(...P))},"Show all "+u(o.playlists.total.toLocaleString())+" playlists",1)])])):y("",!0)]),_:1})):y("",!0),i.show_playlists&&!o.playlists.total?(l(),$(g,{key:7},{content:d(()=>[o0]),_:1})):y("",!0)])}var n0=w(f$,[["render",a0]]);const l0={name:"TabsSettings",computed:{}},r0={class:"section fd-tabs-section"},d0={class:"container"},c0={class:"columns is-centered"},_0={class:"column is-four-fifths"},u0={class:"tabs is-centered is-small"},m0=["onClick","onKeypress"],h0=t("span",{class:""},"Webinterface",-1),p0=[h0],f0=["onClick","onKeypress"],y0=t("span",{class:""},"Remotes & Outputs",-1),g0=[y0],b0=["onClick","onKeypress"],k0=t("span",{class:""},"Artwork",-1),w0=[k0],v0=["onClick","onKeypress"],$0=t("span",{class:""},"Online Services",-1),x0=[$0];function C0(s,e,a,r,o,i){const n=m("router-link");return l(),c("section",r0,[t("div",d0,[t("div",c0,[t("div",_0,[t("div",u0,[t("ul",null,[_(n,{to:"/settings/webinterface",custom:""},{default:d(({navigate:p,isActive:h})=>[t("li",{class:S({"is-active":h})},[t("a",{onClick:p,onKeypress:z(p,["enter"])},p0,40,m0)],2)]),_:1}),_(n,{to:"/settings/remotes-outputs",custom:""},{default:d(({navigate:p,isActive:h})=>[t("li",{class:S({"is-active":h})},[t("a",{onClick:p,onKeypress:z(p,["enter"])},g0,40,f0)],2)]),_:1}),_(n,{to:"/settings/artwork",custom:""},{default:d(({navigate:p,isActive:h})=>[t("li",{class:S({"is-active":h})},[t("a",{onClick:p,onKeypress:z(p,["enter"])},w0,40,b0)],2)]),_:1}),_(n,{to:"/settings/online-services",custom:""},{default:d(({navigate:p,isActive:h})=>[t("li",{class:S({"is-active":h})},[t("a",{onClick:p,onKeypress:z(p,["enter"])},x0,40,v0)],2)]),_:1})])])])])])])}var Ht=w(l0,[["render",C0]]);const S0={name:"SettingsCheckbox",props:["category_name","option_name"],data(){return{timerDelay:2e3,timerId:-1,statusUpdate:""}},computed:{category(){return this.$store.state.settings.categories.find(s=>s.name===this.category_name)},option(){return this.category?this.category.options.find(s=>s.name===this.option_name):{}},value(){return this.option.value},info(){return this.statusUpdate==="success"?"(setting saved)":this.statusUpdate==="error"?"(error saving setting)":""}},methods:{set_update_timer(){this.timerId>0&&(window.clearTimeout(this.timerId),this.timerId=-1),this.statusUpdate="",this.$refs.settings_checkbox.checked!==this.value&&(this.timerId=window.setTimeout(this.update_setting,this.timerDelay))},update_setting(){this.timerId=-1;const s=this.$refs.settings_checkbox.checked;if(console.log(this.$refs.settings_checkbox),s===this.value){this.statusUpdate="";return}const e={category:this.category.name,name:this.option_name,value:s};f.settings_update(this.category.name,e).then(()=>{this.$store.commit(Bt,e),this.statusUpdate="success"}).catch(()=>{this.statusUpdate="error",this.$refs.settings_checkbox.checked=this.value}).finally(()=>{this.timerId=window.setTimeout(this.clear_status,this.timerDelay)})},clear_status:function(){this.statusUpdate=""}}},A0={class:"field"},q0={class:"checkbox"},P0=["checked"],T0={key:0,class:"help"};function L0(s,e,a,r,o,i){return l(),c("div",A0,[t("label",q0,[t("input",{ref:"settings_checkbox",type:"checkbox",checked:i.value,onChange:e[0]||(e[0]=(...n)=>i.set_update_timer&&i.set_update_timer(...n))},null,40,P0),I(s.$slots,"label"),t("i",{class:S(["is-size-7",{"has-text-info":o.statusUpdate==="success","has-text-danger":o.statusUpdate==="error"}])},u(i.info),3)]),s.$slots.info?(l(),c("p",T0,[I(s.$slots,"info")])):y("",!0)])}var js=w(S0,[["render",L0]]);const R0={name:"SettingsTextfield",props:["category_name","option_name","placeholder","disabled"],data(){return{timerDelay:2e3,timerId:-1,statusUpdate:""}},computed:{category(){return this.$store.state.settings.categories.find(s=>s.name===this.category_name)},option(){return this.category?this.category.options.find(s=>s.name===this.option_name):{}},value(){return this.option.value},info(){return this.statusUpdate==="success"?"(setting saved)":this.statusUpdate==="error"?"(error saving setting)":""}},methods:{set_update_timer(){this.timerId>0&&(window.clearTimeout(this.timerId),this.timerId=-1),this.statusUpdate="",this.$refs.settings_text.value!==this.value&&(this.timerId=window.setTimeout(this.update_setting,this.timerDelay))},update_setting(){this.timerId=-1;const s=this.$refs.settings_text.value;if(s===this.value){this.statusUpdate="";return}const e={category:this.category.name,name:this.option_name,value:s};f.settings_update(this.category.name,e).then(()=>{this.$store.commit(Bt,e),this.statusUpdate="success"}).catch(()=>{this.statusUpdate="error",this.$refs.settings_text.value=this.value}).finally(()=>{this.timerId=window.setTimeout(this.clear_status,this.timerDelay)})},clear_status:function(){this.statusUpdate=""}}},I0=["disabled"],U0={class:"field"},E0={class:"label has-text-weight-normal"},O0={class:"control"},D0=["placeholder","value"],N0={key:0,class:"help"};function z0(s,e,a,r,o,i){return l(),c("fieldset",{disabled:a.disabled},[t("div",U0,[t("label",E0,[I(s.$slots,"label"),t("i",{class:S(["is-size-7",{"has-text-info":o.statusUpdate==="success","has-text-danger":o.statusUpdate==="error"}])},u(i.info),3)]),t("div",O0,[t("input",{ref:"settings_text",class:"input",type:"text",placeholder:a.placeholder,value:i.value,onInput:e[0]||(e[0]=(...n)=>i.set_update_timer&&i.set_update_timer(...n))},null,40,D0)]),s.$slots.info?(l(),c("p",N0,[I(s.$slots,"info")])):y("",!0)])],8,I0)}var V0=w(R0,[["render",z0]]);const B0={name:"SettingsIntfield",props:["category_name","option_name","placeholder","disabled"],data(){return{timerDelay:2e3,timerId:-1,statusUpdate:""}},computed:{category(){return this.$store.state.settings.categories.find(s=>s.name===this.category_name)},option(){return this.category?this.category.options.find(s=>s.name===this.option_name):{}},value(){return this.option.value},info(){return this.statusUpdate==="success"?"(setting saved)":this.statusUpdate==="error"?"(error saving setting)":""}},methods:{set_update_timer(){this.timerId>0&&(window.clearTimeout(this.timerId),this.timerId=-1),this.statusUpdate="",this.$refs.settings_number.value!==this.value&&(this.timerId=window.setTimeout(this.update_setting,this.timerDelay))},update_setting(){this.timerId=-1;const s=this.$refs.settings_number.value;if(s===this.value){this.statusUpdate="";return}const e={category:this.category.name,name:this.option_name,value:parseInt(s,10)};f.settings_update(this.category.name,e).then(()=>{this.$store.commit(Bt,e),this.statusUpdate="success"}).catch(()=>{this.statusUpdate="error",this.$refs.settings_number.value=this.value}).finally(()=>{this.timerId=window.setTimeout(this.clear_status,this.timerDelay)})},clear_status:function(){this.statusUpdate=""}}},F0=["disabled"],M0={class:"field"},j0={class:"label has-text-weight-normal"},G0={class:"control"},H0=["placeholder","value"],W0={key:0,class:"help"};function K0(s,e,a,r,o,i){return l(),c("fieldset",{disabled:a.disabled},[t("div",M0,[t("label",j0,[I(s.$slots,"label"),t("i",{class:S(["is-size-7",{"has-text-info":o.statusUpdate==="success","has-text-danger":o.statusUpdate==="error"}])},u(i.info),3)]),t("div",G0,[t("input",{ref:"settings_number",class:"input",type:"number",min:"0",style:{width:"10em"},placeholder:a.placeholder,value:i.value,onInput:e[0]||(e[0]=(...n)=>i.set_update_timer&&i.set_update_timer(...n))},null,40,H0)]),s.$slots.info?(l(),c("p",W0,[I(s.$slots,"info")])):y("",!0)])],8,F0)}var Y0=w(B0,[["render",K0]]);const Q0={name:"SettingsPageWebinterface",components:{ContentWithHeading:U,TabsSettings:Ht,SettingsCheckbox:js,SettingsTextfield:V0,SettingsIntfield:Y0},computed:{settings_option_show_composer_now_playing(){return this.$store.getters.settings_option_show_composer_now_playing}},mounted(){function s(){const o=window.matchMedia("(prefers-color-scheme: dark)"),i=localStorage.getItem("preferred_colorscheme"),n=document.querySelector('meta[name="theme-color"]');i==="dark"||i==="system"&&o.matches?(document.documentElement.classList.add("dark-theme"),n.setAttribute("content","#000000")):(i=="light"||i==="system"&&!o.matches)&&(document.documentElement.classList.remove("dark-theme"),n.setAttribute("content","#ffffff"))}document.querySelector('input[id="'+localStorage.getItem("preferred_colorscheme")+'"]').checked=!0;for(var e=document.getElementById("colorscheme_radio"),a=e.getElementsByTagName("input"),r=0;r<a.length;++r)a[r].addEventListener("change",function(){this.checked&&(localStorage.setItem("preferred_colorscheme",this.id),s())});s()}},J0={class:"fd-page-with-tabs"},X0=t("div",{class:"title is-4"},"Color scheme",-1),Z0=t("span",{id:"colorscheme_radio"},[t("input",{type:"radio",id:"system",name:"colorscheme_radio",value:"system"}),t("label",{for:"system"}," Use system setting"),t("br"),t("input",{type:"radio",id:"light",name:"colorscheme_radio",value:"light"}),t("label",{for:"light"}," Light mode"),t("br"),t("input",{type:"radio",id:"dark",name:"colorscheme_radio",value:"dark"}),t("label",{for:"dark"}," Dark mode"),t("br")],-1),tx=t("div",{class:"title is-4"},"Navbar items",-1),sx=t("p",{class:"content"},"Select the top navigation bar menu items",-1),ex=t("div",{class:"notification is-size-7"}," If you select more items than can be shown on your screen then the burger menu will disappear. ",-1),ix=C(" Playlists "),ox=C(" Music "),ax=C(" Podcasts "),nx=C(" Audiobooks "),lx=C(" Radio "),rx=C(" Files "),dx=C(" Search "),cx=t("div",{class:"title is-4"},"Album lists",-1),_x=C(" Show cover artwork in album list "),ux=t("div",{class:"title is-4"},"Now playing page",-1),mx=C(" Show composer "),hx=C(' If enabled the composer of the current playing track is shown on the "now playing page" '),px=C(" Show composer only for listed genres "),fx=t("p",{class:"help"},' Comma separated list of genres the composer should be displayed on the "now playing page". ',-1),yx=t("p",{class:"help"},"Leave empty to always show the composer.",-1),gx=t("p",{class:"help"},[C(" The genre tag of the current track is matched by checking, if one of the defined genres are included. For example setting to "),t("code",null,"classical, soundtrack"),C(' will show the composer for tracks with a genre tag of "Contemporary Classical".'),t("br")],-1),bx=t("div",{class:"title is-4"},"Recently added page",-1),kx=C(' Limit the number of albums shown on the "Recently Added" page ');function wx(s,e,a,r,o,i){const n=m("tabs-settings"),p=m("content-with-heading"),h=m("settings-checkbox"),k=m("settings-textfield"),b=m("settings-intfield");return l(),c("div",J0,[_(n),_(p,null,{"heading-left":d(()=>[X0]),content:d(()=>[Z0]),_:1}),_(p,null,{"heading-left":d(()=>[tx]),content:d(()=>[sx,ex,_(h,{category_name:"webinterface",option_name:"show_menu_item_playlists"},{label:d(()=>[ix]),_:1}),_(h,{category_name:"webinterface",option_name:"show_menu_item_music"},{label:d(()=>[ox]),_:1}),_(h,{category_name:"webinterface",option_name:"show_menu_item_podcasts"},{label:d(()=>[ax]),_:1}),_(h,{category_name:"webinterface",option_name:"show_menu_item_audiobooks"},{label:d(()=>[nx]),_:1}),_(h,{category_name:"webinterface",option_name:"show_menu_item_radio"},{label:d(()=>[lx]),_:1}),_(h,{category_name:"webinterface",option_name:"show_menu_item_files"},{label:d(()=>[rx]),_:1}),_(h,{category_name:"webinterface",option_name:"show_menu_item_search"},{label:d(()=>[dx]),_:1})]),_:1}),_(p,null,{"heading-left":d(()=>[cx]),content:d(()=>[_(h,{category_name:"webinterface",option_name:"show_cover_artwork_in_album_lists"},{label:d(()=>[_x]),_:1})]),_:1}),_(p,null,{"heading-left":d(()=>[ux]),content:d(()=>[_(h,{category_name:"webinterface",option_name:"show_composer_now_playing"},{label:d(()=>[mx]),info:d(()=>[hx]),_:1}),_(k,{category_name:"webinterface",option_name:"show_composer_for_genre",disabled:!i.settings_option_show_composer_now_playing,placeholder:"Genres"},{label:d(()=>[px]),info:d(()=>[fx,yx,gx]),_:1},8,["disabled"])]),_:1}),_(p,null,{"heading-left":d(()=>[bx]),content:d(()=>[_(b,{category_name:"webinterface",option_name:"recently_added_limit"},{label:d(()=>[kx]),_:1})]),_:1})])}var vx=w(Q0,[["render",wx]]);const $x={name:"SettingsPageArtwork",components:{ContentWithHeading:U,TabsSettings:Ht,SettingsCheckbox:js},computed:{spotify(){return this.$store.state.spotify}}},xx={class:"fd-page-with-tabs"},Cx=t("div",{class:"title is-4"},"Artwork",-1),Sx=t("div",{class:"content"},[t("p",null," OwnTone supports PNG and JPEG artwork which is either placed as separate image files in the library, embedded in the media files or made available online by radio stations. "),t("p",null," In addition to that, you can enable fetching artwork from the following artwork providers: ")],-1),Ax=C(" Spotify "),qx=C(" Discogs ("),Px=t("a",{href:"https://www.discogs.com/"},"https://www.discogs.com/",-1),Tx=C(") "),Lx=C(" Cover Art Archive ("),Rx=t("a",{href:"https://coverartarchive.org/"},"https://coverartarchive.org/",-1),Ix=C(") ");function Ux(s,e,a,r,o,i){const n=m("tabs-settings"),p=m("settings-checkbox"),h=m("content-with-heading");return l(),c("div",xx,[_(n),_(h,null,{"heading-left":d(()=>[Cx]),content:d(()=>[Sx,i.spotify.libspotify_logged_in?(l(),$(p,{key:0,category_name:"artwork",option_name:"use_artwork_source_spotify"},{label:d(()=>[Ax]),_:1})):y("",!0),_(p,{category_name:"artwork",option_name:"use_artwork_source_discogs"},{label:d(()=>[qx,Px,Tx]),_:1}),_(p,{category_name:"artwork",option_name:"use_artwork_source_coverartarchive"},{label:d(()=>[Lx,Rx,Ix]),_:1})]),_:1})])}var Ex=w($x,[["render",Ux]]);const Ox={name:"SettingsPageOnlineServices",components:{ContentWithHeading:U,TabsSettings:Ht},filters:{join(s){return s.join(", ")}},data(){return{libspotify:{user:"",password:"",errors:{user:"",password:"",error:""}},lastfm_login:{user:"",password:"",errors:{user:"",password:"",error:""}}}},computed:{lastfm(){return this.$store.state.lastfm},spotify(){return this.$store.state.spotify},spotify_required_scope(){return this.spotify.webapi_required_scope?this.spotify.webapi_required_scope.split(" "):[]},spotify_missing_scope(){return this.spotify.webapi_token_valid&&this.spotify.webapi_granted_scope&&this.spotify.webapi_required_scope?this.spotify.webapi_required_scope.split(" ").filter(s=>this.spotify.webapi_granted_scope.indexOf(s)<0):[]},use_libspotify(){return this.$store.state.config.use_libspotify}},methods:{login_libspotify(){f.spotify_login(this.libspotify).then(s=>{this.libspotify.user="",this.libspotify.password="",this.libspotify.errors.user="",this.libspotify.errors.password="",this.libspotify.errors.error="",s.data.success||(this.libspotify.errors.user=s.data.errors.user,this.libspotify.errors.password=s.data.errors.password,this.libspotify.errors.error=s.data.errors.error)})},logout_spotify(){f.spotify_logout()},login_lastfm(){f.lastfm_login(this.lastfm_login).then(s=>{this.lastfm_login.user="",this.lastfm_login.password="",this.lastfm_login.errors.user="",this.lastfm_login.errors.password="",this.lastfm_login.errors.error="",s.data.success||(this.lastfm_login.errors.user=s.data.errors.user,this.lastfm_login.errors.password=s.data.errors.password,this.lastfm_login.errors.error=s.data.errors.error)})},logoutLastfm(){f.lastfm_logout()}}},Dx={class:"fd-page-with-tabs"},Nx=t("div",{class:"title is-4"},"Spotify",-1),zx={key:0,class:"notification is-size-7"},Vx=t("p",null," OwnTone was either built without support for Spotify or libspotify is not installed. ",-1),Bx=[Vx],Fx={key:1},Mx={class:"notification is-size-7"},jx=t("b",null,"You must have a Spotify premium account",-1),Gx=C(". "),Hx={key:0},Wx={key:0},Kx=t("p",{class:"content"},[t("b",null,"libspotify"),C(" - Login with your Spotify username and password ")],-1),Yx={key:0,class:"fd-has-margin-bottom"},Qx=C(" Logged in as "),Jx={class:"field is-grouped"},Xx={class:"control is-expanded"},Zx={class:"help is-danger"},t2={class:"control is-expanded"},s2={class:"help is-danger"},e2=t("div",{class:"control"},[t("button",{class:"button is-info"},"Login")],-1),i2={class:"help is-danger"},o2=t("p",{class:"help"}," libspotify enables OwnTone to play Spotify tracks. ",-1),a2=t("p",{class:"help"}," OwnTone will not store your password, but will still be able to log you in automatically afterwards, because libspotify saves a login token. ",-1),n2={class:"fd-has-margin-top"},l2=t("p",{class:"content"},[t("b",null,"Spotify Web API"),C(" - Grant access to the Spotify Web API ")],-1),r2={key:0},d2=C(" Access granted for "),c2={key:1,class:"help is-danger"},_2=C(" Please reauthorize Web API access to grant OwnTone the following additional access rights: "),u2={class:"field fd-has-margin-top"},m2={class:"control"},h2=["href"],p2={class:"help"},f2=C(" Access to the Spotify Web API enables scanning of your Spotify library. Required scopes are "),y2=C(". "),g2={key:2,class:"field fd-has-margin-top"},b2={class:"control"},k2=t("div",{class:"title is-4"},"Last.fm",-1),w2={key:0,class:"notification is-size-7"},v2=t("p",null,"OwnTone was built without support for Last.fm.",-1),$2=[v2],x2={key:1},C2=t("p",{class:"content"},[t("b",null,"Last.fm"),C(" - Login with your Last.fm username and password to enable scrobbling ")],-1),S2={key:0},A2={key:1},q2={class:"field is-grouped"},P2={class:"control is-expanded"},T2={class:"help is-danger"},L2={class:"control is-expanded"},R2={class:"help is-danger"},I2=t("div",{class:"control"},[t("button",{class:"button is-info",type:"submit"},"Login")],-1),U2={class:"help is-danger"},E2=t("p",{class:"help"}," OwnTone will not store your Last.fm username/password, only the session key. The session key does not expire. ",-1);function O2(s,e,a,r,o,i){const n=m("tabs-settings"),p=m("content-with-heading");return l(),c("div",Dx,[_(n),_(p,null,{"heading-left":d(()=>[Nx]),content:d(()=>[i.spotify.spotify_installed?y("",!0):(l(),c("div",zx,Bx)),i.spotify.spotify_installed?(l(),c("div",Fx,[t("div",Mx,[jx,Gx,s.use_libspotity?(l(),c("span",Hx,"If you normally log into Spotify with your Facebook account you must first go to Spotify's web site where you can get the Spotify username and password that matches your account.")):y("",!0)]),s.use_libspotity?(l(),c("div",Wx,[Kx,i.spotify.libspotify_logged_in?(l(),c("p",Yx,[Qx,t("b",null,[t("code",null,u(i.spotify.libspotify_user),1)])])):y("",!0),i.spotify.spotify_installed&&!i.spotify.libspotify_logged_in?(l(),c("form",{key:1,onSubmit:e[2]||(e[2]=E((...h)=>i.login_libspotify&&i.login_libspotify(...h),["prevent"]))},[t("div",Jx,[t("div",Xx,[D(t("input",{"onUpdate:modelValue":e[0]||(e[0]=h=>o.libspotify.user=h),class:"input",type:"text",placeholder:"Username"},null,512),[[V,o.libspotify.user]]),t("p",Zx,u(o.libspotify.errors.user),1)]),t("div",t2,[D(t("input",{"onUpdate:modelValue":e[1]||(e[1]=h=>o.libspotify.password=h),class:"input",type:"password",placeholder:"Password"},null,512),[[V,o.libspotify.password]]),t("p",s2,u(o.libspotify.errors.password),1)]),e2])],32)):y("",!0),t("p",i2,u(o.libspotify.errors.error),1),o2,a2])):y("",!0),t("div",n2,[l2,i.spotify.webapi_token_valid?(l(),c("p",r2,[d2,t("b",null,[t("code",null,u(i.spotify.webapi_user),1)])])):y("",!0),i.spotify_missing_scope.length>0?(l(),c("p",c2,[_2,t("b",null,[t("code",null,u(i.spotify_missing_scope.join()),1)])])):y("",!0),t("div",u2,[t("div",m2,[t("a",{class:S(["button",{"is-info":!i.spotify.webapi_token_valid||i.spotify_missing_scope.length>0}]),href:i.spotify.oauth_uri},"Authorize Web API access",10,h2)])]),t("p",p2,[f2,t("code",null,u(i.spotify_required_scope.join()),1),y2]),i.spotify.webapi_token_valid?(l(),c("div",g2,[t("div",b2,[t("a",{class:"button is-danger",onClick:e[3]||(e[3]=(...h)=>i.logout_spotify&&i.logout_spotify(...h))},"Logout")])])):y("",!0)])])):y("",!0)]),_:1}),_(p,null,{"heading-left":d(()=>[k2]),content:d(()=>[i.lastfm.enabled?y("",!0):(l(),c("div",w2,$2)),i.lastfm.enabled?(l(),c("div",x2,[C2,i.lastfm.scrobbling_enabled?(l(),c("div",S2,[t("a",{class:"button",onClick:e[4]||(e[4]=(...h)=>i.logoutLastfm&&i.logoutLastfm(...h))},"Stop scrobbling")])):y("",!0),i.lastfm.scrobbling_enabled?y("",!0):(l(),c("div",A2,[t("form",{onSubmit:e[7]||(e[7]=E((...h)=>i.login_lastfm&&i.login_lastfm(...h),["prevent"]))},[t("div",q2,[t("div",P2,[D(t("input",{"onUpdate:modelValue":e[5]||(e[5]=h=>o.lastfm_login.user=h),class:"input",type:"text",placeholder:"Username"},null,512),[[V,o.lastfm_login.user]]),t("p",T2,u(o.lastfm_login.errors.user),1)]),t("div",L2,[D(t("input",{"onUpdate:modelValue":e[6]||(e[6]=h=>o.lastfm_login.password=h),class:"input",type:"password",placeholder:"Password"},null,512),[[V,o.lastfm_login.password]]),t("p",R2,u(o.lastfm_login.errors.password),1)]),I2]),t("p",U2,u(o.lastfm_login.errors.error),1),E2],32)]))])):y("",!0)]),_:1})])}var D2=w(Ox,[["render",O2]]);const N2={name:"SettingsPageRemotesOutputs",components:{ContentWithHeading:U,TabsSettings:Ht},filters:{},data(){return{pairing_req:{pin:""},verification_req:{pin:""}}},computed:{pairing(){return this.$store.state.pairing},outputs(){return this.$store.state.outputs}},methods:{kickoff_pairing(){f.pairing_kickoff(this.pairing_req)},output_toggle(s){f.output_toggle(s)},kickoff_verification(s){f.output_update(s,this.verification_req)}}},z2={class:"fd-page-with-tabs"},V2=t("div",{class:"title is-4"},"Remote Pairing",-1),B2={key:0,class:"notification"},F2={class:"label has-text-weight-normal"},M2=C(" Remote pairing request from "),j2={class:"field is-grouped"},G2={class:"control"},H2=t("div",{class:"control"},[t("button",{class:"button is-info",type:"submit"},"Send")],-1),W2={key:1,class:"content"},K2=t("p",null,"No active pairing request.",-1),Y2=[K2],Q2=t("div",{class:"title is-4"},"Speaker pairing and device verification",-1),J2=t("p",{class:"content"}," If your speaker requires pairing then activate it below and enter the PIN that it displays. ",-1),X2={class:"field"},Z2={class:"control"},tC={class:"checkbox"},sC=["onUpdate:modelValue","onChange"],eC=["onSubmit"],iC={class:"field is-grouped"},oC={class:"control"},aC=t("div",{class:"control"},[t("button",{class:"button is-info",type:"submit"},"Verify")],-1);function nC(s,e,a,r,o,i){const n=m("tabs-settings"),p=m("content-with-heading");return l(),c("div",z2,[_(n),_(p,null,{"heading-left":d(()=>[V2]),content:d(()=>[i.pairing.active?(l(),c("div",B2,[t("form",{onSubmit:e[1]||(e[1]=E((...h)=>i.kickoff_pairing&&i.kickoff_pairing(...h),["prevent"]))},[t("label",F2,[M2,t("b",null,u(i.pairing.remote),1)]),t("div",j2,[t("div",G2,[D(t("input",{"onUpdate:modelValue":e[0]||(e[0]=h=>o.pairing_req.pin=h),class:"input",type:"text",placeholder:"Enter pairing code"},null,512),[[V,o.pairing_req.pin]])]),H2])],32)])):y("",!0),i.pairing.active?y("",!0):(l(),c("div",W2,Y2))]),_:1}),_(p,null,{"heading-left":d(()=>[Q2]),content:d(()=>[J2,(l(!0),c(L,null,R(i.outputs,h=>(l(),c("div",{key:h.id},[t("div",X2,[t("div",Z2,[t("label",tC,[D(t("input",{"onUpdate:modelValue":k=>h.selected=k,type:"checkbox",onChange:k=>i.output_toggle(h.id)},null,40,sC),[[Y,h.selected]]),C(" "+u(h.name),1)])])]),h.needs_auth_key?(l(),c("form",{key:0,class:"fd-has-margin-bottom",onSubmit:E(k=>i.kickoff_verification(h.id),["prevent"])},[t("div",iC,[t("div",oC,[D(t("input",{"onUpdate:modelValue":e[2]||(e[2]=k=>o.verification_req.pin=k),class:"input",type:"text",placeholder:"Enter verification code"},null,512),[[V,o.verification_req.pin]])]),aC])],40,eC)):y("",!0)]))),128))]),_:1})])}var lC=w(N2,[["render",nC]]);const Gs=Zs({history:te(),routes:[{path:"/",name:"PageQueue",component:Qo},{path:"/about",name:"About",component:b1},{path:"/now-playing",name:"Now playing",component:ka},{path:"/music",redirect:"/music/browse"},{path:"/music/browse",name:"Browse",component:id,meta:{show_progress:!0,has_tabs:!0}},{path:"/music/browse/recently_added",name:"Browse Recently Added",component:dd,meta:{show_progress:!0,has_tabs:!0}},{path:"/music/browse/recently_played",name:"Browse Recently Played",component:pd,meta:{show_progress:!0,has_tabs:!0}},{path:"/music/artists",name:"Artists",component:Ec,meta:{show_progress:!0,has_tabs:!0,has_index:!0}},{path:"/music/artists/:artist_id",name:"Artist",component:Yc,meta:{show_progress:!0,has_index:!0}},{path:"/music/artists/:artist_id/tracks",name:"Tracks",component:tm,meta:{show_progress:!0,has_index:!0}},{path:"/music/albums",name:"Albums",component:h_,meta:{show_progress:!0,has_tabs:!0,has_index:!0}},{path:"/music/albums/:album_id",name:"Album",component:F_,meta:{show_progress:!0}},{path:"/music/genres",name:"Genres",component:wu,meta:{show_progress:!0,has_tabs:!0,has_index:!0}},{path:"/music/genres/:genre",name:"Genre",component:Ru,meta:{show_progress:!0,has_index:!0}},{path:"/music/genres/:genre/tracks",name:"GenreTracks",component:Mu,meta:{show_progress:!0,has_index:!0}},{path:"/music/composers",name:"Composers",component:Fm,meta:{show_progress:!0,has_tabs:!0,has_index:!0}},{path:"/music/composers/:composer/albums",name:"ComposerAlbums",component:eh,meta:{show_progress:!0,has_tabs:!0,has_index:!0}},{path:"/music/composers/:composer/tracks",name:"ComposerTracks",component:fh,meta:{show_progress:!0,has_tabs:!0,has_index:!0}},{path:"/podcasts",name:"Podcasts",component:lp,meta:{show_progress:!0}},{path:"/podcasts/:album_id",name:"Podcast",component:Cp,meta:{show_progress:!0}},{path:"/audiobooks",redirect:"/audiobooks/artists"},{path:"/audiobooks/artists",name:"AudiobooksArtists",component:Xp,meta:{show_progress:!0,has_tabs:!0,has_index:!0}},{path:"/audiobooks/artists/:artist_id",name:"AudiobooksArtist",component:cf,meta:{show_progress:!0}},{path:"/audiobooks/albums",name:"AudiobooksAlbums",component:Hp,meta:{show_progress:!0,has_tabs:!0,has_index:!0}},{path:"/audiobooks/:album_id",name:"Audiobook",component:$f,meta:{show_progress:!0}},{path:"/radio",name:"Radio",component:$g,meta:{show_progress:!0}},{path:"/files",name:"Files",component:gg,meta:{show_progress:!0}},{path:"/playlists",redirect:"/playlists/0"},{path:"/playlists/:playlist_id",name:"Playlists",component:dy,meta:{show_progress:!0}},{path:"/playlists/:playlist_id/tracks",name:"Playlist",component:ky,meta:{show_progress:!0}},{path:"/search",redirect:"/search/library"},{path:"/search/library",name:"Search Library",component:Pb},{path:"/music/spotify",name:"Spotify",component:Kk,meta:{show_progress:!0,has_tabs:!0}},{path:"/music/spotify/new-releases",name:"Spotify Browse New Releases",component:iw,meta:{show_progress:!0,has_tabs:!0}},{path:"/music/spotify/featured-playlists",name:"Spotify Browse Featured Playlists",component:_w,meta:{show_progress:!0,has_tabs:!0}},{path:"/music/spotify/artists/:artist_id",name:"Spotify Artist",component:Yw,meta:{show_progress:!0}},{path:"/music/spotify/albums/:album_id",name:"Spotify Album",component:Kv,meta:{show_progress:!0}},{path:"/music/spotify/playlists/:playlist_id",name:"Spotify Playlist",component:d$,meta:{show_progress:!0}},{path:"/search/spotify",name:"Spotify Search",component:n0},{path:"/settings/webinterface",name:"Settings Webinterface",component:vx},{path:"/settings/artwork",name:"Settings Artwork",component:Ex},{path:"/settings/online-services",name:"Settings Online Services",component:D2},{path:"/settings/remotes-outputs",name:"Settings Remotes Outputs",component:lC}],scrollBehavior(s,e,a){return a?new Promise((o,i)=>{setTimeout(()=>{o(a)},0)}):s.path===e.path&&s.hash?{el:s.hash,top:120}:s.hash?new Promise((o,i)=>{setTimeout(()=>{o({el:s.hash,top:120})},0)}):s.meta.has_index?new Promise((o,i)=>{setTimeout(()=>{s.meta.has_tabs?o({el:"#top",top:140}):o({el:"#top",top:100})},0)}):{left:0,top:0}}});Gs.beforeEach((s,e,a)=>{if(T.state.show_burger_menu){T.commit(Q,!1),a(!1);return}if(T.state.show_player_menu){T.commit(J,!1),a(!1);return}a(!0)});se(K);const rC={duration:function(s,e){return e?K.duration(s).format(e):K.duration(s).format("hh:*mm:ss")},time:function(s,e){return e?K(s).format(e):K(s).format()},timeFromNow:function(s,e){return K(s).fromNow(e)},number:function(s){return s.toLocaleString()},channels:function(s){return s===1?"mono":s===2?"stereo":s?s+" channels":""}},dC={name:"NavbarItemLink",props:{to:String,exact:Boolean},computed:{is_active(){return this.exact?this.$route.path===this.to:this.$route.path.startsWith(this.to)},show_player_menu:{get(){return this.$store.state.show_player_menu},set(s){this.$store.commit(J,s)}},show_burger_menu:{get(){return this.$store.state.show_burger_menu},set(s){this.$store.commit(Q,s)}}},methods:{open_link:function(){this.show_burger_menu&&this.$store.commit(Q,!1),this.show_player_menu&&this.$store.commit(J,!1),this.$router.push({path:this.to})},full_path:function(){return this.$router.resolve(this.to).href}}},cC=["href"];function _C(s,e,a,r,o,i){return l(),c("a",{class:S(["navbar-item",{"is-active":i.is_active}]),href:i.full_path(),onClick:e[0]||(e[0]=E(n=>i.open_link(),["stop","prevent"]))},[I(s.$slots,"default")],10,cC)}var Hs=w(dC,[["render",_C]]);const uC={name:"NavbarTop",components:{NavbarItemLink:Hs},data(){return{show_settings_menu:!1}},computed:{is_visible_playlists(){return this.$store.getters.settings_option("webinterface","show_menu_item_playlists").value},is_visible_music(){return this.$store.getters.settings_option("webinterface","show_menu_item_music").value},is_visible_podcasts(){return this.$store.getters.settings_option("webinterface","show_menu_item_podcasts").value},is_visible_audiobooks(){return this.$store.getters.settings_option("webinterface","show_menu_item_audiobooks").value},is_visible_radio(){return this.$store.getters.settings_option("webinterface","show_menu_item_radio").value},is_visible_files(){return this.$store.getters.settings_option("webinterface","show_menu_item_files").value},is_visible_search(){return this.$store.getters.settings_option("webinterface","show_menu_item_search").value},player(){return this.$store.state.player},config(){return this.$store.state.config},library(){return this.$store.state.library},audiobooks(){return this.$store.state.audiobooks_count},podcasts(){return this.$store.state.podcasts_count},spotify_enabled(){return this.$store.state.spotify.webapi_token_valid},show_burger_menu:{get(){return this.$store.state.show_burger_menu},set(s){this.$store.commit(Q,s)}},show_player_menu(){return this.$store.state.show_player_menu},show_update_dialog:{get(){return this.$store.state.show_update_dialog},set(s){this.$store.commit(et,s)}},zindex(){return this.show_player_menu?"z-index: 20":""}},watch:{$route(s,e){this.show_settings_menu=!1}},methods:{on_click_outside_settings(){this.show_settings_menu=!this.show_settings_menu},open_update_dialog(){this.show_update_dialog=!0,this.show_settings_menu=!1,this.show_burger_menu=!1}}},mC={class:"navbar-brand"},hC=t("span",{class:"icon"},[t("i",{class:"mdi mdi-library-music"})],-1),pC=t("span",{class:"icon"},[t("i",{class:"mdi mdi-music"})],-1),fC=t("span",{class:"icon"},[t("i",{class:"mdi mdi-microphone"})],-1),yC=t("span",{class:"icon"},[t("i",{class:"mdi mdi-book-open-variant"})],-1),gC=t("span",{class:"icon"},[t("i",{class:"mdi mdi-radio"})],-1),bC=t("span",{class:"icon"},[t("i",{class:"mdi mdi-folder-open"})],-1),kC=t("span",{class:"icon"},[t("i",{class:"mdi mdi-magnify"})],-1),wC=t("span",null,null,-1),vC=t("span",null,null,-1),$C=t("span",null,null,-1),xC=[wC,vC,$C],CC=t("div",{class:"navbar-start"},null,-1),SC={class:"navbar-end"},AC=t("a",{class:"navbar-link is-arrowless"},[t("span",{class:"icon is-hidden-touch"},[t("i",{class:"mdi mdi-24px mdi-menu"})]),t("span",{class:"is-hidden-desktop has-text-weight-bold"},"OwnTone")],-1),qC={class:"navbar-dropdown is-right"},PC=t("span",{class:"icon"},[t("i",{class:"mdi mdi-library-music"})],-1),TC=t("b",null,"Playlists",-1),LC=t("span",{class:"icon"},[t("i",{class:"mdi mdi-music"})],-1),RC=t("b",null,"Music",-1),IC=t("span",{class:"fd-navbar-item-level2"},"Artists",-1),UC=t("span",{class:"fd-navbar-item-level2"},"Albums",-1),EC=t("span",{class:"fd-navbar-item-level2"},"Genres",-1),OC=t("span",{class:"fd-navbar-item-level2"},"Spotify",-1),DC=t("span",{class:"icon"},[t("i",{class:"mdi mdi-microphone"})],-1),NC=t("b",null,"Podcasts",-1),zC=t("span",{class:"icon"},[t("i",{class:"mdi mdi-book-open-variant"})],-1),VC=t("b",null,"Audiobooks",-1),BC=t("span",{class:"icon"},[t("i",{class:"mdi mdi-radio"})],-1),FC=t("b",null,"Radio",-1),MC=t("span",{class:"icon"},[t("i",{class:"mdi mdi-folder-open"})],-1),jC=t("b",null,"Files",-1),GC=t("span",{class:"icon"},[t("i",{class:"mdi mdi-magnify"})],-1),HC=t("b",null,"Search",-1),WC=t("hr",{class:"fd-navbar-divider"},null,-1),KC=C(" Settings "),YC=C(" About "),QC=t("div",{class:"navbar-item is-hidden-desktop",style:{"margin-bottom":"2.5rem"}},null,-1);function JC(s,e,a,r,o,i){const n=m("navbar-item-link");return l(),c("nav",{class:"fd-top-navbar navbar is-light is-fixed-top",style:Jt(i.zindex),role:"navigation","aria-label":"main navigation"},[t("div",mC,[i.is_visible_playlists?(l(),$(n,{key:0,to:"/playlists"},{default:d(()=>[hC]),_:1})):y("",!0),i.is_visible_music?(l(),$(n,{key:1,to:"/music"},{default:d(()=>[pC]),_:1})):y("",!0),i.is_visible_podcasts?(l(),$(n,{key:2,to:"/podcasts"},{default:d(()=>[fC]),_:1})):y("",!0),i.is_visible_audiobooks?(l(),$(n,{key:3,to:"/audiobooks"},{default:d(()=>[yC]),_:1})):y("",!0),i.is_visible_radio?(l(),$(n,{key:4,to:"/radio"},{default:d(()=>[gC]),_:1})):y("",!0),i.is_visible_files?(l(),$(n,{key:5,to:"/files"},{default:d(()=>[bC]),_:1})):y("",!0),i.is_visible_search?(l(),$(n,{key:6,to:"/search"},{default:d(()=>[kC]),_:1})):y("",!0),t("div",{class:S(["navbar-burger",{"is-active":i.show_burger_menu}]),onClick:e[0]||(e[0]=p=>i.show_burger_menu=!i.show_burger_menu)},xC,2)]),t("div",{class:S(["navbar-menu",{"is-active":i.show_burger_menu}])},[CC,t("div",SC,[t("div",{class:S(["navbar-item has-dropdown is-hoverable",{"is-active":o.show_settings_menu}]),onClick:e[2]||(e[2]=(...p)=>i.on_click_outside_settings&&i.on_click_outside_settings(...p))},[AC,t("div",qC,[_(n,{to:"/playlists"},{default:d(()=>[PC,TC]),_:1}),_(n,{to:"/music",exact:""},{default:d(()=>[LC,RC]),_:1}),_(n,{to:"/music/artists"},{default:d(()=>[IC]),_:1}),_(n,{to:"/music/albums"},{default:d(()=>[UC]),_:1}),_(n,{to:"/music/genres"},{default:d(()=>[EC]),_:1}),i.spotify_enabled?(l(),$(n,{key:0,to:"/music/spotify"},{default:d(()=>[OC]),_:1})):y("",!0),_(n,{to:"/podcasts"},{default:d(()=>[DC,NC]),_:1}),_(n,{to:"/audiobooks"},{default:d(()=>[zC,VC]),_:1}),_(n,{to:"/radio"},{default:d(()=>[BC,FC]),_:1}),_(n,{to:"/files"},{default:d(()=>[MC,jC]),_:1}),_(n,{to:"/search"},{default:d(()=>[GC,HC]),_:1}),WC,_(n,{to:"/settings/webinterface"},{default:d(()=>[KC]),_:1}),t("a",{class:"navbar-item",onClick:e[1]||(e[1]=E(p=>i.open_update_dialog(),["stop","prevent"]))}," Update Library "),_(n,{to:"/about"},{default:d(()=>[YC]),_:1}),QC])],2)])],2),D(t("div",{class:"is-overlay",style:{"z-index":"10",width:"100vw",height:"100vh"},onClick:e[3]||(e[3]=p=>o.show_settings_menu=!1)},null,512),[[Vt,o.show_settings_menu]])],4)}var XC=w(uC,[["render",JC]]),tt={_audio:new Audio,_context:null,_source:null,_gain:null,setupAudio(){const s=window.AudioContext||window.webkitAudioContext;return this._context=new s,this._source=this._context.createMediaElementSource(this._audio),this._gain=this._context.createGain(),this._source.connect(this._gain),this._gain.connect(this._context.destination),this._audio.addEventListener("canplaythrough",e=>{this._audio.play()}),this._audio.addEventListener("canplay",e=>{this._audio.play()}),this._audio},setVolume(s){!this._gain||(s=parseFloat(s)||0,s=s<0?0:s,s=s>1?1:s,this._gain.gain.value=s)},playSource(s){this.stopAudio(),this._context.resume().then(()=>{this._audio.src=String(s||"")+"?x="+Date.now(),this._audio.crossOrigin="anonymous",this._audio.load()})},stopAudio(){try{this._audio.pause()}catch{}try{this._audio.stop()}catch{}try{this._audio.close()}catch{}}};const ZC={name:"NavbarItemOutput",components:{Slider:Qt},props:["output"],computed:{type_class(){return this.output.type.startsWith("AirPlay")?"mdi-airplay":this.output.type==="Chromecast"?"mdi-cast":this.output.type==="fifo"?"mdi-pipe":"mdi-server"},volume(){return this.output.selected?this.output.volume:0}},methods:{play_next:function(){f.player_next()},set_volume:function(s){f.player_output_volume(this.output.id,s)},set_enabled:function(){const s={selected:!this.output.selected};f.output_update(this.output.id,s)}}},t3={class:"navbar-item"},s3={class:"level is-mobile"},e3={class:"level-left fd-expanded"},i3={class:"level-item",style:{"flex-grow":"0"}},o3={class:"button is-white is-small"},a3=["title"],n3={class:"level-item fd-expanded"},l3={class:"fd-expanded"};function r3(s,e,a,r,o,i){const n=m("Slider");return l(),c("div",t3,[t("div",s3,[t("div",e3,[t("div",i3,[t("a",o3,[t("span",{class:S(["icon fd-has-action",{"has-text-grey-light":!a.output.selected}]),onClick:e[0]||(e[0]=(...p)=>i.set_enabled&&i.set_enabled(...p))},[t("i",{class:S(["mdi mdi-18px",i.type_class]),title:a.output.type},null,10,a3)],2)])]),t("div",n3,[t("div",l3,[t("p",{class:S(["heading",{"has-text-grey-light":!a.output.selected}])},u(a.output.name),3),_(n,{modelValue:i.volume,"onUpdate:modelValue":e[1]||(e[1]=p=>i.volume=p),min:0,max:100,step:1,tooltips:!1,disabled:!a.output.selected,classes:{target:"slider"},onChange:i.set_volume},null,8,["modelValue","disabled","onChange"])])])])])])}var d3=w(ZC,[["render",r3]]);const c3={name:"PlayerButtonPlayPause",props:{icon_style:String,show_disabled_message:Boolean},computed:{is_playing(){return this.$store.state.player.state==="play"},is_pause_allowed(){return this.$store.getters.now_playing&&this.$store.getters.now_playing.data_kind!=="pipe"},disabled(){return!this.$store.state.queue||this.$store.state.queue.count<=0}},methods:{toggle_play_pause:function(){if(this.disabled){this.show_disabled_message&&this.$store.dispatch("add_notification",{text:"Queue is empty",type:"info",topic:"connection",timeout:2e3});return}this.is_playing&&this.is_pause_allowed?f.player_pause():this.is_playing&&!this.is_pause_allowed?f.player_stop():f.player_play()}}},_3=["disabled"],u3={class:"icon"};function m3(s,e,a,r,o,i){return l(),c("a",{disabled:i.disabled,onClick:e[0]||(e[0]=(...n)=>i.toggle_play_pause&&i.toggle_play_pause(...n))},[t("span",u3,[t("i",{class:S(["mdi",[a.icon_style,{"mdi-play":!i.is_playing,"mdi-pause":i.is_playing&&i.is_pause_allowed,"mdi-stop":i.is_playing&&!i.is_pause_allowed}]])},null,2)])],8,_3)}var h3=w(c3,[["render",m3]]);const p3={name:"PlayerButtonNext",props:{icon_style:String},computed:{disabled(){return!this.$store.state.queue||this.$store.state.queue.count<=0}},methods:{play_next:function(){this.disabled||f.player_next()}}},f3=["disabled"],y3={class:"icon"};function g3(s,e,a,r,o,i){return l(),c("a",{disabled:i.disabled,onClick:e[0]||(e[0]=(...n)=>i.play_next&&i.play_next(...n))},[t("span",y3,[t("i",{class:S(["mdi mdi-skip-forward",a.icon_style])},null,2)])],8,f3)}var b3=w(p3,[["render",g3]]);const k3={name:"PlayerButtonPrevious",props:{icon_style:String},computed:{disabled(){return!this.$store.state.queue||this.$store.state.queue.count<=0}},methods:{play_previous:function(){this.disabled||f.player_previous()}}},w3=["disabled"],v3={class:"icon"};function $3(s,e,a,r,o,i){return l(),c("a",{disabled:i.disabled,onClick:e[0]||(e[0]=(...n)=>i.play_previous&&i.play_previous(...n))},[t("span",v3,[t("i",{class:S(["mdi mdi-skip-backward",a.icon_style])},null,2)])],8,w3)}var x3=w(k3,[["render",$3]]);const C3={name:"PlayerButtonShuffle",props:{icon_style:String},computed:{is_shuffle(){return this.$store.state.player.shuffle}},methods:{toggle_shuffle_mode:function(){f.player_shuffle(!this.is_shuffle)}}},S3={class:"icon"};function A3(s,e,a,r,o,i){return l(),c("a",{class:S({"is-warning":i.is_shuffle}),onClick:e[0]||(e[0]=(...n)=>i.toggle_shuffle_mode&&i.toggle_shuffle_mode(...n))},[t("span",S3,[t("i",{class:S(["mdi",[a.icon_style,{"mdi-shuffle":i.is_shuffle,"mdi-shuffle-disabled":!i.is_shuffle}]])},null,2)])],2)}var q3=w(C3,[["render",A3]]);const P3={name:"PlayerButtonConsume",props:{icon_style:String},computed:{is_consume(){return this.$store.state.player.consume}},methods:{toggle_consume_mode:function(){f.player_consume(!this.is_consume)}}},T3={class:"icon"};function L3(s,e,a,r,o,i){return l(),c("a",{class:S({"is-warning":i.is_consume}),onClick:e[0]||(e[0]=(...n)=>i.toggle_consume_mode&&i.toggle_consume_mode(...n))},[t("span",T3,[t("i",{class:S(["mdi mdi-fire",a.icon_style])},null,2)])],2)}var R3=w(P3,[["render",L3]]);const I3={name:"PlayerButtonRepeat",props:{icon_style:String},computed:{is_repeat_all(){return this.$store.state.player.repeat==="all"},is_repeat_single(){return this.$store.state.player.repeat==="single"},is_repeat_off(){return!this.is_repeat_all&&!this.is_repeat_single}},methods:{toggle_repeat_mode:function(){this.is_repeat_all?f.player_repeat("single"):this.is_repeat_single?f.player_repeat("off"):f.player_repeat("all")}}},U3={class:"icon"};function E3(s,e,a,r,o,i){return l(),c("a",{class:S({"is-warning":!i.is_repeat_off}),onClick:e[0]||(e[0]=(...n)=>i.toggle_repeat_mode&&i.toggle_repeat_mode(...n))},[t("span",U3,[t("i",{class:S(["mdi",[a.icon_style,{"mdi-repeat":i.is_repeat_all,"mdi-repeat-once":i.is_repeat_single,"mdi-repeat-off":i.is_repeat_off}]])},null,2)])],2)}var O3=w(I3,[["render",E3]]);const D3={name:"PlayerButtonSeekBack",props:["seek_ms","icon_style"],computed:{now_playing(){return this.$store.getters.now_playing},is_stopped(){return this.$store.state.player.state==="stop"},disabled(){return!this.$store.state.queue||this.$store.state.queue.count<=0||this.is_stopped||this.now_playing.data_kind==="pipe"},visible(){return["podcast","audiobook"].includes(this.now_playing.media_kind)}},methods:{seek:function(){this.disabled||f.player_seek(this.seek_ms*-1)}}},N3=["disabled"],z3={class:"icon"};function V3(s,e,a,r,o,i){return i.visible?(l(),c("a",{key:0,disabled:i.disabled,onClick:e[0]||(e[0]=(...n)=>i.seek&&i.seek(...n))},[t("span",z3,[t("i",{class:S(["mdi mdi-rewind",a.icon_style])},null,2)])],8,N3)):y("",!0)}var B3=w(D3,[["render",V3]]);const F3={name:"PlayerButtonSeekForward",props:["seek_ms","icon_style"],computed:{now_playing(){return this.$store.getters.now_playing},is_stopped(){return this.$store.state.player.state==="stop"},disabled(){return!this.$store.state.queue||this.$store.state.queue.count<=0||this.is_stopped||this.now_playing.data_kind==="pipe"},visible(){return["podcast","audiobook"].includes(this.now_playing.media_kind)}},methods:{seek:function(){this.disabled||f.player_seek(this.seek_ms)}}},M3=["disabled"],j3={class:"icon"};function G3(s,e,a,r,o,i){return i.visible?(l(),c("a",{key:0,disabled:i.disabled,onClick:e[0]||(e[0]=(...n)=>i.seek&&i.seek(...n))},[t("span",j3,[t("i",{class:S(["mdi mdi-fast-forward",a.icon_style])},null,2)])],8,M3)):y("",!0)}var H3=w(F3,[["render",G3]]);const W3={name:"NavbarBottom",components:{NavbarItemLink:Hs,NavbarItemOutput:d3,Slider:Qt,PlayerButtonPlayPause:h3,PlayerButtonNext:b3,PlayerButtonPrevious:x3,PlayerButtonShuffle:q3,PlayerButtonConsume:R3,PlayerButtonRepeat:O3,PlayerButtonSeekForward:H3,PlayerButtonSeekBack:B3},data(){return{old_volume:0,playing:!1,loading:!1,stream_volume:10,show_outputs_menu:!1,show_desktop_outputs_menu:!1}},computed:{show_player_menu:{get(){return this.$store.state.show_player_menu},set(s){this.$store.commit(J,s)}},show_burger_menu(){return this.$store.state.show_burger_menu},zindex(){return this.show_burger_menu?"z-index: 20":""},state(){return this.$store.state.player},now_playing(){return this.$store.getters.now_playing},is_now_playing_page(){return this.$route.path==="/now-playing"},outputs(){return this.$store.state.outputs},player(){return this.$store.state.player},config(){return this.$store.state.config}},watch:{"$store.state.player.volume"(){this.player.volume>0&&(this.old_volume=this.player.volume)}},mounted(){this.setupAudio()},unmounted(){this.closeAudio()},methods:{on_click_outside_outputs(){this.show_outputs_menu=!1},set_volume:function(s){f.player_volume(s)},toggle_mute_volume:function(){this.player.volume>0?this.set_volume(0):this.set_volume(this.old_volume)},setupAudio:function(){const s=tt.setupAudio();s.addEventListener("waiting",e=>{this.playing=!1,this.loading=!0}),s.addEventListener("playing",e=>{this.playing=!0,this.loading=!1}),s.addEventListener("ended",e=>{this.playing=!1,this.loading=!1}),s.addEventListener("error",e=>{this.closeAudio(),this.$store.dispatch("add_notification",{text:"HTTP stream error: failed to load stream or stopped loading due to network problem",type:"danger"}),this.playing=!1,this.loading=!1})},closeAudio:function(){tt.stopAudio(),this.playing=!1},playChannel:function(){if(this.playing)return;const s="/stream.mp3";this.loading=!0,tt.playSource(s),tt.setVolume(this.stream_volume/100)},togglePlay:function(){if(!this.loading)return this.playing?this.closeAudio():this.playChannel()},set_stream_volume:function(s){this.stream_volume=s,tt.setVolume(this.stream_volume/100)}}},K3={class:"navbar-brand fd-expanded"},Y3=t("span",{class:"icon"},[t("i",{class:"mdi mdi-24px mdi-playlist-play"})],-1),Q3={class:"is-clipped"},J3={class:"is-size-7 fd-is-text-clipped"},X3=t("br",null,null,-1),Z3={key:0},t4={class:"icon"},s4={class:"icon"},e4={class:"navbar-dropdown is-right is-boxed",style:{"margin-right":"6px","margin-bottom":"6px","border-radius":"6px"}},i4={class:"navbar-item"},o4={class:"level is-mobile"},a4={class:"level-left fd-expanded"},n4={class:"level-item",style:{"flex-grow":"0"}},l4={class:"icon"},r4={class:"level-item fd-expanded"},d4={class:"fd-expanded"},c4=t("p",{class:"heading"},"Volume",-1),_4=t("hr",{class:"fd-navbar-divider"},null,-1),u4=t("hr",{class:"fd-navbar-divider"},null,-1),m4={class:"navbar-item"},h4={class:"level is-mobile"},p4={class:"level-left fd-expanded"},f4={class:"level-item",style:{"flex-grow":"0"}},y4=t("i",{class:"mdi mdi-18px mdi-radio-tower"},null,-1),g4=[y4],b4={class:"level-item fd-expanded"},k4={class:"fd-expanded"},w4=C(" HTTP stream "),v4=t("a",{href:"stream.mp3"},[t("span",{class:"is-lowercase"},"(stream.mp3)")],-1),$4=[w4,v4],x4=t("hr",{class:"fd-navbar-divider"},null,-1),C4={class:"navbar-item"},S4={class:"level is-mobile fd-expanded"},A4={class:"level-item"},q4={class:"buttons has-addons"},P4=t("div",{class:"navbar-start"},null,-1),T4={class:"navbar-end"},L4={class:"navbar-item"},R4={class:"buttons is-centered"},I4=t("hr",{class:"fd-navbar-divider"},null,-1),U4={class:"navbar-item"},E4={class:"level is-mobile"},O4={class:"level-left fd-expanded"},D4={class:"level-item",style:{"flex-grow":"0"}},N4={class:"icon"},z4={class:"level-item fd-expanded"},V4={class:"fd-expanded"},B4=t("p",{class:"heading"},"Volume",-1),F4=t("hr",{class:"fd-navbar-divider"},null,-1),M4={class:"navbar-item fd-has-margin-bottom"},j4={class:"level is-mobile"},G4={class:"level-left fd-expanded"},H4={class:"level-item",style:{"flex-grow":"0"}},W4=t("i",{class:"mdi mdi-18px mdi-radio-tower"},null,-1),K4=[W4],Y4={class:"level-item fd-expanded"},Q4={class:"fd-expanded"},J4=C(" HTTP stream "),X4=t("a",{href:"stream.mp3"},[t("span",{class:"is-lowercase"},"(stream.mp3)")],-1),Z4=[J4,X4];function t8(s,e,a,r,o,i){const n=m("navbar-item-link"),p=m("router-link"),h=m("player-button-previous"),k=m("player-button-seek-back"),b=m("player-button-play-pause"),g=m("player-button-seek-forward"),v=m("player-button-next"),A=m("Slider"),q=m("navbar-item-output"),F=m("player-button-repeat"),rt=m("player-button-shuffle"),dt=m("player-button-consume");return l(),c("nav",{class:S(["fd-bottom-navbar navbar is-white is-fixed-bottom",{"is-transparent":i.is_now_playing_page,"is-dark":!i.is_now_playing_page}]),style:Jt(i.zindex),role:"navigation","aria-label":"player controls"},[t("div",K3,[_(n,{to:"/",exact:""},{default:d(()=>[Y3]),_:1}),i.is_now_playing_page?y("",!0):(l(),$(p,{key:0,to:"/now-playing",class:"navbar-item is-expanded is-clipped","active-class":"is-active",exact:""},{default:d(()=>[t("div",Q3,[t("p",J3,[t("strong",null,u(i.now_playing.title),1),X3,C(" "+u(i.now_playing.artist),1),i.now_playing.data_kind==="url"?(l(),c("span",Z3," - "+u(i.now_playing.album),1)):y("",!0)])])]),_:1})),i.is_now_playing_page?(l(),$(h,{key:1,class:"navbar-item fd-margin-left-auto",icon_style:"mdi-24px"})):y("",!0),i.is_now_playing_page?(l(),$(k,{key:2,seek_ms:"10000",class:"navbar-item",icon_style:"mdi-24px"})):y("",!0),_(b,{class:"navbar-item",icon_style:"mdi-36px",show_disabled_message:""}),i.is_now_playing_page?(l(),$(g,{key:3,seek_ms:"30000",class:"navbar-item",icon_style:"mdi-24px"})):y("",!0),i.is_now_playing_page?(l(),$(v,{key:4,class:"navbar-item",icon_style:"mdi-24px"})):y("",!0),t("a",{class:"navbar-item fd-margin-left-auto is-hidden-desktop",onClick:e[0]||(e[0]=O=>i.show_player_menu=!i.show_player_menu)},[t("span",t4,[t("i",{class:S(["mdi mdi-18px",{"mdi-chevron-up":!i.show_player_menu,"mdi-chevron-down":i.show_player_menu}])},null,2)])]),t("div",{class:S(["navbar-item has-dropdown has-dropdown-up fd-margin-left-auto is-hidden-touch",{"is-active":i.show_player_menu}])},[t("a",{class:"navbar-link is-arrowless",onClick:e[1]||(e[1]=O=>i.show_player_menu=!i.show_player_menu)},[t("span",s4,[t("i",{class:S(["mdi mdi-18px",{"mdi-chevron-up":!i.show_player_menu,"mdi-chevron-down":i.show_player_menu}])},null,2)])]),t("div",e4,[t("div",i4,[t("div",o4,[t("div",a4,[t("div",n4,[t("a",{class:"button is-white is-small",onClick:e[2]||(e[2]=(...O)=>i.toggle_mute_volume&&i.toggle_mute_volume(...O))},[t("span",l4,[t("i",{class:S(["mdi mdi-18px",{"mdi-volume-off":i.player.volume<=0,"mdi-volume-high":i.player.volume>0}])},null,2)])])]),t("div",r4,[t("div",d4,[c4,_(A,{modelValue:i.player.volume,"onUpdate:modelValue":e[3]||(e[3]=O=>i.player.volume=O),min:0,max:100,step:1,tooltips:!1,classes:{target:"slider"},onChange:i.set_volume},null,8,["modelValue","onChange"])])])])])]),_4,(l(!0),c(L,null,R(i.outputs,O=>(l(),$(q,{key:O.id,output:O},null,8,["output"]))),128)),u4,t("div",m4,[t("div",h4,[t("div",p4,[t("div",f4,[t("a",{class:S(["button is-white is-small",{"is-loading":o.loading}])},[t("span",{class:S(["icon fd-has-action",{"has-text-grey-light":!o.playing&&!o.loading,"is-loading":o.loading}]),onClick:e[4]||(e[4]=(...O)=>i.togglePlay&&i.togglePlay(...O))},g4,2)],2)]),t("div",b4,[t("div",k4,[t("p",{class:S(["heading",{"has-text-grey-light":!o.playing}])},$4,2),_(A,{modelValue:o.stream_volume,"onUpdate:modelValue":e[5]||(e[5]=O=>o.stream_volume=O),min:0,max:100,step:1,tooltips:!1,disabled:!o.playing,classes:{target:"slider"},onChange:i.set_stream_volume},null,8,["modelValue","disabled","onChange"])])])])])]),x4,t("div",C4,[t("div",S4,[t("div",A4,[t("div",q4,[_(F,{class:"button"}),_(rt,{class:"button"}),_(dt,{class:"button"})])])])])])],2)]),t("div",{class:S(["navbar-menu is-hidden-desktop",{"is-active":i.show_player_menu}])},[P4,t("div",T4,[t("div",L4,[t("div",R4,[_(F,{class:"button",icon_style:"mdi-18px"}),_(rt,{class:"button",icon_style:"mdi-18px"}),_(dt,{class:"button",icon_style:"mdi-18px"})])]),I4,t("div",U4,[t("div",E4,[t("div",O4,[t("div",D4,[t("a",{class:"button is-white is-small",onClick:e[6]||(e[6]=(...O)=>i.toggle_mute_volume&&i.toggle_mute_volume(...O))},[t("span",N4,[t("i",{class:S(["mdi mdi-18px",{"mdi-volume-off":i.player.volume<=0,"mdi-volume-high":i.player.volume>0}])},null,2)])])]),t("div",z4,[t("div",V4,[B4,_(A,{modelValue:i.player.volume,"onUpdate:modelValue":e[7]||(e[7]=O=>i.player.volume=O),min:0,max:100,step:1,tooltips:!1,classes:{target:"slider"},onChange:i.set_volume},null,8,["modelValue","onChange"])])])])])]),(l(!0),c(L,null,R(i.outputs,O=>(l(),$(q,{key:O.id,output:O},null,8,["output"]))),128)),F4,t("div",M4,[t("div",j4,[t("div",G4,[t("div",H4,[t("a",{class:S(["button is-white is-small",{"is-loading":o.loading}])},[t("span",{class:S(["icon fd-has-action",{"has-text-grey-light":!o.playing&&!o.loading,"is-loading":o.loading}]),onClick:e[8]||(e[8]=(...O)=>i.togglePlay&&i.togglePlay(...O))},K4,2)],2)]),t("div",Y4,[t("div",Q4,[t("p",{class:S(["heading",{"has-text-grey-light":!o.playing}])},Z4,2),_(A,{modelValue:o.stream_volume,"onUpdate:modelValue":e[9]||(e[9]=O=>o.stream_volume=O),min:0,max:100,step:1,tooltips:!1,disabled:!o.playing,classes:{target:"slider"},onChange:i.set_stream_volume},null,8,["modelValue","disabled","onChange"])])])])])])])],2)],6)}var s8=w(W3,[["render",t8]]);const e8={name:"NotificationList",components:{},data(){return{showNav:!1}},computed:{notifications(){return this.$store.state.notifications.list}},methods:{remove:function(s){this.$store.commit(Wt,s)}}},i8={key:0,class:"fd-notifications"},o8={class:"columns is-centered"},a8={class:"column is-half"},n8=["onClick"];function l8(s,e,a,r,o,i){return i.notifications.length>0?(l(),c("section",i8,[t("div",o8,[t("div",a8,[(l(!0),c(L,null,R(i.notifications,n=>(l(),c("div",{key:n.id,class:S(["notification has-shadow",["notification",n.type?`is-${n.type}`:""]])},[t("button",{class:"delete",onClick:p=>i.remove(n)},null,8,n8),C(" "+u(n.text),1)],2))),128))])])])):y("",!0)}var r8=w(e8,[["render",l8]]);const d8={name:"ModalDialogRemotePairing",props:["show"],emits:["close"],data(){return{pairing_req:{pin:""}}},computed:{pairing(){return this.$store.state.pairing}},watch:{show(){this.show&&(this.loading=!1,setTimeout(()=>{this.$refs.pin_field.focus()},10))}},methods:{kickoff_pairing(){f.pairing_kickoff(this.pairing_req).then(()=>{this.pairing_req.pin=""})}}},c8={key:0,class:"modal is-active"},_8={class:"modal-content fd-modal-card"},u8={class:"card"},m8={class:"card-content"},h8=t("p",{class:"title is-4"},"Remote pairing request",-1),p8={class:"label"},f8={class:"field"},y8={class:"control"},g8={class:"card-footer"},b8=t("span",{class:"icon"},[t("i",{class:"mdi mdi-cancel"})],-1),k8=t("span",{class:"is-size-7"},"Cancel",-1),w8=[b8,k8],v8=t("span",{class:"icon"},[t("i",{class:"mdi mdi-cellphone-iphone"})],-1),$8=t("span",{class:"is-size-7"},"Pair Remote",-1),x8=[v8,$8];function C8(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",c8,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",_8,[t("div",u8,[t("div",m8,[h8,t("form",{onSubmit:e[2]||(e[2]=E((...n)=>i.kickoff_pairing&&i.kickoff_pairing(...n),["prevent"]))},[t("label",p8,u(i.pairing.remote),1),t("div",f8,[t("div",y8,[D(t("input",{ref:"pin_field","onUpdate:modelValue":e[1]||(e[1]=n=>o.pairing_req.pin=n),class:"input",type:"text",placeholder:"Enter pairing code"},null,512),[[V,o.pairing_req.pin]])])])],32)]),t("footer",g8,[t("a",{class:"card-footer-item has-text-danger",onClick:e[3]||(e[3]=n=>s.$emit("close"))},w8),t("a",{class:"card-footer-item has-background-info has-text-white has-text-weight-bold",onClick:e[4]||(e[4]=(...n)=>i.kickoff_pairing&&i.kickoff_pairing(...n))},x8)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[5]||(e[5]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var S8=w(d8,[["render",C8]]);const A8={name:"ModalDialogUpdate",components:{ModalDialog:as},props:["show"],emits:["close"],data(){return{rescan_metadata:!1}},computed:{library(){return this.$store.state.library},rss(){return this.$store.state.rss_count},spotify_enabled(){return this.$store.state.spotify.webapi_token_valid},update_dialog_scan_kind:{get(){return this.$store.state.update_dialog_scan_kind},set(s){this.$store.commit(os,s)}}},methods:{update_library(){this.rescan_metadata?f.library_rescan(this.update_dialog_scan_kind):f.library_update(this.update_dialog_scan_kind)},close(){this.update_dialog_scan_kind="",this.$emit("close")}}},q8={key:0},P8=t("p",{class:"mb-3"},"Scan for new, deleted and modified files",-1),T8={key:0,class:"field"},L8={class:"control"},R8={class:"select is-small"},I8=t("option",{value:""},"Update everything",-1),U8=t("option",{value:"files"},"Only update local library",-1),E8={key:0,value:"spotify"},O8={key:1,value:"rss"},D8={class:"field"},N8={class:"checkbox is-size-7 is-small"},z8=C(" Rescan metadata for unmodified files "),V8={key:1},B8=t("p",{class:"mb-3"},"Library update in progress ...",-1),F8=[B8];function M8(s,e,a,r,o,i){const n=m("modal-dialog");return l(),$(n,{show:a.show,title:"Update library",ok_action:i.library.updating?"":"Rescan",close_action:"Close",onOk:i.update_library,onClose:e[2]||(e[2]=p=>i.close())},{"modal-content":d(()=>[i.library.updating?(l(),c("div",V8,F8)):(l(),c("div",q8,[P8,i.spotify_enabled||i.rss.tracks>0?(l(),c("div",T8,[t("div",L8,[t("div",R8,[D(t("select",{"onUpdate:modelValue":e[0]||(e[0]=p=>i.update_dialog_scan_kind=p)},[I8,U8,i.spotify_enabled?(l(),c("option",E8," Only update Spotify ")):y("",!0),i.rss.tracks>0?(l(),c("option",O8," Only update RSS feeds ")):y("",!0)],512),[[ee,i.update_dialog_scan_kind]])])])])):y("",!0),t("div",D8,[t("label",N8,[D(t("input",{"onUpdate:modelValue":e[1]||(e[1]=p=>o.rescan_metadata=p),type:"checkbox"},null,512),[[Y,o.rescan_metadata]]),z8])])]))]),_:1},8,["show","ok_action","onOk"])}var j8=w(A8,[["render",M8]]);const G8={name:"App",components:{NavbarTop:XC,NavbarBottom:s8,NotificationList:r8,ModalDialogRemotePairing:S8,ModalDialogUpdate:j8},data(){return{token_timer_id:0,reconnect_attempts:0,pairing_active:!1}},computed:{show_burger_menu:{get(){return this.$store.state.show_burger_menu},set(s){this.$store.commit(Q,s)}},show_player_menu:{get(){return this.$store.state.show_player_menu},set(s){this.$store.commit(J,s)}},show_update_dialog:{get(){return this.$store.state.show_update_dialog},set(s){this.$store.commit(et,s)}}},watch:{show_burger_menu(){this.update_is_clipped()},show_player_menu(){this.update_is_clipped()}},created:function(){K.locale(navigator.language),this.connect(),this.$Progress.start(),this.$router.beforeEach((s,e,a)=>{if(s.meta.show_progress){if(s.meta.progress!==void 0){const r=s.meta.progress;this.$Progress.parseMeta(r)}this.$Progress.start()}a()}),this.$router.afterEach((s,e)=>{s.meta.show_progress&&this.$Progress.finish()})},methods:{connect:function(){f.config().then(({data:s})=>{this.$store.commit(gs,s),this.$store.commit(Ft,s.hide_singles),document.title=s.library_name,this.open_ws(),this.$Progress.finish()}).catch(()=>{this.$store.dispatch("add_notification",{text:"Failed to connect to OwnTone server",type:"danger",topic:"connection"})})},open_ws:function(){if(this.$store.state.config.websocket_port<=0)return;const s=this;let e="ws://";window.location.protocol==="https:"&&(e="wss://");let a=e+window.location.hostname+":"+s.$store.state.config.websocket_port;const r=new ie(a,"notify",{reconnectInterval:1e3,maxReconnectInterval:2e3});r.onopen=function(){s.reconnect_attempts=0,r.send(JSON.stringify({notify:["update","database","player","options","outputs","volume","queue","spotify","lastfm","pairing"]})),s.update_outputs(),s.update_player_status(),s.update_library_stats(),s.update_settings(),s.update_queue(),s.update_spotify(),s.update_lastfm(),s.update_pairing()},r.onclose=function(){},r.onerror=function(){console.log("refreshing"),r.refresh(),s.$forceUpdate(),console.log("refreshed"),s.reconnect_attempts++},window.addEventListener("focus",function(){console.log("got focus"),r.onerror()}),window.addEventListener("visibilitychange",function(){console.log("visibility change"),r.onerror()}),r.onmessage=function(o){const i=JSON.parse(o.data);(i.notify.includes("update")||i.notify.includes("database"))&&s.update_library_stats(),(i.notify.includes("player")||i.notify.includes("options")||i.notify.includes("volume"))&&s.update_player_status(),(i.notify.includes("outputs")||i.notify.includes("volume"))&&s.update_outputs(),i.notify.includes("queue")&&s.update_queue(),i.notify.includes("spotify")&&s.update_spotify(),i.notify.includes("lastfm")&&s.update_lastfm(),i.notify.includes("pairing")&&s.update_pairing()}},update_library_stats:function(){f.library_stats().then(({data:s})=>{this.$store.commit(ks,s)}),f.library_count("media_kind is audiobook").then(({data:s})=>{this.$store.commit(ws,s)}),f.library_count("media_kind is podcast").then(({data:s})=>{this.$store.commit(vs,s)}),f.library_count("scan_kind is rss").then(({data:s})=>{this.$store.commit($s,s)})},update_outputs:function(){f.outputs().then(({data:s})=>{this.$store.commit(xs,s.outputs)})},update_player_status:function(){f.player_status().then(({data:s})=>{this.$store.commit(Zt,s)})},update_queue:function(){f.queue().then(({data:s})=>{this.$store.commit(Cs,s)})},update_settings:function(){f.settings().then(({data:s})=>{this.$store.commit(bs,s)})},update_lastfm:function(){f.lastfm().then(({data:s})=>{this.$store.commit(Ss,s)})},update_spotify:function(){f.spotify().then(({data:s})=>{this.$store.commit(As,s),this.token_timer_id>0&&(window.clearTimeout(this.token_timer_id),this.token_timer_id=0),s.webapi_token_expires_in>0&&s.webapi_token&&(this.token_timer_id=window.setTimeout(this.update_spotify,1e3*s.webapi_token_expires_in))})},update_pairing:function(){f.pairing().then(({data:s})=>{this.$store.commit(qs,s),this.pairing_active=s.active})},update_is_clipped:function(){this.show_burger_menu||this.show_player_menu?document.querySelector("html").classList.add("is-clipped"):document.querySelector("html").classList.remove("is-clipped")}},template:"<App/>"},H8={id:"app"};function W8(s,e,a,r,o,i){const n=m("navbar-top"),p=m("vue-progress-bar"),h=m("router-view"),k=m("modal-dialog-remote-pairing"),b=m("modal-dialog-update"),g=m("notification-list"),v=m("navbar-bottom");return l(),c("div",H8,[_(n),_(p,{class:"fd-progress-bar"}),_(h,null,{default:d(({Component:A})=>[(l(),$(oe(A),{class:"fd-page"}))]),_:1}),_(k,{show:o.pairing_active,onClose:e[0]||(e[0]=A=>o.pairing_active=!1)},null,8,["show"]),_(b,{show:i.show_update_dialog,onClose:e[1]||(e[1]=A=>i.show_update_dialog=!1)},null,8,["show"]),D(_(g,null,null,512),[[Vt,!i.show_burger_menu]]),_(v),D(t("div",{class:"fd-overlay-fullscreen",onClick:e[2]||(e[2]=A=>i.show_burger_menu=i.show_player_menu=!1)},null,512),[[Vt,i.show_burger_menu||i.show_player_menu]])])}var K8=w(G8,[["render",W8]]);function Ws(){const s=window.matchMedia("(prefers-color-scheme: dark)"),e=localStorage.getItem("preferred_colorscheme"),a=document.querySelector('meta[name="theme-color"]');e==="dark"||e==="system"&&s.matches?(document.documentElement.classList.add("dark-theme"),a.setAttribute("content","#000000")):(e=="light"||e==="system"&&!s.matches)&&(document.documentElement.classList.remove("dark-theme"),a.setAttribute("content","#ffffff"))}window.addEventListener("load",()=>{localStorage.getItem("preferred_colorscheme")||localStorage.setItem("preferred_colorscheme","system"),Ws()});window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",s=>{Ws()});const Ks=ae(K8).use(T).use(Gs).use(ne,{failedColor:"red",height:"1px"}).use(le).use(re,{log:!1}).use(de);Ks.config.globalProperties.$filters=rC;Ks.mount("#app");
