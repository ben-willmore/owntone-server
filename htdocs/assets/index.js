import{c as Qs,o as l,a as c,b as t,r as E,d as y,n as q,e as x,t as u,S as M,f as _,w as d,g as C,T as N,h as z,i as O,v as B,j as Js,k as h,l as v,s as Xs,m as Xt,P as Zt,p as V,F as R,q as U,u as Q,x as ts,y as Zs,z as Nt,A as Bt,B as ss,C as te,D as se,E as ee,G as Y,H as ie,R as oe,I as ae,J as ne,V as le,K as re,L as de,M as ce}from"./vendor.js";const _e=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function a(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=a(o);fetch(o.href,i)}};_e();const bs="UPDATE_CONFIG",ks="UPDATE_SETTINGS",Mt="UPDATE_SETTINGS_OPTION",ws="UPDATE_LIBRARY_STATS",vs="UPDATE_LIBRARY_AUDIOBOOKS_COUNT",$s="UPDATE_LIBRARY_PODCASTS_COUNT",xs="UPDATE_LIBRARY_RSS_COUNT",Cs="UPDATE_OUTPUTS",es="UPDATE_PLAYER_STATUS",qs="UPDATE_QUEUE",Ss="UPDATE_LASTFM",Ps="UPDATE_SPOTIFY",As="UPDATE_PAIRING",is="SPOTIFY_NEW_RELEASES",os="SPOTIFY_FEATURED_PLAYLISTS",gs="ADD_NOTIFICATION",Yt="DELETE_NOTIFICATION",as="ADD_RECENT_SEARCH",Ft="HIDE_SINGLES",ns="HIDE_SPOTIFY",Ts="ARTISTS_SORT",Rs="ARTIST_ALBUMS_SORT",Is="ALBUMS_SORT",Es="SHOW_ONLY_NEXT_ITEMS",J="SHOW_BURGER_MENU",X="SHOW_PLAYER_MENU",it="SHOW_UPDATE_DIALOG",ls="UPDATE_DIALOG_SCAN_KIND";var T=Qs({state(){return{config:{websocket_port:0,version:"",buildoptions:[]},settings:{categories:[]},library:{artists:0,albums:0,songs:0,db_playtime:0,updating:!1},audiobooks_count:{},podcasts_count:{},rss_count:{},outputs:[],player:{state:"stop",repeat:"off",consume:!1,shuffle:!1,volume:0,item_id:0,item_length_ms:0,item_progress_ms:0},queue:{version:0,count:0,items:[]},lastfm:{},spotify:{},pairing:{},spotify_new_releases:[],spotify_featured_playlists:[],notifications:{next_id:1,list:[]},search_path:"/search/library",recent_searches:[],hide_singles:!1,hide_spotify:!1,artists_sort:"Name",artist_albums_sort:"Name",albums_sort:"Name",show_only_next_items:!1,show_burger_menu:!1,show_player_menu:!1,show_update_dialog:!1,update_dialog_scan_kind:""}},getters:{now_playing:s=>{const e=s.queue.items.find(function(a){return a.id===s.player.item_id});return e===void 0?{}:e},settings_webinterface:s=>s.settings?s.settings.categories.find(e=>e.name==="webinterface"):null,settings_option_recently_added_limit:(s,e)=>{if(e.settings_webinterface){const a=e.settings_webinterface.options.find(r=>r.name==="recently_added_limit");if(a)return a.value}return 100},settings_option_show_composer_now_playing:(s,e)=>{if(e.settings_webinterface){const a=e.settings_webinterface.options.find(r=>r.name==="show_composer_now_playing");if(a)return a.value}return!1},settings_option_show_composer_for_genre:(s,e)=>{if(e.settings_webinterface){const a=e.settings_webinterface.options.find(r=>r.name==="show_composer_for_genre");if(a)return a.value}return null},settings_category:s=>e=>s.settings.categories.find(a=>a.name===e),settings_option:s=>(e,a)=>{const r=s.settings.categories.find(o=>o.name===e);return r?r.options.find(o=>o.name===a):{}}},mutations:{[bs](s,e){s.config=e},[ks](s,e){s.settings=e},[Mt](s,e){const r=s.settings.categories.find(o=>o.name===e.category).options.find(o=>o.name===e.name);r.value=e.value},[ws](s,e){s.library=e},[vs](s,e){s.audiobooks_count=e},[$s](s,e){s.podcasts_count=e},[xs](s,e){s.rss_count=e},[Cs](s,e){s.outputs=e},[es](s,e){s.player=e},[qs](s,e){s.queue=e},[Ss](s,e){s.lastfm=e},[Ps](s,e){s.spotify=e},[As](s,e){s.pairing=e},[is](s,e){s.spotify_new_releases=e},[os](s,e){s.spotify_featured_playlists=e},[gs](s,e){if(e.topic){const a=s.notifications.list.findIndex(r=>r.topic===e.topic);if(a>=0){s.notifications.list.splice(a,1,e);return}}s.notifications.list.push(e)},[Yt](s,e){const a=s.notifications.list.indexOf(e);a!==-1&&s.notifications.list.splice(a,1)},[as](s,e){const a=s.recent_searches.findIndex(r=>r===e);a>=0&&s.recent_searches.splice(a,1),s.recent_searches.splice(0,0,e),s.recent_searches.length>5&&s.recent_searches.pop()},[Ft](s,e){s.hide_singles=e},[ns](s,e){s.hide_spotify=e},[Ts](s,e){s.artists_sort=e},[Rs](s,e){s.artist_albums_sort=e},[Is](s,e){s.albums_sort=e},[Es](s,e){s.show_only_next_items=e},[J](s,e){s.show_burger_menu=e},[X](s,e){s.show_player_menu=e},[it](s,e){s.show_update_dialog=e},[ls](s,e){s.update_dialog_scan_kind=e}},actions:{add_notification({commit:s,state:e},a){const r={id:e.notifications.next_id++,type:a.type,text:a.text,topic:a.topic,timeout:a.timeout};s(gs,r),a.timeout>0&&setTimeout(()=>{s(Yt,r)},a.timeout)}}}),k=(s,e)=>{const a=s.__vccOpts||s;for(const[r,o]of e)a[r]=o;return a};const ue={name:"ContentWithHeading",data(){return{options_visible:!1}},mounted(){this.$slots.options&&(this.observer=new IntersectionObserver(this.onElementObserved,{rootMargin:"-82px 0px 0px 0px",threshold:1}),this.observer.observe(this.$refs.options_ref))},methods:{onElementObserved(s){s.forEach(({target:e,isIntersecting:a})=>{this.options_visible=a})},scroll_to_top:function(){window.scrollTo({top:0,behavior:"smooth"})},scroll_to_content:function(){this.$route.meta.has_tabs?this.$scrollTo("#top",{offset:-140}):this.$scrollTo("#top",{offset:-110})},visibilityChanged:function(s){this.options_visible=s}}},me={class:"section fd-content"},he={class:"container"},pe={class:"columns is-centered"},fe={class:"column is-four-fifths"},ye={key:0},ge={ref:"options_ref",style:{height:"1px"}},be={class:"buttons is-centered",style:{"margin-bottom":"6px","margin-top":"16px"}},ke=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-chevron-up"})],-1),we=[ke],ve=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-chevron-down"})],-1),$e=[ve],xe={id:"top",class:"level"},Ce={class:"level-left"},qe={class:"level-item has-text-centered-mobile"},Se={class:"level-right has-text-centered-mobile"},Pe={style:{"margin-top":"16px"}};function Ae(s,e,a,r,o,i){return l(),c("section",me,[t("div",he,[t("div",pe,[t("div",fe,[s.$slots.options?(l(),c("section",ye,[t("div",ge,null,512),E(s.$slots,"options"),t("nav",be,[o.options_visible?(l(),c("a",{key:1,class:"button is-small is-white",onClick:e[1]||(e[1]=(...n)=>i.scroll_to_content&&i.scroll_to_content(...n))},$e)):(l(),c("a",{key:0,class:"button is-small is-white",onClick:e[0]||(e[0]=(...n)=>i.scroll_to_top&&i.scroll_to_top(...n))},we))])])):y("",!0),t("div",{class:q({"fd-content-with-option":s.$slots.options})},[t("nav",xe,[t("div",Ce,[t("div",qe,[t("div",null,[E(s.$slots,"heading-left")])])]),t("div",Se,[E(s.$slots,"heading-right")])]),E(s.$slots,"content"),t("div",Pe,[E(s.$slots,"footer")])],2)])])])])}var I=k(ue,[["render",Ae]]);x.interceptors.response.use(function(s){return s},function(s){return s.request.status&&s.request.responseURL&&T.dispatch("add_notification",{text:"Request failed (status: "+s.request.status+" "+s.request.statusText+", url: "+s.request.responseURL+")",type:"danger"}),Promise.reject(s)});var p={config(){return x.get("./api/config")},settings(){return x.get("./api/settings")},settings_update(s,e){return x.put("./api/settings/"+s+"/"+e.name,e)},library_stats(){return x.get("./api/library")},library_update(s){const e={};return s&&(e.scan_kind=s),x.put("./api/update",void 0,{params:e})},library_rescan(s){const e={};return s&&(e.scan_kind=s),x.put("./api/rescan",void 0,{params:e})},library_count(s){return x.get("./api/library/count?expression="+s)},queue(){return x.get("./api/queue")},queue_clear(){return x.put("./api/queue/clear")},queue_remove(s){return x.delete("./api/queue/items/"+s)},queue_move(s,e){return x.put("./api/queue/items/"+s+"?new_position="+e)},queue_add(s){return x.post("./api/queue/items/add?uris="+s).then(e=>(T.dispatch("add_notification",{text:e.data.count+" tracks appended to queue",type:"info",timeout:2e3}),Promise.resolve(e)))},queue_add_next(s){let e=0;return T.getters.now_playing&&T.getters.now_playing.id&&(e=T.getters.now_playing.position+1),x.post("./api/queue/items/add?uris="+s+"&position="+e).then(a=>(T.dispatch("add_notification",{text:a.data.count+" tracks appended to queue",type:"info",timeout:2e3}),Promise.resolve(a)))},queue_expression_add(s){const e={};return e.expression=s,x.post("./api/queue/items/add",void 0,{params:e}).then(a=>(T.dispatch("add_notification",{text:a.data.count+" tracks appended to queue",type:"info",timeout:2e3}),Promise.resolve(a)))},queue_expression_add_next(s){const e={};return e.expression=s,e.position=0,T.getters.now_playing&&T.getters.now_playing.id&&(e.position=T.getters.now_playing.position+1),x.post("./api/queue/items/add",void 0,{params:e}).then(a=>(T.dispatch("add_notification",{text:a.data.count+" tracks appended to queue",type:"info",timeout:2e3}),Promise.resolve(a)))},queue_save_playlist(s){return x.post("./api/queue/save",void 0,{params:{name:s}}).then(e=>(T.dispatch("add_notification",{text:'Queue saved to playlist "'+s+'"',type:"info",timeout:2e3}),Promise.resolve(e)))},player_status(){return x.get("./api/player")},player_play_uri(s,e,a=void 0){const r={};return r.uris=s,r.shuffle=e?"true":"false",r.clear="true",r.playback="start",r.playback_from_position=a,x.post("./api/queue/items/add",void 0,{params:r})},player_play_expression(s,e,a=void 0){const r={};return r.expression=s,r.shuffle=e?"true":"false",r.clear="true",r.playback="start",r.playback_from_position=a,x.post("./api/queue/items/add",void 0,{params:r})},player_play(s={}){return x.put("./api/player/play",void 0,{params:s})},player_playpos(s){return x.put("./api/player/play?position="+s)},player_playid(s){return x.put("./api/player/play?item_id="+s)},player_pause(){return x.put("./api/player/pause")},player_stop(){return x.put("./api/player/stop")},player_next(){return x.put("./api/player/next")},player_previous(){return x.put("./api/player/previous")},player_shuffle(s){const e=s?"true":"false";return x.put("./api/player/shuffle?state="+e)},player_consume(s){const e=s?"true":"false";return x.put("./api/player/consume?state="+e)},player_repeat(s){return x.put("./api/player/repeat?state="+s)},player_volume(s){return x.put("./api/player/volume?volume="+s)},player_output_volume(s,e){return x.put("./api/player/volume?volume="+e+"&output_id="+s)},player_seek_to_pos(s){return x.put("./api/player/seek?position_ms="+s)},player_seek(s){return x.put("./api/player/seek?seek_ms="+s)},outputs(){return x.get("./api/outputs")},output_update(s,e){return x.put("./api/outputs/"+s,e)},output_toggle(s){return x.put("./api/outputs/"+s+"/toggle")},library_artists(s=void 0){return x.get("./api/library/artists",{params:{media_kind:s}})},library_artist(s){return x.get("./api/library/artists/"+s)},library_artist_albums(s){return x.get("./api/library/artists/"+s+"/albums")},library_albums(s=void 0){return x.get("./api/library/albums",{params:{media_kind:s}})},library_album(s){return x.get("./api/library/albums/"+s)},library_album_tracks(s,e={limit:-1,offset:0}){return x.get("./api/library/albums/"+s+"/tracks",{params:e})},library_album_track_update(s,e){return x.put("./api/library/albums/"+s+"/tracks",void 0,{params:e})},library_genres(){return x.get("./api/library/genres")},library_genre(s){const e={type:"albums",media_kind:"music",expression:'genre is "'+s+'"'};return x.get("./api/search",{params:e})},library_genre_tracks(s){const e={type:"tracks",media_kind:"music",expression:'genre is "'+s+'"'};return x.get("./api/search",{params:e})},library_radio_streams(){const s={type:"tracks",media_kind:"music",expression:"data_kind is url and song_length = 0"};return x.get("./api/search",{params:s})},library_composers(){return x.get("./api/library/composers")},library_composer(s){const e={type:"albums",media_kind:"music",expression:'composer is "'+s+'"'};return x.get("./api/search",{params:e})},library_composer_tracks(s){const e={type:"tracks",media_kind:"music",expression:'composer is "'+s+'"'};return x.get("./api/search",{params:e})},library_artist_tracks(s){if(s){const e={type:"tracks",expression:'songartistid is "'+s+'"'};return x.get("./api/search",{params:e})}},library_podcasts_new_episodes(){const s={type:"tracks",expression:"media_kind is podcast and play_count = 0 ORDER BY time_added DESC"};return x.get("./api/search",{params:s})},library_podcast_episodes(s){const e={type:"tracks",expression:'media_kind is podcast and songalbumid is "'+s+'" ORDER BY date_released DESC'};return x.get("./api/search",{params:e})},library_add(s){return x.post("./api/library/add",void 0,{params:{url:s}})},library_playlist_delete(s){return x.delete("./api/library/playlists/"+s,void 0)},library_playlists(){return x.get("./api/library/playlists")},library_playlist_folder(s=0){return x.get("./api/library/playlists/"+s+"/playlists")},library_playlist(s){return x.get("./api/library/playlists/"+s)},library_playlist_tracks(s){return x.get("./api/library/playlists/"+s+"/tracks")},library_track(s){return x.get("./api/library/tracks/"+s)},library_track_playlists(s){return x.get("./api/library/tracks/"+s+"/playlists")},library_track_update(s,e={}){return x.put("./api/library/tracks/"+s,void 0,{params:e})},library_files(s=void 0){const e={directory:s};return x.get("./api/library/files",{params:e})},search(s){return x.get("./api/search",{params:s})},spotify(){return x.get("./api/spotify")},spotify_login(s){return x.post("./api/spotify-login",s)},spotify_logout(){return x.get("./api/spotify-logout")},lastfm(){return x.get("./api/lastfm")},lastfm_login(s){return x.post("./api/lastfm-login",s)},lastfm_logout(s){return x.get("./api/lastfm-logout")},pairing(){return x.get("./api/pairing")},pairing_kickoff(s){return x.post("./api/pairing",s)},artwork_url_append_size_params(s,e=600,a=600){return s&&s.startsWith("/")?s.includes("?")?s+"&maxwidth="+e+"&maxheight="+a:s+"?maxwidth="+e+"&maxheight="+a:s}};const Te={name:"ListItemQueueItem",props:["item","position","current_position","show_only_next_items","edit_mode"],computed:{state(){return this.$store.state.player},is_next(){return this.current_position<0||this.position>=this.current_position}},methods:{play:function(){p.player_play({item_id:this.item.id})}}},Re={key:0,class:"media"},Ie={key:0,class:"media-left"},Ee=t("span",{class:"icon has-text-grey fd-is-movable handle"},[t("i",{class:"mdi mdi-drag-horizontal mdi-18px"})],-1),Le=[Ee],Ue={class:"media-right"};function Oe(s,e,a,r,o,i){return i.is_next||!a.show_only_next_items?(l(),c("div",Re,[a.edit_mode?(l(),c("div",Ie,Le)):y("",!0),t("div",{class:"media-content fd-has-action is-clipped",onClick:e[0]||(e[0]=(...n)=>i.play&&i.play(...n))},[t("h1",{class:q(["title is-6",{"has-text-primary":a.item.id===i.state.item_id,"has-text-grey-light":!i.is_next}])},u(a.item.title),3),t("h2",{class:q(["subtitle is-7",{"has-text-primary":a.item.id===i.state.item_id,"has-text-grey-light":!i.is_next,"has-text-grey":i.is_next&&a.item.id!==i.state.item_id}])},[t("b",null,u(a.item.artist),1)],2),t("h2",{class:q(["subtitle is-7",{"has-text-primary":a.item.id===i.state.item_id,"has-text-grey-light":!i.is_next,"has-text-grey":i.is_next&&a.item.id!==i.state.item_id}])},u(a.item.album),3)]),t("div",Ue,[E(s.$slots,"actions")])])):y("",!0)}var De=k(Te,[["render",Oe]]);const ze={name:"ModalDialogQueueItem",props:["show","item"],emits:["close"],data(){return{spotify_track:{}}},watch:{item(){if(this.item&&this.item.data_kind==="spotify"){const s=new M;s.setAccessToken(this.$store.state.spotify.webapi_token),s.getTrack(this.item.path.slice(this.item.path.lastIndexOf(":")+1)).then(e=>{this.spotify_track=e})}else this.spotify_track={}}},methods:{remove:function(){this.$emit("close"),p.queue_remove(this.item.id)},play:function(){this.$emit("close"),p.player_play({item_id:this.item.id})},open_album:function(){this.media_kind==="podcast"?this.$router.push({path:"/podcasts/"+this.item.album_id}):this.media_kind==="audiobook"?this.$router.push({path:"/audiobooks/"+this.item.album_id}):this.$router.push({path:"/music/albums/"+this.item.album_id})},open_album_artist:function(){this.$router.push({path:"/music/artists/"+this.item.album_artist_id})},open_genre:function(){this.$router.push({name:"Genre",params:{genre:this.item.genre}})},open_spotify_artist:function(){this.$emit("close"),this.$router.push({path:"/music/spotify/artists/"+this.spotify_track.artists[0].id})},open_spotify_album:function(){this.$emit("close"),this.$router.push({path:"/music/spotify/albums/"+this.spotify_track.album.id})}}},Ne={key:0,class:"modal is-active"},Ve={class:"modal-content fd-modal-card"},Be={class:"card"},Me={class:"card-content"},Fe={class:"title is-4"},je={class:"subtitle"},Ge={class:"content is-small"},Ke=t("span",{class:"heading"},"Album",-1),He={key:1,class:"title is-6"},We={key:0},Ye=t("span",{class:"heading"},"Album artist",-1),Qe={key:1,class:"title is-6"},Je={key:1},Xe=t("span",{class:"heading"},"Composer",-1),Ze={class:"title is-6"},ti={key:2},si=t("span",{class:"heading"},"Year",-1),ei={class:"title is-6"},ii={key:3},oi=t("span",{class:"heading"},"Genre",-1),ai=t("span",{class:"heading"},"Track / Disc",-1),ni={class:"title is-6"},li=t("span",{class:"heading"},"Length",-1),ri={class:"title is-6"},di=t("span",{class:"heading"},"Path",-1),ci={class:"title is-6"},_i=t("span",{class:"heading"},"Type",-1),ui={class:"title is-6"},mi={key:0,class:"has-text-weight-normal"},hi=C("("),pi=C(", "),fi=C(")"),yi=t("span",{class:"heading"},"Quality",-1),gi={class:"title is-6"},bi={key:0},ki={key:1},wi={key:2},vi={class:"card-footer"},$i=t("span",{class:"icon"},[t("i",{class:"mdi mdi-delete"})],-1),xi=t("span",{class:"is-size-7"},"Remove",-1),Ci=[$i,xi],qi=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),Si=t("span",{class:"is-size-7"},"Play",-1),Pi=[qi,Si];function Ai(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",Ne,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",Ve,[t("div",Be,[t("div",Me,[t("p",Fe,u(a.item.title),1),t("p",je,u(a.item.artist),1),t("div",Ge,[t("p",null,[Ke,a.item.album_id?(l(),c("a",{key:0,class:"title is-6 has-text-link",onClick:e[1]||(e[1]=(...n)=>i.open_album&&i.open_album(...n))},u(a.item.album),1)):(l(),c("span",He,u(a.item.album),1))]),a.item.album_artist?(l(),c("p",We,[Ye,a.item.album_artist_id?(l(),c("a",{key:0,class:"title is-6 has-text-link",onClick:e[2]||(e[2]=(...n)=>i.open_album_artist&&i.open_album_artist(...n))},u(a.item.album_artist),1)):(l(),c("span",Qe,u(a.item.album_artist),1))])):y("",!0),a.item.composer?(l(),c("p",Je,[Xe,t("span",Ze,u(a.item.composer),1)])):y("",!0),a.item.year>0?(l(),c("p",ti,[si,t("span",ei,u(a.item.year),1)])):y("",!0),a.item.genre?(l(),c("p",ii,[oi,t("a",{class:"title is-6 has-text-link",onClick:e[3]||(e[3]=(...n)=>i.open_genre&&i.open_genre(...n))},u(a.item.genre),1)])):y("",!0),t("p",null,[ai,t("span",ni,u(a.item.track_number)+" / "+u(a.item.disc_number),1)]),t("p",null,[li,t("span",ri,u(s.$filters.duration(a.item.length_ms)),1)]),t("p",null,[di,t("span",ci,u(a.item.path),1)]),t("p",null,[_i,t("span",ui,[C(u(a.item.media_kind)+" - "+u(a.item.data_kind)+" ",1),a.item.data_kind==="spotify"?(l(),c("span",mi,[hi,t("a",{onClick:e[4]||(e[4]=(...n)=>i.open_spotify_artist&&i.open_spotify_artist(...n))},"artist"),pi,t("a",{onClick:e[5]||(e[5]=(...n)=>i.open_spotify_album&&i.open_spotify_album(...n))},"album"),fi])):y("",!0)])]),t("p",null,[yi,t("span",gi,[C(u(a.item.type)+" ",1),a.item.samplerate?(l(),c("span",bi," | "+u(a.item.samplerate)+" Hz",1)):y("",!0),a.item.channels?(l(),c("span",ki," | "+u(s.$filters.channels(a.item.channels)),1)):y("",!0),a.item.bitrate?(l(),c("span",wi," | "+u(a.item.bitrate)+" Kb/s",1)):y("",!0)])])])]),t("footer",vi,[t("a",{class:"card-footer-item has-text-dark",onClick:e[6]||(e[6]=(...n)=>i.remove&&i.remove(...n))},Ci),t("a",{class:"card-footer-item has-text-dark",onClick:e[7]||(e[7]=(...n)=>i.play&&i.play(...n))},Pi)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[8]||(e[8]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var Ls=k(ze,[["render",Ai]]);const Ti={name:"ModalDialogAddUrlStream",props:["show"],emits:["close"],data(){return{url:"",loading:!1}},watch:{show(){this.show&&(this.loading=!1,setTimeout(()=>{this.$refs.url_field.focus()},10))}},methods:{add_stream:function(){this.loading=!0,p.queue_add(this.url).then(()=>{this.$emit("close"),this.url=""}).catch(()=>{this.loading=!1})},play:function(){this.loading=!0,p.player_play_uri(this.url,!1).then(()=>{this.$emit("close"),this.url=""}).catch(()=>{this.loading=!1})}}},Ri={key:0,class:"modal is-active"},Ii={class:"modal-content fd-modal-card"},Ei={class:"card"},Li={class:"card-content"},Ui=t("p",{class:"title is-4"},"Add stream URL",-1),Oi={class:"field"},Di={class:"control is-expanded has-icons-left"},zi=["disabled"],Ni=t("span",{class:"icon is-left"},[t("i",{class:"mdi mdi-web"})],-1),Vi={key:0,class:"card-footer"},Bi=t("a",{class:"card-footer-item has-text-dark"},[t("span",{class:"icon"},[t("i",{class:"mdi mdi-web"})]),t("span",{class:"is-size-7"},"Loading ...")],-1),Mi=[Bi],Fi={key:1,class:"card-footer"},ji=t("span",{class:"icon"},[t("i",{class:"mdi mdi-cancel"})],-1),Gi=t("span",{class:"is-size-7"},"Cancel",-1),Ki=[ji,Gi],Hi=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),Wi=t("span",{class:"is-size-7"},"Add",-1),Yi=[Hi,Wi],Qi=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),Ji=t("span",{class:"is-size-7"},"Play",-1),Xi=[Qi,Ji];function Zi(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",Ri,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",Ii,[t("div",Ei,[t("div",Li,[Ui,t("form",{class:"fd-has-margin-bottom",onSubmit:e[2]||(e[2]=z((...n)=>i.play&&i.play(...n),["prevent"]))},[t("div",Oi,[t("p",Di,[O(t("input",{ref:"url_field","onUpdate:modelValue":e[1]||(e[1]=n=>o.url=n),class:"input is-shadowless",type:"text",placeholder:"http://url-to-stream",disabled:o.loading},null,8,zi),[[B,o.url]]),Ni])])],32)]),o.loading?(l(),c("footer",Vi,Mi)):(l(),c("footer",Fi,[t("a",{class:"card-footer-item has-text-danger",onClick:e[3]||(e[3]=n=>s.$emit("close"))},Ki),t("a",{class:"card-footer-item has-text-dark",onClick:e[4]||(e[4]=(...n)=>i.add_stream&&i.add_stream(...n))},Yi),t("a",{class:"card-footer-item has-background-info has-text-white has-text-weight-bold",onClick:e[5]||(e[5]=(...n)=>i.play&&i.play(...n))},Xi)]))])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[6]||(e[6]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var to=k(Ti,[["render",Zi]]);const so={name:"ModalDialogPlaylistSave",props:["show"],emits:["close"],data(){return{playlist_name:"",loading:!1}},watch:{show(){this.show&&(this.loading=!1,setTimeout(()=>{this.$refs.playlist_name_field.focus()},10))}},methods:{save:function(){this.playlist_name.length<1||(this.loading=!0,p.queue_save_playlist(this.playlist_name).then(()=>{this.$emit("close"),this.playlist_name=""}).catch(()=>{this.loading=!1}))}}},eo={key:0,class:"modal is-active"},io={class:"modal-content fd-modal-card"},oo={class:"card"},ao={class:"card-content"},no=t("p",{class:"title is-4"},"Save queue to playlist",-1),lo={class:"field"},ro={class:"control is-expanded has-icons-left"},co=["disabled"],_o=t("span",{class:"icon is-left"},[t("i",{class:"mdi mdi-file-music"})],-1),uo={key:0,class:"card-footer"},mo=t("a",{class:"card-footer-item has-text-dark"},[t("span",{class:"icon"},[t("i",{class:"mdi mdi-web"})]),t("span",{class:"is-size-7"},"Saving ...")],-1),ho=[mo],po={key:1,class:"card-footer"},fo=t("span",{class:"icon"},[t("i",{class:"mdi mdi-cancel"})],-1),yo=t("span",{class:"is-size-7"},"Cancel",-1),go=[fo,yo],bo=t("span",{class:"icon"},[t("i",{class:"mdi mdi-content-save"})],-1),ko=t("span",{class:"is-size-7"},"Save",-1),wo=[bo,ko];function vo(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",eo,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",io,[t("div",oo,[t("div",ao,[no,t("form",{class:"fd-has-margin-bottom",onSubmit:e[2]||(e[2]=z((...n)=>i.save&&i.save(...n),["prevent"]))},[t("div",lo,[t("p",ro,[O(t("input",{ref:"playlist_name_field","onUpdate:modelValue":e[1]||(e[1]=n=>o.playlist_name=n),class:"input is-shadowless",type:"text",placeholder:"Playlist name",disabled:o.loading},null,8,co),[[B,o.playlist_name]]),_o])])],32)]),o.loading?(l(),c("footer",uo,ho)):(l(),c("footer",po,[t("a",{class:"card-footer-item has-text-danger",onClick:e[3]||(e[3]=n=>s.$emit("close"))},go),t("a",{class:"card-footer-item has-background-info has-text-white has-text-weight-bold",onClick:e[4]||(e[4]=(...n)=>i.save&&i.save(...n))},wo)]))])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[5]||(e[5]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var $o=k(so,[["render",vo]]);const xo={name:"PageQueue",components:{ContentWithHeading:I,ListItemQueueItem:De,draggable:Js,ModalDialogQueueItem:Ls,ModalDialogAddUrlStream:to,ModalDialogPlaylistSave:$o},data(){return{edit_mode:!1,show_details_modal:!1,show_url_modal:!1,show_pls_save_modal:!1,selected_item:{}}},computed:{state(){return this.$store.state.player},is_queue_save_allowed(){return this.$store.state.config.allow_modifying_stored_playlists&&this.$store.state.config.default_playlist_directory},queue(){return this.$store.state.queue},queue_items:{get(){return this.$store.state.queue.items},set(s){}},current_position(){const s=this.$store.getters.now_playing;return s===void 0||s.position===void 0?-1:this.$store.getters.now_playing.position},show_only_next_items(){return this.$store.state.show_only_next_items}},methods:{queue_clear:function(){p.queue_clear()},update_show_next_items:function(s){this.$store.commit(Es,!this.show_only_next_items)},remove:function(s){p.queue_remove(s.id)},move_item:function(s){const e=this.show_only_next_items?s.oldIndex+this.current_position:s.oldIndex,a=this.queue_items[e],r=a.position+(s.newIndex-s.oldIndex);r!==e&&p.queue_move(a.id,r)},open_dialog:function(s){this.selected_item=s,this.show_details_modal=!0},open_add_stream_dialog:function(s){this.show_url_modal=!0},save_dialog:function(s){this.queue_items.length>0&&(this.show_pls_save_modal=!0)}}},Co={class:"heading"},qo=t("p",{class:"title is-4"},"Queue",-1),So={class:"buttons is-centered"},Po=t("span",{class:"icon"},[t("i",{class:"mdi mdi-arrow-collapse-down"})],-1),Ao=t("span",null,"Hide previous",-1),To=[Po,Ao],Ro=t("span",{class:"icon"},[t("i",{class:"mdi mdi-web"})],-1),Io=t("span",null,"Add Stream",-1),Eo=[Ro,Io],Lo=t("span",{class:"icon"},[t("i",{class:"mdi mdi-pencil"})],-1),Uo=t("span",null,"Edit",-1),Oo=[Lo,Uo],Do=t("span",{class:"icon"},[t("i",{class:"mdi mdi-delete-empty"})],-1),zo=t("span",null,"Clear",-1),No=[Do,zo],Vo=["disabled"],Bo=t("span",{class:"icon"},[t("i",{class:"mdi mdi-content-save"})],-1),Mo=t("span",null,"Save",-1),Fo=[Bo,Mo],jo=["onClick"],Go=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),Ko=[Go],Ho=["onClick"],Wo=t("span",{class:"icon has-text-grey"},[t("i",{class:"mdi mdi-delete mdi-18px"})],-1),Yo=[Wo];function Qo(s,e,a,r,o,i){const n=h("list-item-queue-item"),m=h("draggable"),f=h("modal-dialog-queue-item"),g=h("modal-dialog-add-url-stream"),b=h("modal-dialog-playlist-save"),$=h("content-with-heading");return l(),v($,null,{"heading-left":d(()=>[t("p",Co,u(i.queue.count)+" tracks",1),qo]),"heading-right":d(()=>[t("div",So,[t("a",{class:q(["button is-small",{"is-info":i.show_only_next_items}]),onClick:e[0]||(e[0]=(...w)=>i.update_show_next_items&&i.update_show_next_items(...w))},To,2),t("a",{class:"button is-small",onClick:e[1]||(e[1]=(...w)=>i.open_add_stream_dialog&&i.open_add_stream_dialog(...w))},Eo),t("a",{class:q(["button is-small",{"is-info":o.edit_mode}]),onClick:e[2]||(e[2]=w=>o.edit_mode=!o.edit_mode)},Oo,2),t("a",{class:"button is-small",onClick:e[3]||(e[3]=(...w)=>i.queue_clear&&i.queue_clear(...w))},No),i.is_queue_save_allowed?(l(),c("a",{key:0,class:"button is-small",disabled:i.queue_items.length===0,onClick:e[4]||(e[4]=(...w)=>i.save_dialog&&i.save_dialog(...w))},Fo,8,Vo)):y("",!0)])]),content:d(()=>[_(m,{modelValue:i.queue_items,"onUpdate:modelValue":e[5]||(e[5]=w=>i.queue_items=w),handle:".handle","item-key":"id",onEnd:i.move_item},{item:d(({element:w,index:P})=>[_(n,{item:w,position:P,current_position:i.current_position,show_only_next_items:i.show_only_next_items,edit_mode:o.edit_mode},{actions:d(()=>[o.edit_mode?y("",!0):(l(),c("a",{key:0,onClick:z(S=>i.open_dialog(w),["prevent","stop"])},Ko,8,jo)),w.id!==i.state.item_id&&o.edit_mode?(l(),c("a",{key:1,onClick:z(S=>i.remove(w),["prevent","stop"])},Yo,8,Ho)):y("",!0)]),_:2},1032,["item","position","current_position","show_only_next_items","edit_mode"])]),_:1},8,["modelValue","onEnd"]),_(f,{show:o.show_details_modal,item:o.selected_item,onClose:e[6]||(e[6]=w=>o.show_details_modal=!1)},null,8,["show","item"]),_(g,{show:o.show_url_modal,onClose:e[7]||(e[7]=w=>o.show_url_modal=!1)},null,8,["show"]),i.is_queue_save_allowed?(l(),v(b,{key:0,show:o.show_pls_save_modal,onClose:e[8]||(e[8]=w=>o.show_pls_save_modal=!1)},null,8,["show"])):y("",!0)]),_:1})}var Jo=k(xo,[["render",Qo]]);function Xo(s){const e=s.replace(/#/,""),a=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),o=parseInt(e.substr(4,2),16);return[.299*a,.587*r,.114*o].reduce((n,m)=>n+m)/255>.5}function Zo(s){return Xo(s)?"#000000":"#ffffff"}function ta(s){const e='<svg width="'+s.width+'" height="'+s.height+'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '+s.width+" "+s.height+'" preserveAspectRatio="none"><defs><style type="text/css">    #holder text {      fill: '+s.textColor+";      font-family: "+s.fontFamily+";      font-size: "+s.fontSize+"px;      font-weight: "+s.fontWeight+';    }  </style></defs><g id="holder">  <rect width="100%" height="100%" fill="'+s.backgroundColor+'"></rect>  <g>    <text text-anchor="middle" x="50%" y="50%" dy=".3em">'+s.caption+"</text>  </g></g></svg>";return"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(e)}function Us(s,e,a){const r=Xs(e),o=Zo(r),i={width:a.width,height:a.height,textColor:o,backgroundColor:r,caption:s,fontFamily:a.font_family,fontSize:a.font_size,fontWeight:a.font_weight};return ta(i)}const sa={name:"CoverArtwork",props:["artist","album","artwork_url","maxwidth","maxheight"],emits:["click"],data(){return{width:600,height:600,font_family:"sans-serif",font_size:200,font_weight:600,lazy_lifecycle:{error:s=>{s.src=this.dataURI()}}}},computed:{artwork_url_with_size:function(){return this.maxwidth>0&&this.maxheight>0?p.artwork_url_append_size_params(this.artwork_url,this.maxwidth,this.maxheight):p.artwork_url_append_size_params(this.artwork_url)},alt_text(){return this.artist+" - "+this.album},caption(){return this.album?this.album.substring(0,2):this.artist?this.artist.substring(0,2):""}},methods:{dataURI:function(){return Us(this.caption,this.alt_text,{width:this.width,height:this.height,font_family:this.font_family,font_size:this.font_size,font_weight:this.font_weight})}}};function ea(s,e,a,r,o,i){const n=Xt("lazy");return l(),c("figure",null,[O(t("img",{onClick:e[0]||(e[0]=m=>s.$emit("click"))},null,512),[[n,{src:i.artwork_url_with_size,lifecycle:o.lazy_lifecycle}]])])}var K=k(sa,[["render",ea]]);const ia={name:"PageNowPlaying",components:{ModalDialogQueueItem:Ls,Slider:Zt,CoverArtwork:K},data(){return{item_progress_ms:0,interval_id:0,visible_progress_ms:0,progressbar_resumetime:0,expecting_update:!0,tick_tock:!1,show_details_modal:!1,selected_item:{}}},computed:{state(){return this.$store.state.player},now_playing(){return this.$store.getters.now_playing},settings_option_show_composer_now_playing(){return this.$store.getters.settings_option_show_composer_now_playing},settings_option_show_composer_for_genre(){return this.$store.getters.settings_option_show_composer_for_genre},composer(){return this.settings_option_show_composer_now_playing&&(!this.settings_option_show_composer_for_genre||this.now_playing.genre&&this.settings_option_show_composer_for_genre.toLowerCase().split(",").findIndex(s=>this.now_playing.genre.toLowerCase().indexOf(s.trim())>=0)>=0)?this.now_playing.composer:null}},watch:{state(){this.interval_id>0&&(window.clearTimeout(this.interval_id),this.interval_id=0),this.item_progress_ms=this.state.item_progress_ms,this.state.state==="play"&&(this.interval_id=window.setInterval(this.tick,1e3))}},created(){this.item_progress_ms=this.state.item_progress_ms,this.visible_progress_ms=this.state.item_progress_ms,p.player_status().then(({data:s})=>{this.$store.commit(es,s),this.state.state==="play"&&(this.interval_id=window.setInterval(this.tick,1e3))})},unmounted(){this.interval_id>0&&(window.clearTimeout(this.interval_id),this.interval_id=0)},methods:{tick:function(){this.item_progress_ms+=1e3,this.tick_tock&&Date.now()>this.progressbar_resumetime&&(this.visible_progress_ms=this.item_progress_ms,this.expecting_tick=!0),this.tick_tock=!this.tick_tock},seek:function(s){p.player_seek_to_pos(s).catch(()=>{this.item_progress_ms=this.state.item_progress_ms})},pause:function(){this.expecting_tick?this.expecting_tick=!1:this.progressbar_resumetime=Date.now()+5e3},open_dialog:function(s){this.selected_item=s,this.show_details_modal=!0}}},oa={key:0,class:"fd-is-fullheight"},aa={class:"fd-is-expanded"},na={class:"fd-has-padding-left-right"},la={class:"container has-text-centered"},ra={class:"control has-text-centered fd-progress-now-playing"},da={class:"content"},ca={class:"fd-has-padding-left-right"},_a={class:"container has-text-centered fd-has-margin-top"},ua={class:"title is-5"},ma={class:"title is-6"},ha={key:0,class:"subtitle is-6 has-text-grey has-text-weight-bold"},pa={class:"subtitle is-6"},fa={key:1,class:"fd-is-fullheight"},ya=t("div",{class:"fd-is-expanded fd-has-padding-left-right",style:{"flex-direction":"column"}},[t("div",{class:"content has-text-centered"},[t("h1",{class:"title is-5"},"Your play queue is empty"),t("p",null,"Add some tracks by browsing your library")])],-1),ga=[ya];function ba(s,e,a,r,o,i){const n=h("cover-artwork"),m=h("Slider"),f=h("modal-dialog-queue-item");return l(),c("section",null,[i.now_playing.id>0?(l(),c("div",oa,[t("div",aa,[_(n,{artwork_url:i.now_playing.artwork_url,artist:i.now_playing.artist,album:i.now_playing.album,class:"fd-cover-image fd-has-action",onClick:e[0]||(e[0]=g=>i.open_dialog(i.now_playing))},null,8,["artwork_url","artist","album"])]),t("div",na,[t("div",la,[t("p",ra,[_(m,{modelValue:o.visible_progress_ms,"onUpdate:modelValue":e[1]||(e[1]=g=>o.visible_progress_ms=g),min:0,max:i.state.item_length_ms,step:1e3,tooltips:!1,disabled:i.state.state==="stop",classes:{target:"seek-slider"},lazy:!1,onUpdate:i.pause,onChange:i.seek},null,8,["modelValue","max","disabled","onUpdate","onChange"])]),t("p",da,[t("span",null,u(s.$filters.duration(o.item_progress_ms))+" / "+u(s.$filters.duration(i.now_playing.length_ms)),1)])])]),t("div",ca,[t("div",_a,[t("h1",ua,u(i.now_playing.title),1),t("h2",ma,u(i.now_playing.artist),1),i.composer?(l(),c("h2",ha,u(i.composer),1)):y("",!0),t("h3",pa,u(i.now_playing.album),1)])])])):(l(),c("div",fa,ga)),_(f,{show:o.show_details_modal,item:o.selected_item,onClose:e[2]||(e[2]=g=>o.show_details_modal=!1)},null,8,["show","item"])])}var ka=k(ia,[["render",ba]]);const wa={name:"TabsMusic",computed:{spotify_enabled(){return this.$store.state.spotify.webapi_token_valid}}},va={class:"section fd-tabs-section"},$a={class:"container"},xa={class:"columns is-centered"},Ca={class:"column is-four-fifths"},qa={class:"tabs is-centered is-small"},Sa=["onClick","onKeypress"],Pa=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-web"})],-1),Aa=t("span",{class:""},"Browse",-1),Ta=[Pa,Aa],Ra=["onClick","onKeypress"],Ia=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-artist"})],-1),Ea=t("span",{class:""},"Artists",-1),La=[Ia,Ea],Ua=["onClick","onKeypress"],Oa=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-album"})],-1),Da=t("span",{class:""},"Albums",-1),za=[Oa,Da],Na=["onClick","onKeypress"],Va=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-speaker"})],-1),Ba=t("span",{class:""},"Genres",-1),Ma=[Va,Ba],Fa=["onClick","onKeypress"],ja=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-book-open-page-variant"})],-1),Ga=t("span",{class:""},"Composers",-1),Ka=[ja,Ga],Ha=["onClick","onKeypress"],Wa=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-spotify"})],-1),Ya=t("span",{class:""},"Spotify",-1),Qa=[Wa,Ya];function Ja(s,e,a,r,o,i){const n=h("router-link");return l(),c("section",va,[t("div",$a,[t("div",xa,[t("div",Ca,[t("div",qa,[t("ul",null,[_(n,{to:"/music/browse",custom:""},{default:d(({navigate:m,isActive:f})=>[t("li",{class:q({"is-active":f})},[t("a",{onClick:m,onKeypress:V(m,["enter"])},Ta,40,Sa)],2)]),_:1}),_(n,{to:"/music/artists",custom:""},{default:d(({navigate:m,isActive:f})=>[t("li",{class:q({"is-active":f})},[t("a",{onClick:m,onKeypress:V(m,["enter"])},La,40,Ra)],2)]),_:1}),_(n,{to:"/music/albums",custom:""},{default:d(({navigate:m,isActive:f})=>[t("li",{class:q({"is-active":f})},[t("a",{onClick:m,onKeypress:V(m,["enter"])},za,40,Ua)],2)]),_:1}),_(n,{to:"/music/genres",custom:""},{default:d(({navigate:m,isActive:f})=>[t("li",{class:q({"is-active":f})},[t("a",{onClick:m,onKeypress:V(m,["enter"])},Ma,40,Na)],2)]),_:1}),_(n,{to:"/music/composers",custom:""},{default:d(({navigate:m,isActive:f})=>[t("li",{class:q({"is-active":f})},[t("a",{onClick:m,onKeypress:V(m,["enter"])},Ka,40,Fa)],2)]),_:1}),i.spotify_enabled?(l(),v(n,{key:0,to:"/music/spotify",custom:""},{default:d(({navigate:m,isActive:f})=>[t("li",{class:q({"is-active":f})},[t("a",{onClick:m,onKeypress:V(m,["enter"])},Qa,40,Ha)],2)]),_:1})):y("",!0)])])])])])])}var j=k(wa,[["render",Ja]]);const Xa={name:"ModalDialogAlbum",components:{CoverArtwork:K},props:["show","album","media_kind","new_tracks"],emits:["close","remove-podcast","play-count-changed"],data(){return{artwork_visible:!1}},computed:{artwork_url:function(){return p.artwork_url_append_size_params(this.album.artwork_url)},media_kind_resolved:function(){return this.media_kind?this.media_kind:this.album.media_kind}},methods:{play:function(){this.$emit("close"),p.player_play_uri(this.album.uri,!1)},queue_add:function(){this.$emit("close"),p.queue_add(this.album.uri)},queue_add_next:function(){this.$emit("close"),p.queue_add_next(this.album.uri)},open_album:function(){this.media_kind_resolved==="podcast"?this.$router.push({path:"/podcasts/"+this.album.id}):this.media_kind_resolved==="audiobook"?this.$router.push({path:"/audiobooks/"+this.album.id}):this.$router.push({path:"/music/albums/"+this.album.id})},open_artist:function(){this.media_kind_resolved==="podcast"||(this.media_kind_resolved==="audiobook"?this.$router.push({path:"/audiobooks/artists/"+this.album.artist_id}):this.$router.push({path:"/music/artists/"+this.album.artist_id}))},mark_played:function(){p.library_album_track_update(this.album.id,{play_count:"played"}).then(({data:s})=>{this.$emit("play-count-changed"),this.$emit("close")})},artwork_loaded:function(){this.artwork_visible=!0},artwork_error:function(){this.artwork_visible=!1}}},Za={key:0,class:"modal is-active"},tn={class:"modal-content fd-modal-card"},sn={class:"card"},en={class:"card-content"},on={class:"title is-4"},an={key:0,class:"buttons"},nn={class:"content is-small"},ln={key:0},rn=t("span",{class:"heading"},"Album artist",-1),dn={key:1},cn=t("span",{class:"heading"},"Release date",-1),_n={class:"title is-6"},un={key:2},mn=t("span",{class:"heading"},"Year",-1),hn={class:"title is-6"},pn=t("span",{class:"heading"},"Tracks",-1),fn={class:"title is-6"},yn=t("span",{class:"heading"},"Length",-1),gn={class:"title is-6"},bn=t("span",{class:"heading"},"Type",-1),kn={class:"title is-6"},wn=t("span",{class:"heading"},"Added at",-1),vn={class:"title is-6"},$n={class:"card-footer"},xn=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),Cn=t("span",{class:"is-size-7"},"Add",-1),qn=[xn,Cn],Sn=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-play"})],-1),Pn=t("span",{class:"is-size-7"},"Add Next",-1),An=[Sn,Pn],Tn=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),Rn=t("span",{class:"is-size-7"},"Play",-1),In=[Tn,Rn];function En(s,e,a,r,o,i){const n=h("cover-artwork");return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",Za,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=m=>s.$emit("close"))}),t("div",tn,[t("div",sn,[t("div",en,[_(n,{artwork_url:a.album.artwork_url,artist:a.album.artist,album:a.album.name,class:"image is-square fd-has-margin-bottom fd-has-shadow"},null,8,["artwork_url","artist","album"]),t("p",on,[t("a",{class:"has-text-link",onClick:e[1]||(e[1]=(...m)=>i.open_album&&i.open_album(...m))},u(a.album.name),1)]),i.media_kind_resolved==="podcast"?(l(),c("div",an,[t("a",{class:"button is-small",onClick:e[2]||(e[2]=(...m)=>i.mark_played&&i.mark_played(...m))},"Mark as played"),t("a",{class:"button is-small",onClick:e[3]||(e[3]=m=>s.$emit("remove-podcast"))},"Remove podcast")])):y("",!0),t("div",nn,[a.album.artist?(l(),c("p",ln,[rn,t("a",{class:"title is-6 has-text-link",onClick:e[4]||(e[4]=(...m)=>i.open_artist&&i.open_artist(...m))},u(a.album.artist),1)])):y("",!0),a.album.date_released?(l(),c("p",dn,[cn,t("span",_n,u(s.$filters.time(a.album.date_released,"L")),1)])):a.album.year>0?(l(),c("p",un,[mn,t("span",hn,u(a.album.year),1)])):y("",!0),t("p",null,[pn,t("span",fn,u(a.album.track_count),1)]),t("p",null,[yn,t("span",gn,u(s.$filters.duration(a.album.length_ms)),1)]),t("p",null,[bn,t("span",kn,u(a.album.media_kind)+" - "+u(a.album.data_kind),1)]),t("p",null,[wn,t("span",vn,u(s.$filters.time(a.album.time_added,"L LT")),1)])])]),t("footer",$n,[t("a",{class:"card-footer-item has-text-dark",onClick:e[5]||(e[5]=(...m)=>i.queue_add&&i.queue_add(...m))},qn),t("a",{class:"card-footer-item has-text-dark",onClick:e[6]||(e[6]=(...m)=>i.queue_add_next&&i.queue_add_next(...m))},An),t("a",{class:"card-footer-item has-text-dark",onClick:e[7]||(e[7]=(...m)=>i.play&&i.play(...m))},In)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[8]||(e[8]=m=>s.$emit("close"))})])):y("",!0)]),_:1})])}var jt=k(Xa,[["render",En]]);const Ln={name:"ModalDialog",props:["show","title","ok_action","delete_action","close_action"],emits:["delete","close","ok"]},Un={key:0,class:"modal is-active"},On={class:"modal-content fd-modal-card"},Dn={class:"card"},zn={class:"card-content"},Nn={key:0,class:"title is-4"},Vn={class:"card-footer"},Bn=t("span",{class:"icon"},[t("i",{class:"mdi mdi-cancel"})],-1),Mn={class:"is-size-7"},Fn=t("span",{class:"icon"},[t("i",{class:"mdi mdi-delete"})],-1),jn={class:"is-size-7"},Gn=t("span",{class:"icon"},[t("i",{class:"mdi mdi-check"})],-1),Kn={class:"is-size-7"};function Hn(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",Un,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",On,[t("div",Dn,[t("div",zn,[a.title?(l(),c("p",Nn,u(a.title),1)):y("",!0),E(s.$slots,"modal-content")]),t("footer",Vn,[t("a",{class:"card-footer-item has-text-dark",onClick:e[1]||(e[1]=n=>s.$emit("close"))},[Bn,t("span",Mn,u(a.close_action?a.close_action:"Cancel"),1)]),a.delete_action?(l(),c("a",{key:0,class:"card-footer-item has-background-danger has-text-white has-text-weight-bold",onClick:e[2]||(e[2]=n=>s.$emit("delete"))},[Fn,t("span",jn,u(a.delete_action),1)])):y("",!0),a.ok_action?(l(),c("a",{key:1,class:"card-footer-item has-background-info has-text-white has-text-weight-bold",onClick:e[3]||(e[3]=n=>s.$emit("ok"))},[Gn,t("span",Kn,u(a.ok_action),1)])):y("",!0)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[4]||(e[4]=n=>s.$emit("close"))})])):y("",!0)]),_:3})])}var rs=k(Ln,[["render",Hn]]);const Wn={name:"ListAlbums",components:{ModalDialogAlbum:jt,ModalDialog:rs},props:["albums","media_kind","hide_group_title"],emits:["play-count-changed","podcast-deleted"],data(){return{show_details_modal:!1,selected_album:{},show_remove_podcast_modal:!1,rss_playlist_to_remove:{},artwork_options:{width:600,height:600,font_family:"sans-serif",font_size:200,font_weight:600,lazy_lifecycle:{error:s=>{s.src=this.dataURI(s.attributes.album.value,s.attributes.artist.value)}}}}},computed:{is_visible_artwork(){return this.$store.getters.settings_option("webinterface","show_cover_artwork_in_album_lists").value},media_kind_resolved:function(){return this.media_kind?this.media_kind:this.selected_album.media_kind}},methods:{open_album:function(s){this.selected_album=s,this.media_kind_resolved==="podcast"?this.$router.push({path:"/podcasts/"+s.id}):this.media_kind_resolved==="audiobook"?this.$router.push({path:"/audiobooks/"+s.id}):this.$router.push({path:"/music/albums/"+s.id})},open_dialog:function(s){this.selected_album=s,this.show_details_modal=!0},open_remove_podcast_dialog:function(){p.library_album_tracks(this.selected_album.id,{limit:1}).then(({data:s})=>{p.library_track_playlists(s.items[0].id).then(({data:e})=>{const a=e.items.filter(r=>r.type==="rss");if(a.length!==1){this.$store.dispatch("add_notification",{text:"Podcast cannot be removed. Probably it was not added as an RSS playlist.",type:"danger"});return}this.rss_playlist_to_remove=a[0],this.show_remove_podcast_modal=!0,this.show_details_modal=!1})})},play_count_changed:function(){this.$emit("play-count-changed")},remove_podcast:function(){this.show_remove_podcast_modal=!1,p.library_playlist_delete(this.rss_playlist_to_remove.id).then(()=>{this.$emit("podcast-deleted")})},artwork_url_with_size:function(s){return this.artwork_options.width>0&&this.artwork_options.height>0?p.artwork_url_append_size_params(s,this.artwork_options.width,this.artwork_options.height):p.artwork_url_append_size_params(s)},alt_text(s,e){return e+" - "+s},caption(s,e){return s?s.substring(0,2):e?e.substring(0,2):""},dataURI:function(s,e){const a=this.caption(s,e),r=this.alt_text(s,e);return Us(a,r,{width:this.artwork_options.width,height:this.artwork_options.height,font_family:this.artwork_options.font_family,font_size:this.artwork_options.font_size,font_weight:this.artwork_options.font_weight})}}},Yn={key:0,class:"mt-6 mb-5 py-2"},Qn=["id"],Jn=["onClick"],Xn={key:0,class:"media-left fd-has-action"},Zn={class:"image is-64x64 fd-has-shadow fd-has-action"},tl=["album","artist"],sl={class:"media-content fd-has-action is-clipped"},el={style:{"margin-top":"0.7rem"}},il={class:"title is-6"},ol={class:"subtitle is-7 has-text-grey"},al={key:0,class:"subtitle is-7 has-text-grey has-text-weight-normal"},nl={class:"media-right",style:{"padding-top":"0.7rem"}},ll=["onClick"],rl=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),dl=[rl],cl=t("p",null,"Permanently remove this podcast from your library?",-1),_l={class:"is-size-7"},ul=C(" (This will also remove the RSS playlist "),ml=C(".) ");function hl(s,e,a,r,o,i){const n=h("modal-dialog-album"),m=h("modal-dialog"),f=Xt("lazy");return l(),c(R,null,[(l(!0),c(R,null,U(a.albums,g=>(l(),c(R,{key:g.itemId},[!g.isItem&&!a.hide_group_title?(l(),c("div",Yn,[t("span",{id:"index_"+g.groupKey,class:"tag is-info is-light is-small has-text-weight-bold"},u(g.groupKey),9,Qn)])):g.isItem?(l(),c("div",{key:1,class:"media",onClick:b=>i.open_album(g.item)},[i.is_visible_artwork?(l(),c("div",Xn,[t("p",Zn,[t("figure",null,[O(t("img",{album:g.item.name,artist:g.item.artist},null,8,tl),[[f,{src:i.artwork_url_with_size(g.item.artwork_url),lifecycle:o.artwork_options.lazy_lifecycle}]])])])])):y("",!0),t("div",sl,[t("div",el,[t("h1",il,u(g.item.name),1),t("h2",ol,[t("b",null,u(g.item.artist),1)]),g.item.date_released&&g.item.media_kind==="music"?(l(),c("h2",al,u(s.$filters.time(g.item.date_released,"L")),1)):y("",!0)])]),t("div",nl,[t("a",{onClick:z(b=>i.open_dialog(g.item),["prevent","stop"])},dl,8,ll)])],8,Jn)):y("",!0)],64))),128)),_(n,{show:o.show_details_modal,album:o.selected_album,media_kind:a.media_kind,onRemovePodcast:e[0]||(e[0]=g=>i.open_remove_podcast_dialog()),onPlayCountChanged:e[1]||(e[1]=g=>i.play_count_changed()),onClose:e[2]||(e[2]=g=>o.show_details_modal=!1)},null,8,["show","album","media_kind"]),_(m,{show:o.show_remove_podcast_modal,title:"Remove podcast",delete_action:"Remove",onClose:e[3]||(e[3]=g=>o.show_remove_podcast_modal=!1),onDelete:i.remove_podcast},{"modal-content":d(()=>[cl,t("p",_l,[ul,t("b",null,u(o.rss_playlist_to_remove.name),1),ml])]),_:1},8,["show","onDelete"])],64)}var G=k(Wn,[["render",hl]]);const pl={name:"ListItemTrack",props:["track"]},fl=["id"],yl={key:0,class:"media-left fd-has-action"},gl={class:"media-content fd-has-action is-clipped"},bl={class:"subtitle is-7 has-text-grey"},kl={class:"subtitle is-7 has-text-grey"},wl={class:"media-right"};function vl(s,e,a,r,o,i){return l(),c("div",{id:"index_"+a.track.title_sort.charAt(0).toUpperCase(),class:q(["media",{"with-progress":s.$slots.progress}])},[s.$slots.icon?(l(),c("figure",yl,[E(s.$slots,"icon")])):y("",!0),t("div",gl,[t("h1",{class:q(["title is-6",{"has-text-grey":a.track.media_kind==="podcast"&&a.track.play_count>0}])},u(a.track.title),3),t("h2",bl,[t("b",null,u(a.track.artist),1)]),t("h2",kl,u(a.track.album),1),E(s.$slots,"progress")]),t("div",wl,[E(s.$slots,"actions")])],10,fl)}var ot=k(pl,[["render",vl]]);const $l={name:"ModalDialogTrack",props:["show","track"],emits:["close","play-count-changed"],data(){return{spotify_track:{}}},watch:{track(){if(this.track&&this.track.data_kind==="spotify"){const s=new M;s.setAccessToken(this.$store.state.spotify.webapi_token),s.getTrack(this.track.path.slice(this.track.path.lastIndexOf(":")+1)).then(e=>{this.spotify_track=e})}else this.spotify_track={}}},methods:{play_track:function(){this.$emit("close"),p.player_play_uri(this.track.uri,!1)},queue_add:function(){this.$emit("close"),p.queue_add(this.track.uri)},queue_add_next:function(){this.$emit("close"),p.queue_add_next(this.track.uri)},open_album:function(){this.$emit("close"),this.track.media_kind==="podcast"?this.$router.push({path:"/podcasts/"+this.track.album_id}):this.track.media_kind==="audiobook"?this.$router.push({path:"/audiobooks/"+this.track.album_id}):this.$router.push({path:"/music/albums/"+this.track.album_id})},open_artist:function(){this.$emit("close"),this.$router.push({path:"/music/artists/"+this.track.album_artist_id})},open_genre:function(){this.$router.push({name:"Genre",params:{genre:this.track.genre}})},open_spotify_artist:function(){this.$emit("close"),this.$router.push({path:"/music/spotify/artists/"+this.spotify_track.artists[0].id})},open_spotify_album:function(){this.$emit("close"),this.$router.push({path:"/music/spotify/albums/"+this.spotify_track.album.id})},mark_new:function(){p.library_track_update(this.track.id,{play_count:"reset"}).then(()=>{this.$emit("play-count-changed"),this.$emit("close")})},mark_played:function(){p.library_track_update(this.track.id,{play_count:"increment"}).then(()=>{this.$emit("play-count-changed"),this.$emit("close")})}}},xl={key:0,class:"modal is-active"},Cl={class:"modal-content fd-modal-card"},ql={class:"card"},Sl={class:"card-content"},Pl={class:"title is-4"},Al={class:"subtitle"},Tl={key:0,class:"buttons"},Rl={class:"content is-small"},Il=t("span",{class:"heading"},"Album",-1),El={key:0},Ll=t("span",{class:"heading"},"Album artist",-1),Ul={key:1},Ol=t("span",{class:"heading"},"Composer",-1),Dl={class:"title is-6"},zl={key:2},Nl=t("span",{class:"heading"},"Release date",-1),Vl={class:"title is-6"},Bl={key:3},Ml=t("span",{class:"heading"},"Year",-1),Fl={class:"title is-6"},jl={key:4},Gl=t("span",{class:"heading"},"Genre",-1),Kl=t("span",{class:"heading"},"Track / Disc",-1),Hl={class:"title is-6"},Wl=t("span",{class:"heading"},"Length",-1),Yl={class:"title is-6"},Ql=t("span",{class:"heading"},"Path",-1),Jl={class:"title is-6"},Xl=t("span",{class:"heading"},"Type",-1),Zl={class:"title is-6"},tr={key:0,class:"has-text-weight-normal"},sr=C("("),er=C(", "),ir=C(")"),or=t("span",{class:"heading"},"Quality",-1),ar={class:"title is-6"},nr={key:0},lr={key:1},rr={key:2},dr=t("span",{class:"heading"},"Added at",-1),cr={class:"title is-6"},_r=t("span",{class:"heading"},"Rating",-1),ur={class:"title is-6"},mr={key:5},hr=t("span",{class:"heading"},"Comment",-1),pr={class:"title is-6"},fr={class:"card-footer"},yr=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),gr=t("span",{class:"is-size-7"},"Add",-1),br=[yr,gr],kr=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-play"})],-1),wr=t("span",{class:"is-size-7"},"Add Next",-1),vr=[kr,wr],$r=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),xr=t("span",{class:"is-size-7"},"Play",-1),Cr=[$r,xr];function qr(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",xl,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",Cl,[t("div",ql,[t("div",Sl,[t("p",Pl,u(a.track.title),1),t("p",Al,u(a.track.artist),1),a.track.media_kind==="podcast"?(l(),c("div",Tl,[a.track.play_count>0?(l(),c("a",{key:0,class:"button is-small",onClick:e[1]||(e[1]=(...n)=>i.mark_new&&i.mark_new(...n))},"Mark as new")):y("",!0),a.track.play_count===0?(l(),c("a",{key:1,class:"button is-small",onClick:e[2]||(e[2]=(...n)=>i.mark_played&&i.mark_played(...n))},"Mark as played")):y("",!0)])):y("",!0),t("div",Rl,[t("p",null,[Il,t("a",{class:"title is-6 has-text-link",onClick:e[3]||(e[3]=(...n)=>i.open_album&&i.open_album(...n))},u(a.track.album),1)]),a.track.album_artist&&a.track.media_kind!=="audiobook"?(l(),c("p",El,[Ll,t("a",{class:"title is-6 has-text-link",onClick:e[4]||(e[4]=(...n)=>i.open_artist&&i.open_artist(...n))},u(a.track.album_artist),1)])):y("",!0),a.track.composer?(l(),c("p",Ul,[Ol,t("span",Dl,u(a.track.composer),1)])):y("",!0),a.track.date_released?(l(),c("p",zl,[Nl,t("span",Vl,u(s.$filters.time(a.track.date_released,"L")),1)])):a.track.year>0?(l(),c("p",Bl,[Ml,t("span",Fl,u(a.track.year),1)])):y("",!0),a.track.genre?(l(),c("p",jl,[Gl,t("a",{class:"title is-6 has-text-link",onClick:e[5]||(e[5]=(...n)=>i.open_genre&&i.open_genre(...n))},u(a.track.genre),1)])):y("",!0),t("p",null,[Kl,t("span",Hl,u(a.track.track_number)+" / "+u(a.track.disc_number),1)]),t("p",null,[Wl,t("span",Yl,u(s.$filters.duration(a.track.length_ms)),1)]),t("p",null,[Ql,t("span",Jl,u(a.track.path),1)]),t("p",null,[Xl,t("span",Zl,[C(u(a.track.media_kind)+" - "+u(a.track.data_kind)+" ",1),a.track.data_kind==="spotify"?(l(),c("span",tr,[sr,t("a",{onClick:e[6]||(e[6]=(...n)=>i.open_spotify_artist&&i.open_spotify_artist(...n))},"artist"),er,t("a",{onClick:e[7]||(e[7]=(...n)=>i.open_spotify_album&&i.open_spotify_album(...n))},"album"),ir])):y("",!0)])]),t("p",null,[or,t("span",ar,[C(u(a.track.type)+" ",1),a.track.samplerate?(l(),c("span",nr," | "+u(a.track.samplerate)+" Hz",1)):y("",!0),a.track.channels?(l(),c("span",lr," | "+u(s.$filters.channels(a.track.channels)),1)):y("",!0),a.track.bitrate?(l(),c("span",rr," | "+u(a.track.bitrate)+" Kb/s",1)):y("",!0)])]),t("p",null,[dr,t("span",cr,u(s.$filters.time(a.track.time_added,"L LT")),1)]),t("p",null,[_r,t("span",ur,u(Math.floor(a.track.rating/10))+" / 10",1)]),a.track.comment?(l(),c("p",mr,[hr,t("span",pr,u(a.track.comment),1)])):y("",!0)])]),t("footer",fr,[t("a",{class:"card-footer-item has-text-dark",onClick:e[8]||(e[8]=(...n)=>i.queue_add&&i.queue_add(...n))},br),t("a",{class:"card-footer-item has-text-dark",onClick:e[9]||(e[9]=(...n)=>i.queue_add_next&&i.queue_add_next(...n))},vr),t("a",{class:"card-footer-item has-text-dark",onClick:e[10]||(e[10]=(...n)=>i.play_track&&i.play_track(...n))},Cr)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[11]||(e[11]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var at=k($l,[["render",qr]]);const Sr={name:"ListTracks",components:{ListItemTrack:ot,ModalDialogTrack:at},props:["tracks","uris","expression"],data(){return{show_details_modal:!1,selected_track:{}}},methods:{play_track:function(s,e){this.uris?p.player_play_uri(this.uris,!1,s):this.expression?p.player_play_expression(this.expression,!1,s):p.player_play_uri(e.uri,!1)},open_dialog:function(s){this.selected_track=s,this.show_details_modal=!0}}},Pr=["onClick"],Ar=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),Tr=[Ar];function Rr(s,e,a,r,o,i){const n=h("list-item-track"),m=h("modal-dialog-track");return l(),c("div",null,[(l(!0),c(R,null,U(a.tracks,(f,g)=>(l(),v(n,{key:f.id,track:f,onClick:b=>i.play_track(g,f)},{actions:d(()=>[t("a",{onClick:z(b=>i.open_dialog(f),["prevent","stop"])},Tr,8,Pr)]),_:2},1032,["track","onClick"]))),128)),_(m,{show:o.show_details_modal,track:o.selected_track,onClose:e[0]||(e[0]=f=>o.show_details_modal=!1)},null,8,["show","track"])])}var H=k(Sr,[["render",Rr]]);const Os="GROUP_KEY_NONE";function Ir(){return{compareFn:null,groupKeyFn:s=>Os}}function Z(s,e="_"){return{compareFn:null,groupKeyFn:a=>(a[s]||e).charAt(0).toUpperCase()}}function Er(s,e="_"){return{compareFn:(a,r)=>{const o=a[s]||e,i=r[s]||e;return o.localeCompare(i)},groupKeyFn:a=>(a[s]||e).charAt(0).toUpperCase()}}function Vt(s,{direction:e="asc",defaultValue:a="0000"}){return{compareFn:(r,o)=>{const i=r[s]||a,n=o[s]||a,m=i.localeCompare(n);return e==="asc"?m:m*-1},groupKeyFn:r=>(r[s]||a).substring(0,4)}}function Lr(s,e="0000"){return{compareFn:(a,r)=>{const o=a[s]||e;return(r[s]||e).localeCompare(o)},groupKeyFn:a=>{const r=a[s];if(!r)return e;const o=new Date().getTime()-new Date(r).getTime();return o<864e5?"Today":o<6048e5?"Last week":o<2592e6?"Last month":r.substring(0,4)}}}class L{constructor({items:e=[],total:a=0,offset:r=0,limit:o=-1}={}){this.items=e,this.total=a,this.offset=r,this.limit=o,this.count=e.length,this.indexList=[],this.group(Ir())}get(){return this.itemsByGroup}isEmpty(){return!this.items||this.items.length<=0}group(e,a=[]){const r=a?this.items.filter(i=>a.every(n=>n(i))):this.items;this.count=r.length;let o=e.compareFn?[...r].sort(e.compareFn):r;this.indexList=[...new Set(o.map(e.groupKeyFn))],this.itemsByGroup=o.reduce((i,n)=>{const m=e.groupKeyFn(n);return i[m]=[...i[m]||[],n],i},{})}[Symbol.iterator](){let e=-1,a=-1;return{next:()=>{if(e>=this.indexList.length)return{done:!0};if(e<0&&(++e,a=0,this.indexList[e]!==Os))return{value:{groupKey:this.indexList[e],itemId:this.indexList[e],isItem:!1,item:{}},done:!1};let r=this.indexList[e],o=this.itemsByGroup[r];if(a<o.length){const i=this.itemsByGroup[r][a++];return{value:{groupKey:r,itemId:i.id,isItem:!0,item:i},done:!1}}else return++e,a=0,e<this.indexList.length?(r=this.indexList[e],{value:{groupKey:r,itemId:r,isItem:!1,item:{}},done:!1}):{done:!0}}}}}const dt={load:function(s){return Promise.all([p.search({type:"album",expression:"time_added after 8 weeks ago and media_kind is music having track_count > 3 order by time_added desc",limit:3}),p.search({type:"track",expression:"time_played after 8 weeks ago and media_kind is music order by time_played desc",limit:3})])},set:function(s,e){s.recently_added=new L(e[0].data.albums),s.recently_played=e[1].data.tracks}},Ur={name:"PageBrowse",components:{ContentWithHeading:I,TabsMusic:j,ListAlbums:G,ListTracks:H},beforeRouteEnter(s,e,a){dt.load(s).then(r=>{a(o=>dt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;dt.load(s).then(o=>{dt.set(r,o),a()})},data(){return{recently_added:[],recently_played:{items:[]},show_track_details_modal:!1,selected_track:{}}},methods:{open_browse:function(s){this.$router.push({path:"/music/browse/"+s})}}},Or={class:"fd-page-with-tabs"},Dr=t("p",{class:"title is-4"},"Recently added",-1),zr=t("p",{class:"heading"},"albums",-1),Nr={class:"level"},Vr={class:"level-item"},Br=t("p",{class:"title is-4"},"Recently played",-1),Mr=t("p",{class:"heading"},"tracks",-1),Fr={class:"level"},jr={class:"level-item"};function Gr(s,e,a,r,o,i){const n=h("tabs-music"),m=h("list-albums"),f=h("content-with-heading"),g=h("list-tracks");return l(),c("div",Or,[_(n),_(f,null,{"heading-left":d(()=>[Dr,zr]),content:d(()=>[_(m,{albums:o.recently_added},null,8,["albums"])]),footer:d(()=>[t("nav",Nr,[t("p",Vr,[t("a",{class:"button is-light is-small is-rounded",onClick:e[0]||(e[0]=b=>i.open_browse("recently_added"))},"Show more")])])]),_:1}),_(f,null,{"heading-left":d(()=>[Br,Mr]),content:d(()=>[_(g,{tracks:o.recently_played.items},null,8,["tracks"])]),footer:d(()=>[t("nav",Fr,[t("p",jr,[t("a",{class:"button is-light is-small is-rounded",onClick:e[1]||(e[1]=b=>i.open_browse("recently_played"))},"Show more")])])]),_:1})])}var Kr=k(Ur,[["render",Gr]]);const ct={load:function(s){const e=T.getters.settings_option_recently_added_limit;return p.search({type:"album",expression:"media_kind is music having track_count > 3 order by time_added desc",limit:e})},set:function(s,e){s.recently_added=new L(e.data.albums),s.recently_added.group(Lr("time_added",{direction:"desc",defaultValue:"0000"}))}},Hr={name:"PageBrowseType",components:{ContentWithHeading:I,TabsMusic:j,ListAlbums:G},beforeRouteEnter(s,e,a){ct.load(s).then(r=>{a(o=>ct.set(o,r))})},beforeRouteUpdate(s,e,a){if(!this.recently_added.isEmpty()){a();return}const r=this;ct.load(s).then(o=>{ct.set(r,o),a()})},data(){return{recently_added:new L}}},Wr={class:"fd-page-with-tabs"},Yr=t("p",{class:"title is-4"},"Recently added",-1),Qr=t("p",{class:"heading"},"albums",-1);function Jr(s,e,a,r,o,i){const n=h("tabs-music"),m=h("list-albums"),f=h("content-with-heading");return l(),c("div",Wr,[_(n),_(f,null,{"heading-left":d(()=>[Yr,Qr]),content:d(()=>[_(m,{albums:o.recently_added},null,8,["albums"])]),_:1})])}var Xr=k(Hr,[["render",Jr]]);const _t={load:function(s){return p.search({type:"track",expression:"time_played after 8 weeks ago and media_kind is music order by time_played desc",limit:50})},set:function(s,e){s.recently_played=e.data.tracks}},Zr={name:"PageBrowseType",components:{ContentWithHeading:I,TabsMusic:j,ListTracks:H},beforeRouteEnter(s,e,a){_t.load(s).then(r=>{a(o=>_t.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;_t.load(s).then(o=>{_t.set(r,o),a()})},data(){return{recently_played:{}}}},td={class:"fd-page-with-tabs"},sd=t("p",{class:"title is-4"},"Recently played",-1),ed=t("p",{class:"heading"},"tracks",-1);function id(s,e,a,r,o,i){const n=h("tabs-music"),m=h("list-tracks"),f=h("content-with-heading");return l(),c("div",td,[_(n),_(f,null,{"heading-left":d(()=>[sd,ed]),content:d(()=>[_(m,{tracks:o.recently_played.items},null,8,["tracks"])]),_:1})])}var od=k(Zr,[["render",id]]);const ad={name:"IndexButtonList",props:["index"],computed:{filtered_index(){if(!this.index)return[];const s="!\"#$%&'()*+,-./:;<=>?@[\\]^`{|}~";return this.index.filter(e=>!s.includes(e))}},methods:{nav:function(s){this.$router.push({hash:"#index_"+s})},scroll_to_top:function(){window.scrollTo({top:0,behavior:"smooth"})}}},nd={class:"buttons is-centered fd-is-square",style:{"margin-bottom":"16px"}},ld=["onClick"];function rd(s,e,a,r,o,i){return l(),c("section",null,[t("nav",nd,[(l(!0),c(R,null,U(i.filtered_index,n=>(l(),c("a",{key:n,class:"button is-small",onClick:m=>i.nav(n)},u(n),9,ld))),128))])])}var W=k(ad,[["render",rd]]);const dd={name:"ModalDialogArtist",props:["show","artist"],emits:["close"],methods:{play:function(){this.$emit("close"),p.player_play_uri(this.artist.uri,!1)},queue_add:function(){this.$emit("close"),p.queue_add(this.artist.uri)},queue_add_next:function(){this.$emit("close"),p.queue_add_next(this.artist.uri)},open_artist:function(){this.$emit("close"),this.$router.push({path:"/music/artists/"+this.artist.id})}}},cd={key:0,class:"modal is-active"},_d={class:"modal-content fd-modal-card"},ud={class:"card"},md={class:"card-content"},hd={class:"title is-4"},pd={class:"content is-small"},fd=t("span",{class:"heading"},"Albums",-1),yd={class:"title is-6"},gd=t("span",{class:"heading"},"Tracks",-1),bd={class:"title is-6"},kd=t("span",{class:"heading"},"Type",-1),wd={class:"title is-6"},vd=t("span",{class:"heading"},"Added at",-1),$d={class:"title is-6"},xd={class:"card-footer"},Cd=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),qd=t("span",{class:"is-size-7"},"Add",-1),Sd=[Cd,qd],Pd=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-play"})],-1),Ad=t("span",{class:"is-size-7"},"Add Next",-1),Td=[Pd,Ad],Rd=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),Id=t("span",{class:"is-size-7"},"Play",-1),Ed=[Rd,Id];function Ld(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",cd,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",_d,[t("div",ud,[t("div",md,[t("p",hd,[t("a",{class:"has-text-link",onClick:e[1]||(e[1]=(...n)=>i.open_artist&&i.open_artist(...n))},u(a.artist.name),1)]),t("div",pd,[t("p",null,[fd,t("span",yd,u(a.artist.album_count),1)]),t("p",null,[gd,t("span",bd,u(a.artist.track_count),1)]),t("p",null,[kd,t("span",wd,u(a.artist.data_kind),1)]),t("p",null,[vd,t("span",$d,u(s.$filters.time(a.artist.time_added,"L LT")),1)])])]),t("footer",xd,[t("a",{class:"card-footer-item has-text-dark",onClick:e[2]||(e[2]=(...n)=>i.queue_add&&i.queue_add(...n))},Sd),t("a",{class:"card-footer-item has-text-dark",onClick:e[3]||(e[3]=(...n)=>i.queue_add_next&&i.queue_add_next(...n))},Td),t("a",{class:"card-footer-item has-text-dark",onClick:e[4]||(e[4]=(...n)=>i.play&&i.play(...n))},Ed)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[5]||(e[5]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var Gt=k(dd,[["render",Ld]]);const Ud={name:"ListArtists",components:{ModalDialogArtist:Gt},props:["artists","media_kind","hide_group_title"],data(){return{show_details_modal:!1,selected_artist:{}}},computed:{media_kind_resolved:function(){return this.media_kind?this.media_kind:this.selected_artist.media_kind}},methods:{open_artist:function(s){this.selected_artist=s,this.media_kind_resolved==="podcast"||(this.media_kind_resolved==="audiobook"?this.$router.push({path:"/audiobooks/artists/"+s.id}):this.$router.push({path:"/music/artists/"+s.id}))},open_dialog:function(s){this.selected_artist=s,this.show_details_modal=!0}}},Od={key:0,class:"mt-6 mb-5 py-2"},Dd={class:"media-content is-clipped"},zd=["id"],Nd=["onClick"],Vd={class:"media-content fd-has-action is-clipped"},Bd={class:"title is-6"},Md={class:"media-right"},Fd=["onClick"],jd=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),Gd=[jd];function Kd(s,e,a,r,o,i){const n=h("modal-dialog-artist");return l(),c(R,null,[(l(!0),c(R,null,U(a.artists,m=>(l(),c(R,{key:m.itemId},[!m.isItem&&!a.hide_group_title?(l(),c("div",Od,[t("div",Dd,[t("span",{id:"index_"+m.groupKey,class:"tag is-info is-light is-small has-text-weight-bold"},u(m.groupKey),9,zd)])])):m.isItem?(l(),c("div",{key:1,class:"media",onClick:f=>i.open_artist(m.item)},[t("div",Vd,[t("h1",Bd,u(m.item.name),1)]),t("div",Md,[t("a",{onClick:z(f=>i.open_dialog(m.item),["prevent","stop"])},Gd,8,Fd)])],8,Nd)):y("",!0)],64))),128)),_(n,{show:o.show_details_modal,artist:o.selected_artist,media_kind:a.media_kind,onClose:e[0]||(e[0]=m=>o.show_details_modal=!1)},null,8,["show","artist","media_kind"])],64)}var ds=k(Ud,[["render",Kd]]);const Hd={name:"DropdownMenu",props:["modelValue","options"],emits:["update:modelValue"],data(){return{is_active:!1}},methods:{onClickOutside(s){this.is_active=!1},select(s){this.is_active=!1,this.$emit("update:modelValue",s)}}},Wd={class:"dropdown-trigger"},Yd=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-chevron-down","aria-hidden":"true"})],-1),Qd={id:"dropdown-menu",class:"dropdown-menu",role:"menu"},Jd={class:"dropdown-content"},Xd=["onClick"];function Zd(s,e,a,r,o,i){const n=Xt("click-away");return O((l(),c("div",{class:q(["dropdown",{"is-active":o.is_active}])},[t("div",Wd,[t("button",{class:"button","aria-haspopup":"true","aria-controls":"dropdown-menu",onClick:e[0]||(e[0]=m=>o.is_active=!o.is_active)},[t("span",null,u(a.modelValue),1),Yd])]),t("div",Qd,[t("div",Jd,[(l(!0),c(R,null,U(a.options,m=>(l(),c("a",{key:m,class:q(["dropdown-item",{"is-active":a.modelValue===m}]),onClick:f=>i.select(m)},u(m),11,Xd))),128))])])],2)),[[n,i.onClickOutside]])}var cs=k(Hd,[["render",Zd]]);const ut={load:function(s){return p.library_artists("music")},set:function(s,e){s.artists_list=new L(e.data)}},tc={name:"PageArtists",components:{ContentWithHeading:I,TabsMusic:j,IndexButtonList:W,ListArtists:ds,DropdownMenu:cs},beforeRouteEnter(s,e,a){ut.load(s).then(r=>{a(o=>ut.set(o,r))})},beforeRouteUpdate(s,e,a){if(!this.artists_list.isEmpty()){a();return}const r=this;ut.load(s).then(o=>{ut.set(r,o),a()})},data(){return{artists_list:new L,groupby_options:[{name:"Name",options:Z("name_sort")},{name:"Recently added",options:Vt("time_added",{direction:"desc",defaultValue:"0000"})}]}},computed:{artists(){if(!this.artists_list)return[];const s=this.groupby_options.find(e=>e.name===this.selected_groupby_option_name);return this.artists_list.group(s.options,[e=>!this.hide_singles||e.track_count<=e.album_count*2,e=>!this.hide_spotify||e.data_kind!=="spotify"]),this.artists_list},groupby_option_names(){return[...this.groupby_options].map(s=>s.name)},selected_groupby_option_name:{get(){return this.$store.state.artists_sort},set(s){this.$store.commit(Ts,s)}},spotify_enabled(){return this.$store.state.spotify.webapi_token_valid},hide_singles:{get(){return this.$store.state.hide_singles},set(s){this.$store.commit(Ft,s)}},hide_spotify:{get(){return this.$store.state.hide_spotify},set(s){this.$store.commit(ns,s)}}},methods:{}},sc={class:"fd-page-with-tabs"},ec={class:"columns"},ic={class:"column"},oc=t("p",{class:"heading",style:{"margin-bottom":"24px"}},"Filter",-1),ac={class:"field"},nc={class:"control"},lc=t("label",{for:"switchHideSingles"},"Hide singles",-1),rc=t("p",{class:"help"}," If active, hides artists that only appear on singles or playlists. ",-1),dc={key:0,class:"field"},cc={class:"control"},_c=t("label",{for:"switchHideSpotify"},"Hide artists from Spotify",-1),uc=t("p",{class:"help"}," If active, hides artists that only appear in your Spotify library. ",-1),mc={class:"column"},hc=t("p",{class:"heading",style:{"margin-bottom":"24px"}},"Sort by",-1),pc=t("p",{class:"title is-4"},"Artists",-1),fc={class:"heading"};function yc(s,e,a,r,o,i){const n=h("tabs-music"),m=h("index-button-list"),f=h("dropdown-menu"),g=h("list-artists"),b=h("content-with-heading");return l(),c("div",sc,[_(n),_(b,null,{options:d(()=>[_(m,{index:i.artists.indexList},null,8,["index"]),t("div",ec,[t("div",ic,[oc,t("div",ac,[t("div",nc,[O(t("input",{id:"switchHideSingles","onUpdate:modelValue":e[0]||(e[0]=$=>i.hide_singles=$),type:"checkbox",name:"switchHideSingles",class:"switch"},null,512),[[Q,i.hide_singles]]),lc]),rc]),i.spotify_enabled?(l(),c("div",dc,[t("div",cc,[O(t("input",{id:"switchHideSpotify","onUpdate:modelValue":e[1]||(e[1]=$=>i.hide_spotify=$),type:"checkbox",name:"switchHideSpotify",class:"switch"},null,512),[[Q,i.hide_spotify]]),_c]),uc])):y("",!0)]),t("div",mc,[hc,_(f,{modelValue:i.selected_groupby_option_name,"onUpdate:modelValue":e[2]||(e[2]=$=>i.selected_groupby_option_name=$),options:i.groupby_option_names},null,8,["modelValue","options"])])])]),"heading-left":d(()=>[pc,t("p",fc,u(i.artists.count)+" Artists",1)]),"heading-right":d(()=>[]),content:d(()=>[_(g,{artists:i.artists},null,8,["artists"])]),_:1})])}var gc=k(tc,[["render",yc]]);const mt={load:function(s){return Promise.all([p.library_artist(s.params.artist_id),p.library_artist_albums(s.params.artist_id)])},set:function(s,e){s.artist=e[0].data,s.albums_list=new L(e[1].data)}},bc={name:"PageArtist",components:{ContentWithHeading:I,ListAlbums:G,ModalDialogArtist:Gt,DropdownMenu:cs},beforeRouteEnter(s,e,a){mt.load(s).then(r=>{a(o=>mt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;mt.load(s).then(o=>{mt.set(r,o),a()})},data(){return{artist:{},albums_list:new L,groupby_options:[{name:"Name",options:Z("name_sort")},{name:"Release date",options:Vt("date_released",{direction:"asc",defaultValue:"0000"})}],show_artist_details_modal:!1}},computed:{albums(){const s=this.groupby_options.find(e=>e.name===this.selected_groupby_option_name);return this.albums_list.group(s.options),this.albums_list},groupby_option_names(){return[...this.groupby_options].map(s=>s.name)},selected_groupby_option_name:{get(){return this.$store.state.artist_albums_sort},set(s){this.$store.commit(Rs,s)}}},methods:{open_tracks:function(){this.$router.push({path:"/music/artists/"+this.artist.id+"/tracks"})},play:function(){p.player_play_uri(this.albums.items.map(s=>s.uri).join(","),!0)}}},kc={class:"columns"},wc={class:"column"},vc=t("p",{class:"heading",style:{"margin-bottom":"24px"}},"Sort by",-1),$c={class:"title is-4"},xc={class:"buttons is-centered"},Cc=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),qc=[Cc],Sc=t("span",{class:"icon"},[t("i",{class:"mdi mdi-shuffle"})],-1),Pc=t("span",null,"Shuffle",-1),Ac=[Sc,Pc],Tc={class:"heading has-text-centered-mobile"};function Rc(s,e,a,r,o,i){const n=h("dropdown-menu"),m=h("list-albums"),f=h("modal-dialog-artist"),g=h("content-with-heading");return l(),v(g,null,{options:d(()=>[t("div",kc,[t("div",wc,[vc,_(n,{modelValue:i.selected_groupby_option_name,"onUpdate:modelValue":e[0]||(e[0]=b=>i.selected_groupby_option_name=b),options:i.groupby_option_names},null,8,["modelValue","options"])])])]),"heading-left":d(()=>[t("p",$c,u(o.artist.name),1)]),"heading-right":d(()=>[t("div",xc,[t("a",{class:"button is-small is-light is-rounded",onClick:e[1]||(e[1]=b=>o.show_artist_details_modal=!0)},qc),t("a",{class:"button is-small is-dark is-rounded",onClick:e[2]||(e[2]=(...b)=>i.play&&i.play(...b))},Ac)])]),content:d(()=>[t("p",Tc,[C(u(o.artist.album_count)+" albums | ",1),t("a",{class:"has-text-link",onClick:e[3]||(e[3]=(...b)=>i.open_tracks&&i.open_tracks(...b))},u(o.artist.track_count)+" tracks",1)]),_(m,{albums:i.albums,hide_group_title:!0},null,8,["albums"]),_(f,{show:o.show_artist_details_modal,artist:o.artist,onClose:e[4]||(e[4]=b=>o.show_artist_details_modal=!1)},null,8,["show","artist"])]),_:1})}var Ic=k(bc,[["render",Rc]]);const ht={load:function(s){return p.library_albums("music")},set:function(s,e){s.albums_list=new L(e.data)}},Ec={name:"PageAlbums",components:{ContentWithHeading:I,TabsMusic:j,IndexButtonList:W,ListAlbums:G,DropdownMenu:cs},beforeRouteEnter(s,e,a){ht.load(s).then(r=>{a(o=>ht.set(o,r))})},beforeRouteUpdate(s,e,a){if(!this.albums_list.isEmpty()){a();return}const r=this;ht.load(s).then(o=>{ht.set(r,o),a()})},data(){return{albums_list:new L,groupby_options:[{name:"Name",options:Z("name_sort")},{name:"Recently added",options:Vt("time_added",{direction:"desc",defaultValue:"0000"})},{name:"Recently released",options:Vt("date_released",{direction:"desc",defaultValue:"0000"})}]}},computed:{albums(){const s=this.groupby_options.find(e=>e.name===this.selected_groupby_option_name);return this.albums_list.group(s.options,[e=>!this.hide_singles||e.track_count<=2,e=>!this.hide_spotify||e.data_kind!=="spotify"]),this.albums_list},groupby_option_names(){return[...this.groupby_options].map(s=>s.name)},selected_groupby_option_name:{get(){return this.$store.state.albums_sort},set(s){this.$store.commit(Is,s)}},spotify_enabled(){return this.$store.state.spotify.webapi_token_valid},hide_singles:{get(){return this.$store.state.hide_singles},set(s){this.$store.commit(Ft,s)}},hide_spotify:{get(){return this.$store.state.hide_spotify},set(s){this.$store.commit(ns,s)}}},methods:{scrollToTop:function(){window.scrollTo({top:0,behavior:"smooth"})}}},Lc={class:"fd-page-with-tabs"},Uc={class:"columns"},Oc={class:"column"},Dc=t("p",{class:"heading",style:{"margin-bottom":"24px"}},"Filter",-1),zc={class:"field"},Nc={class:"control"},Vc=t("label",{for:"switchHideSingles"},"Hide singles",-1),Bc=t("p",{class:"help"}," If active, hides singles and albums with tracks that only appear in playlists. ",-1),Mc={key:0,class:"field"},Fc={class:"control"},jc=t("label",{for:"switchHideSpotify"},"Hide albums from Spotify",-1),Gc=t("p",{class:"help"}," If active, hides albums that only appear in your Spotify library. ",-1),Kc={class:"column"},Hc=t("p",{class:"heading",style:{"margin-bottom":"24px"}},"Sort by",-1),Wc=t("p",{class:"title is-4"},"Albums",-1),Yc={class:"heading"};function Qc(s,e,a,r,o,i){const n=h("tabs-music"),m=h("index-button-list"),f=h("dropdown-menu"),g=h("list-albums"),b=h("content-with-heading");return l(),c("div",Lc,[_(n),_(b,null,{options:d(()=>[_(m,{index:i.albums.indexList},null,8,["index"]),t("div",Uc,[t("div",Oc,[Dc,t("div",zc,[t("div",Nc,[O(t("input",{id:"switchHideSingles","onUpdate:modelValue":e[0]||(e[0]=$=>i.hide_singles=$),type:"checkbox",name:"switchHideSingles",class:"switch"},null,512),[[Q,i.hide_singles]]),Vc]),Bc]),i.spotify_enabled?(l(),c("div",Mc,[t("div",Fc,[O(t("input",{id:"switchHideSpotify","onUpdate:modelValue":e[1]||(e[1]=$=>i.hide_spotify=$),type:"checkbox",name:"switchHideSpotify",class:"switch"},null,512),[[Q,i.hide_spotify]]),jc]),Gc])):y("",!0)]),t("div",Kc,[Hc,_(f,{modelValue:i.selected_groupby_option_name,"onUpdate:modelValue":e[2]||(e[2]=$=>i.selected_groupby_option_name=$),options:i.groupby_option_names},null,8,["modelValue","options"])])])]),"heading-left":d(()=>[Wc,t("p",Yc,u(i.albums.count)+" Albums",1)]),"heading-right":d(()=>[]),content:d(()=>[_(g,{albums:i.albums},null,8,["albums"])]),_:1})])}var Jc=k(Ec,[["render",Qc]]);const Xc={},Zc={class:"hero is-light is-bold fd-content"},t_={class:"hero-body"},s_={class:"container"},e_={class:"columns is-centered"},i_={class:"column is-four-fifths"},o_={class:"columns",style:{"flex-direction":"row-reverse"}},a_={class:"column fd-has-cover"},n_={class:"column is-three-fifths has-text-centered-mobile",style:{margin:"auto 0"}},l_={class:"section fd-content"},r_={class:"container"},d_={class:"columns is-centered"},c_={class:"column is-four-fifths"},__={style:{"margin-top":"16px"}};function u_(s,e){return l(),c("div",null,[t("section",Zc,[t("div",t_,[t("div",s_,[t("div",e_,[t("div",i_,[t("div",o_,[t("div",a_,[E(s.$slots,"heading-right")]),t("div",n_,[E(s.$slots,"heading-left")])])])])])])]),t("section",l_,[t("div",r_,[t("div",d_,[t("div",c_,[E(s.$slots,"content"),t("div",__,[E(s.$slots,"footer")])])])])])])}var _s=k(Xc,[["render",u_]]);const pt={load:function(s){return Promise.all([p.library_album(s.params.album_id),p.library_album_tracks(s.params.album_id)])},set:function(s,e){s.album=e[0].data,s.tracks=e[1].data.items}},m_={name:"PageAlbum",components:{ContentWithHero:_s,ListTracks:H,ModalDialogAlbum:jt,CoverArtwork:K},beforeRouteEnter(s,e,a){pt.load(s).then(r=>{a(o=>pt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;pt.load(s).then(o=>{pt.set(r,o),a()})},data(){return{album:{},tracks:[],show_album_details_modal:!1}},methods:{open_artist:function(){this.show_details_modal=!1,this.$router.push({path:"/music/artists/"+this.album.artist_id})},play:function(){p.player_play_uri(this.album.uri,!0)}}},h_={class:"title is-5"},p_={class:"subtitle is-6 has-text-link has-text-weight-normal"},f_={class:"buttons fd-is-centered-mobile fd-has-margin-top"},y_=t("span",{class:"icon"},[t("i",{class:"mdi mdi-shuffle"})],-1),g_=t("span",null,"Shuffle",-1),b_=[y_,g_],k_=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),w_=[k_],v_={class:"image is-square fd-has-shadow fd-has-action"},$_={class:"heading is-7 has-text-centered-mobile fd-has-margin-top"};function x_(s,e,a,r,o,i){const n=h("cover-artwork"),m=h("list-tracks"),f=h("modal-dialog-album"),g=h("content-with-hero");return l(),v(g,null,{"heading-left":d(()=>[t("h1",h_,u(o.album.name),1),t("h2",p_,[t("a",{class:"has-text-link",onClick:e[0]||(e[0]=(...b)=>i.open_artist&&i.open_artist(...b))},u(o.album.artist),1)]),t("div",f_,[t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...b)=>i.play&&i.play(...b))},b_),t("a",{class:"button is-small is-light is-rounded",onClick:e[2]||(e[2]=b=>o.show_album_details_modal=!0)},w_)])]),"heading-right":d(()=>[t("p",v_,[_(n,{artwork_url:o.album.artwork_url,artist:o.album.artist,album:o.album.name,onClick:e[3]||(e[3]=b=>o.show_album_details_modal=!0)},null,8,["artwork_url","artist","album"])])]),content:d(()=>[t("p",$_,u(o.album.track_count)+" tracks ",1),_(m,{tracks:o.tracks,uris:o.album.uri},null,8,["tracks","uris"]),_(f,{show:o.show_album_details_modal,album:o.album,onClose:e[4]||(e[4]=b=>o.show_album_details_modal=!1)},null,8,["show","album"])]),_:1})}var C_=k(m_,[["render",x_]]);const q_={name:"ListItemGenre",props:["genre"]},S_=["id"],P_={class:"media-content fd-has-action is-clipped"},A_={class:"title is-6"},T_={class:"media-right"};function R_(s,e,a,r,o,i){return l(),c("div",{id:"index_"+a.genre.name.charAt(0).toUpperCase(),class:"media"},[t("div",P_,[t("h1",A_,u(a.genre.name),1)]),t("div",T_,[E(s.$slots,"actions")])],8,S_)}var I_=k(q_,[["render",R_]]);const E_={name:"ModalDialogGenre",props:["show","genre"],emits:["close"],methods:{play:function(){this.$emit("close"),p.player_play_expression('genre is "'+this.genre.name+'" and media_kind is music',!1)},queue_add:function(){this.$emit("close"),p.queue_expression_add('genre is "'+this.genre.name+'" and media_kind is music')},queue_add_next:function(){this.$emit("close"),p.queue_expression_add_next('genre is "'+this.genre.name+'" and media_kind is music')},open_genre:function(){this.$emit("close"),this.$router.push({name:"Genre",params:{genre:this.genre.name}})}}},L_={key:0,class:"modal is-active"},U_={class:"modal-content fd-modal-card"},O_={class:"card"},D_={class:"card-content"},z_={class:"title is-4"},N_={class:"card-footer"},V_=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),B_=t("span",{class:"is-size-7"},"Add",-1),M_=[V_,B_],F_=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-play"})],-1),j_=t("span",{class:"is-size-7"},"Add Next",-1),G_=[F_,j_],K_=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),H_=t("span",{class:"is-size-7"},"Play",-1),W_=[K_,H_];function Y_(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",L_,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",U_,[t("div",O_,[t("div",D_,[t("p",z_,[t("a",{class:"has-text-link",onClick:e[1]||(e[1]=(...n)=>i.open_genre&&i.open_genre(...n))},u(a.genre.name),1)])]),t("footer",N_,[t("a",{class:"card-footer-item has-text-dark",onClick:e[2]||(e[2]=(...n)=>i.queue_add&&i.queue_add(...n))},M_),t("a",{class:"card-footer-item has-text-dark",onClick:e[3]||(e[3]=(...n)=>i.queue_add_next&&i.queue_add_next(...n))},G_),t("a",{class:"card-footer-item has-text-dark",onClick:e[4]||(e[4]=(...n)=>i.play&&i.play(...n))},W_)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[5]||(e[5]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var us=k(E_,[["render",Y_]]);const ft={load:function(s){return p.library_genres()},set:function(s,e){s.genres=e.data}},Q_={name:"PageGenres",components:{ContentWithHeading:I,TabsMusic:j,IndexButtonList:W,ListItemGenre:I_,ModalDialogGenre:us},beforeRouteEnter(s,e,a){ft.load(s).then(r=>{a(o=>ft.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;ft.load(s).then(o=>{ft.set(r,o),a()})},data(){return{genres:{items:[]},show_details_modal:!1,selected_genre:{}}},computed:{index_list(){return[...new Set(this.genres.items.map(s=>s.name.charAt(0).toUpperCase()))]}},methods:{open_genre:function(s){this.$router.push({name:"Genre",params:{genre:s.name}})},open_dialog:function(s){this.selected_genre=s,this.show_details_modal=!0}}},J_={class:"fd-page-with-tabs"},X_=t("p",{class:"title is-4"},"Genres",-1),Z_={class:"heading"},tu=["onClick"],su=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),eu=[su];function iu(s,e,a,r,o,i){const n=h("tabs-music"),m=h("index-button-list"),f=h("list-item-genre"),g=h("modal-dialog-genre"),b=h("content-with-heading");return l(),c("div",J_,[_(n),_(b,null,{options:d(()=>[_(m,{index:i.index_list},null,8,["index"])]),"heading-left":d(()=>[X_,t("p",Z_,u(o.genres.total)+" genres",1)]),content:d(()=>[(l(!0),c(R,null,U(o.genres.items,$=>(l(),v(f,{key:$.name,genre:$,onClick:w=>i.open_genre($)},{actions:d(()=>[t("a",{onClick:z(w=>i.open_dialog($),["prevent","stop"])},eu,8,tu)]),_:2},1032,["genre","onClick"]))),128)),_(g,{show:o.show_details_modal,genre:o.selected_genre,onClose:e[0]||(e[0]=$=>o.show_details_modal=!1)},null,8,["show","genre"])]),_:1})])}var ou=k(Q_,[["render",iu]]);const yt={load:function(s){return p.library_genre(s.params.genre)},set:function(s,e){s.name=s.$route.params.genre,s.albums_list=new L(e.data.albums),s.albums_list.group(Z("name_sort"))}},au={name:"PageGenre",components:{ContentWithHeading:I,IndexButtonList:W,ListAlbums:G,ModalDialogGenre:us},beforeRouteEnter(s,e,a){yt.load(s).then(r=>{a(o=>yt.set(o,r))})},beforeRouteUpdate(s,e,a){if(!this.albums_list.isEmpty()){a();return}const r=this;yt.load(s).then(o=>{yt.set(r,o),a()})},data(){return{name:"",albums_list:new L,show_genre_details_modal:!1}},methods:{open_tracks:function(){this.show_details_modal=!1,this.$router.push({name:"GenreTracks",params:{genre:this.name}})},play:function(){p.player_play_expression('genre is "'+this.name+'" and media_kind is music',!0)}}},nu={class:"title is-4"},lu={class:"buttons is-centered"},ru=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),du=[ru],cu=t("span",{class:"icon"},[t("i",{class:"mdi mdi-shuffle"})],-1),_u=t("span",null,"Shuffle",-1),uu=[cu,_u],mu={class:"heading has-text-centered-mobile"};function hu(s,e,a,r,o,i){const n=h("index-button-list"),m=h("list-albums"),f=h("modal-dialog-genre"),g=h("content-with-heading");return l(),c("div",null,[_(g,null,{options:d(()=>[_(n,{index:o.albums_list.indexList},null,8,["index"])]),"heading-left":d(()=>[t("p",nu,u(o.name),1)]),"heading-right":d(()=>[t("div",lu,[t("a",{class:"button is-small is-light is-rounded",onClick:e[0]||(e[0]=b=>o.show_genre_details_modal=!0)},du),t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...b)=>i.play&&i.play(...b))},uu)])]),content:d(()=>[t("p",mu,[C(u(o.albums_list.total)+" albums | ",1),t("a",{class:"has-text-link",onClick:e[2]||(e[2]=(...b)=>i.open_tracks&&i.open_tracks(...b))},"tracks")]),_(m,{albums:o.albums_list},null,8,["albums"]),_(f,{show:o.show_genre_details_modal,genre:{name:o.name},onClose:e[3]||(e[3]=b=>o.show_genre_details_modal=!1)},null,8,["show","genre"])]),_:1})])}var pu=k(au,[["render",hu]]);const gt={load:function(s){return p.library_genre_tracks(s.params.genre)},set:function(s,e){s.genre=s.$route.params.genre,s.tracks=e.data.tracks}},fu={name:"PageGenreTracks",components:{ContentWithHeading:I,ListTracks:H,IndexButtonList:W,ModalDialogGenre:us},beforeRouteEnter(s,e,a){gt.load(s).then(r=>{a(o=>gt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;gt.load(s).then(o=>{gt.set(r,o),a()})},data(){return{tracks:{items:[]},genre:"",show_genre_details_modal:!1}},computed:{index_list(){return[...new Set(this.tracks.items.map(s=>s.title_sort.charAt(0).toUpperCase()))]},expression(){return'genre is "'+this.genre+'" and media_kind is music'}},methods:{open_genre:function(){this.show_details_modal=!1,this.$router.push({name:"Genre",params:{genre:this.genre}})},play:function(){p.player_play_expression(this.expression,!0)}}},yu={class:"title is-4"},gu={class:"buttons is-centered"},bu=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),ku=[bu],wu=t("span",{class:"icon"},[t("i",{class:"mdi mdi-shuffle"})],-1),vu=t("span",null,"Shuffle",-1),$u=[wu,vu],xu={class:"heading has-text-centered-mobile"};function Cu(s,e,a,r,o,i){const n=h("index-button-list"),m=h("list-tracks"),f=h("modal-dialog-genre"),g=h("content-with-heading");return l(),c("div",null,[_(g,null,{options:d(()=>[_(n,{index:i.index_list},null,8,["index"])]),"heading-left":d(()=>[t("p",yu,u(o.genre),1)]),"heading-right":d(()=>[t("div",gu,[t("a",{class:"button is-small is-light is-rounded",onClick:e[0]||(e[0]=b=>o.show_genre_details_modal=!0)},ku),t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...b)=>i.play&&i.play(...b))},$u)])]),content:d(()=>[t("p",xu,[t("a",{class:"has-text-link",onClick:e[2]||(e[2]=(...b)=>i.open_genre&&i.open_genre(...b))},"albums"),C(" | "+u(o.tracks.total)+" tracks ",1)]),_(m,{tracks:o.tracks.items,expression:i.expression},null,8,["tracks","expression"]),_(f,{show:o.show_genre_details_modal,genre:{name:o.genre},onClose:e[3]||(e[3]=b=>o.show_genre_details_modal=!1)},null,8,["show","genre"])]),_:1})])}var qu=k(fu,[["render",Cu]]);const bt={load:function(s){return Promise.all([p.library_artist(s.params.artist_id),p.library_artist_tracks(s.params.artist_id)])},set:function(s,e){s.artist=e[0].data,s.tracks=e[1].data.tracks}},Su={name:"PageArtistTracks",components:{ContentWithHeading:I,ListTracks:H,IndexButtonList:W,ModalDialogArtist:Gt},beforeRouteEnter(s,e,a){bt.load(s).then(r=>{a(o=>bt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;bt.load(s).then(o=>{bt.set(r,o),a()})},data(){return{artist:{},tracks:{items:[]},show_artist_details_modal:!1}},computed:{index_list(){return[...new Set(this.tracks.items.map(s=>s.title_sort.charAt(0).toUpperCase()))]},track_uris(){return this.tracks.items.map(s=>s.uri).join(",")}},methods:{open_artist:function(){this.show_details_modal=!1,this.$router.push({path:"/music/artists/"+this.artist.id})},play:function(){p.player_play_uri(this.tracks.items.map(s=>s.uri).join(","),!0)}}},Pu={class:"title is-4"},Au={class:"buttons is-centered"},Tu=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),Ru=[Tu],Iu=t("span",{class:"icon"},[t("i",{class:"mdi mdi-shuffle"})],-1),Eu=t("span",null,"Shuffle",-1),Lu=[Iu,Eu],Uu={class:"heading has-text-centered-mobile"};function Ou(s,e,a,r,o,i){const n=h("index-button-list"),m=h("list-tracks"),f=h("modal-dialog-artist"),g=h("content-with-heading");return l(),c("div",null,[_(g,null,{options:d(()=>[_(n,{index:i.index_list},null,8,["index"])]),"heading-left":d(()=>[t("p",Pu,u(o.artist.name),1)]),"heading-right":d(()=>[t("div",Au,[t("a",{class:"button is-small is-light is-rounded",onClick:e[0]||(e[0]=b=>o.show_artist_details_modal=!0)},Ru),t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...b)=>i.play&&i.play(...b))},Lu)])]),content:d(()=>[t("p",Uu,[t("a",{class:"has-text-link",onClick:e[2]||(e[2]=(...b)=>i.open_artist&&i.open_artist(...b))},u(o.artist.album_count)+" albums",1),C(" | "+u(o.artist.track_count)+" tracks ",1)]),_(m,{tracks:o.tracks.items,uris:i.track_uris},null,8,["tracks","uris"]),_(f,{show:o.show_artist_details_modal,artist:o.artist,onClose:e[3]||(e[3]=b=>o.show_artist_details_modal=!1)},null,8,["show","artist"])]),_:1})])}var Du=k(Su,[["render",Ou]]);const zu={name:"ModalDialogComposer",props:["show","composer"],emits:["close"],methods:{play:function(){this.$emit("close"),p.player_play_expression('composer is "'+this.composer.name+'" and media_kind is music',!1)},queue_add:function(){this.$emit("close"),p.queue_expression_add('composer is "'+this.composer.name+'" and media_kind is music')},queue_add_next:function(){this.$emit("close"),p.queue_expression_add_next('composer is "'+this.composer.name+'" and media_kind is music')},open_albums:function(){this.$emit("close"),this.$router.push({name:"ComposerAlbums",params:{composer:this.composer.name}})},open_tracks:function(){this.show_details_modal=!1,this.$router.push({name:"ComposerTracks",params:{composer:this.composer.name}})}}},Nu={key:0,class:"modal is-active"},Vu={class:"modal-content fd-modal-card"},Bu={class:"card"},Mu={class:"card-content"},Fu={class:"title is-4"},ju=t("span",{class:"heading"},"Albums",-1),Gu=t("span",{class:"heading"},"Tracks",-1),Ku={class:"card-footer"},Hu=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),Wu=t("span",{class:"is-size-7"},"Add",-1),Yu=[Hu,Wu],Qu=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-play"})],-1),Ju=t("span",{class:"is-size-7"},"Add Next",-1),Xu=[Qu,Ju],Zu=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),tm=t("span",{class:"is-size-7"},"Play",-1),sm=[Zu,tm];function em(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",Nu,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",Vu,[t("div",Bu,[t("div",Mu,[t("p",Fu,[t("a",{class:"has-text-link",onClick:e[1]||(e[1]=(...n)=>i.open_albums&&i.open_albums(...n))},u(a.composer.name),1)]),t("p",null,[ju,t("a",{class:"has-text-link is-6",onClick:e[2]||(e[2]=(...n)=>i.open_albums&&i.open_albums(...n))},u(a.composer.album_count),1)]),t("p",null,[Gu,t("a",{class:"has-text-link is-6",onClick:e[3]||(e[3]=(...n)=>i.open_tracks&&i.open_tracks(...n))},u(a.composer.track_count),1)])]),t("footer",Ku,[t("a",{class:"card-footer-item has-text-dark",onClick:e[4]||(e[4]=(...n)=>i.queue_add&&i.queue_add(...n))},Yu),t("a",{class:"card-footer-item has-text-dark",onClick:e[5]||(e[5]=(...n)=>i.queue_add_next&&i.queue_add_next(...n))},Xu),t("a",{class:"card-footer-item has-text-dark",onClick:e[6]||(e[6]=(...n)=>i.play&&i.play(...n))},sm)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[7]||(e[7]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var ms=k(zu,[["render",em]]);const im={name:"ListComposers",components:{ModalDialogComposer:ms},props:["composers","media_kind","hide_group_title"],data(){return{show_details_modal:!1,selected_composer:{}}},computed:{media_kind_resolved:function(){return this.media_kind?this.media_kind:this.selected_composer.media_kind}},methods:{open_composer:function(s){this.selected_composer=s,this.$router.push({name:"ComposerTracks",params:{composer:s.name}})},open_dialog:function(s){this.selected_composer=s,this.show_details_modal=!0}}},om={key:0,class:"mt-6 mb-5 py-2"},am={class:"media-content is-clipped"},nm=["id"],lm=["onClick"],rm={class:"media-content fd-has-action is-clipped"},dm={class:"title is-6"},cm={class:"media-right"},_m=["onClick"],um=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),mm=[um];function hm(s,e,a,r,o,i){const n=h("modal-dialog-composer");return l(),c(R,null,[(l(!0),c(R,null,U(a.composers,m=>(l(),c(R,{key:m.itemId},[!m.isItem&&!a.hide_group_title?(l(),c("div",om,[t("div",am,[t("span",{id:"index_"+m.groupKey,class:"tag is-info is-light is-small has-text-weight-bold"},u(m.groupKey),9,nm)])])):m.isItem?(l(),c("div",{key:1,class:"media",onClick:f=>i.open_composer(m.item)},[t("div",rm,[t("h1",dm,u(m.item.name),1)]),t("div",cm,[t("a",{onClick:z(f=>i.open_dialog(m.item),["prevent","stop"])},mm,8,_m)])],8,lm)):y("",!0)],64))),128)),_(n,{show:o.show_details_modal,composer:o.selected_composer,media_kind:a.media_kind,onClose:e[0]||(e[0]=m=>o.show_details_modal=!1)},null,8,["show","composer","media_kind"])],64)}var Ds=k(im,[["render",hm]]);const kt={load:function(s){return p.library_composers()},set:function(s,e){s.composers=new L(e.data),s.composers.group(Er("name_sort"))}},pm={name:"PageComposers",components:{ContentWithHeading:I,TabsMusic:j,IndexButtonList:W,ListComposers:Ds},beforeRouteEnter(s,e,a){kt.load(s).then(r=>{a(o=>kt.set(o,r))})},beforeRouteUpdate(s,e,a){if(!this.composers.isEmpty()){a();return}const r=this;kt.load(s).then(o=>{kt.set(r,o),a()})},data(){return{composers:new L,show_details_modal:!1,selected_composer:{}}},methods:{open_composer:function(s){this.$router.push({name:"ComposerAlbums",params:{composer:s.name}})},open_dialog:function(s){this.selected_composer=s,this.show_details_modal=!0}}},fm=t("p",{class:"title is-4"},"Composers",-1),ym={class:"heading"};function gm(s,e,a,r,o,i){const n=h("tabs-music"),m=h("index-button-list"),f=h("list-composers"),g=h("content-with-heading");return l(),c("div",null,[_(n),_(g,null,{options:d(()=>[_(m,{index:o.composers.indexList},null,8,["index"])]),"heading-left":d(()=>[fm,t("p",ym,u(o.composers.total)+" composers",1)]),content:d(()=>[_(f,{composers:o.composers},null,8,["composers"])]),_:1})])}var bm=k(pm,[["render",gm]]);const wt={load:function(s){return p.library_composer(s.params.composer)},set:function(s,e){s.name=s.$route.params.composer,s.albums_list=new L(e.data.albums)}},km={name:"PageComposer",components:{ContentWithHeading:I,ListAlbums:G,ModalDialogComposer:ms},beforeRouteEnter(s,e,a){wt.load(s).then(r=>{a(o=>wt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;wt.load(s).then(o=>{wt.set(r,o),a()})},data(){return{name:"",albums_list:new L,show_composer_details_modal:!1}},methods:{open_tracks:function(){this.$router.push({name:"ComposerTracks",params:{composer:this.name}})},play:function(){p.player_play_expression('composer is "'+this.name+'" and media_kind is music',!0)}}},wm={class:"title is-4"},vm={class:"buttons is-centered"},$m=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),xm=[$m],Cm=t("span",{class:"icon"},[t("i",{class:"mdi mdi-shuffle"})],-1),qm=t("span",null,"Shuffle",-1),Sm=[Cm,qm],Pm={class:"heading has-text-centered-mobile"};function Am(s,e,a,r,o,i){const n=h("list-albums"),m=h("modal-dialog-composer"),f=h("content-with-heading");return l(),c("div",null,[_(f,null,{"heading-left":d(()=>[t("p",wm,u(o.name),1)]),"heading-right":d(()=>[t("div",vm,[t("a",{class:"button is-small is-light is-rounded",onClick:e[0]||(e[0]=g=>o.show_composer_details_modal=!0)},xm),t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...g)=>i.play&&i.play(...g))},Sm)])]),content:d(()=>[t("p",Pm,[C(u(o.albums_list.total)+" albums | ",1),t("a",{class:"has-text-link",onClick:e[2]||(e[2]=(...g)=>i.open_tracks&&i.open_tracks(...g))},"tracks")]),_(n,{albums:o.albums_list,hide_group_title:!0},null,8,["albums"]),_(m,{show:o.show_composer_details_modal,composer:{name:o.name},onClose:e[3]||(e[3]=g=>o.show_composer_details_modal=!1)},null,8,["show","composer"])]),_:1})])}var Tm=k(km,[["render",Am]]);const vt={load:function(s){return p.library_composer_tracks(s.params.composer)},set:function(s,e){s.composer=s.$route.params.composer,s.tracks=e.data.tracks}},Rm={name:"PageComposerTracks",components:{ContentWithHeading:I,ListItemTrack:ot,ModalDialogTrack:at,ModalDialogComposer:ms},beforeRouteEnter(s,e,a){vt.load(s).then(r=>{a(o=>vt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;vt.load(s).then(o=>{vt.set(r,o),a()})},data(){return{tracks:{items:[]},composer:"",min_rating:0,show_details_modal:!1,selected_track:{},show_composer_details_modal:!1}},computed:{index_list(){return[...new Set(this.tracks.items.map(s=>s.title_sort.charAt(0).toUpperCase()))]},rated_tracks(){return this.tracks.items.filter(s=>s.rating>=this.min_rating)}},methods:{open_albums:function(){this.show_details_modal=!1,this.$router.push({name:"ComposerAlbums",params:{composer:this.composer}})},play:function(){p.player_play_expression('composer is "'+this.composer+'" and media_kind is music',!0)},play_track:function(s){p.player_play_expression('composer is "'+this.composer+'" and media_kind is music',!1,s)},show_rating:function(s){s===.5&&(s=0),this.min_rating=Math.ceil(s)*20},open_dialog:function(s){this.selected_track=s,this.show_details_modal=!0}}},Im={class:"title is-4"},Em={class:"buttons is-centered"},Lm=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),Um=[Lm],Om=t("span",{class:"icon"},[t("i",{class:"mdi mdi-shuffle"})],-1),Dm=t("span",null,"Shuffle",-1),zm=[Om,Dm],Nm={class:"heading has-text-centered-mobile"},Vm=["onClick"],Bm=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),Mm=[Bm];function Fm(s,e,a,r,o,i){const n=h("list-item-track"),m=h("modal-dialog-track"),f=h("modal-dialog-composer"),g=h("content-with-heading");return l(),c("div",null,[_(g,null,{"heading-left":d(()=>[t("p",Im,u(o.composer),1)]),"heading-right":d(()=>[t("div",Em,[t("a",{class:"button is-small is-light is-rounded",onClick:e[0]||(e[0]=b=>o.show_composer_details_modal=!0)},Um),t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...b)=>i.play&&i.play(...b))},zm)])]),content:d(()=>[t("p",Nm,[t("a",{class:"has-text-link",onClick:e[2]||(e[2]=(...b)=>i.open_albums&&i.open_albums(...b))},"albums"),C(" | "+u(o.tracks.total)+" tracks ",1)]),(l(!0),c(R,null,U(i.rated_tracks,(b,$)=>(l(),v(n,{key:b.id,track:b,onClick:w=>i.play_track($)},{actions:d(()=>[t("a",{onClick:z(w=>i.open_dialog(b),["prevent","stop"])},Mm,8,Vm)]),_:2},1032,["track","onClick"]))),128)),_(m,{show:o.show_details_modal,track:o.selected_track,onClose:e[3]||(e[3]=b=>o.show_details_modal=!1)},null,8,["show","track"]),_(f,{show:o.show_composer_details_modal,composer:{name:o.composer},onClose:e[4]||(e[4]=b=>o.show_composer_details_modal=!1)},null,8,["show","composer"])]),_:1})])}var jm=k(Rm,[["render",Fm]]);const Gm={name:"ModalDialogAddRss",props:["show"],emits:["close","podcast-added"],data(){return{url:"",loading:!1}},watch:{show(){this.show&&(this.loading=!1,setTimeout(()=>{this.$refs.url_field.focus()},10))}},methods:{add_stream:function(){this.loading=!0,p.library_add(this.url).then(()=>{this.$emit("close"),this.$emit("podcast-added"),this.url=""}).catch(()=>{this.loading=!1})}}},Km={key:0,class:"modal is-active"},Hm={class:"modal-content fd-modal-card"},Wm={class:"card"},Ym={class:"card-content"},Qm=t("p",{class:"title is-4"},"Add Podcast RSS feed URL",-1),Jm={class:"field"},Xm={class:"control is-expanded has-icons-left"},Zm=["disabled"],th=t("span",{class:"icon is-left"},[t("i",{class:"mdi mdi-rss"})],-1),sh=t("p",{class:"help"}," Adding a podcast includes creating an RSS playlist, that will allow OwnTone to manage the podcast subscription. ",-1),eh={key:0,class:"card-footer"},ih=t("a",{class:"card-footer-item button is-loading"},[t("span",{class:"icon"},[t("i",{class:"mdi mdi-web"})]),t("span",{class:"is-size-7"},"Processing ...")],-1),oh=[ih],ah={key:1,class:"card-footer"},nh=t("span",{class:"icon"},[t("i",{class:"mdi mdi-cancel"})],-1),lh=t("span",{class:"is-size-7"},"Cancel",-1),rh=[nh,lh],dh=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),ch=t("span",{class:"is-size-7"},"Add",-1),_h=[dh,ch];function uh(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",Km,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",Hm,[t("div",Wm,[t("div",Ym,[Qm,t("form",{onSubmit:e[2]||(e[2]=z((...n)=>i.add_stream&&i.add_stream(...n),["prevent"]))},[t("div",Jm,[t("p",Xm,[O(t("input",{ref:"url_field","onUpdate:modelValue":e[1]||(e[1]=n=>o.url=n),class:"input is-shadowless",type:"text",placeholder:"http://url-to-rss",disabled:o.loading},null,8,Zm),[[B,o.url]]),th]),sh])],32)]),o.loading?(l(),c("footer",eh,oh)):(l(),c("footer",ah,[t("a",{class:"card-footer-item has-text-danger",onClick:e[3]||(e[3]=n=>s.$emit("close"))},rh),t("a",{class:"card-footer-item has-background-info has-text-white has-text-weight-bold",onClick:e[4]||(e[4]=(...n)=>i.add_stream&&i.add_stream(...n))},_h)]))])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[5]||(e[5]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var mh=k(Gm,[["render",uh]]);const hh={name:"ProgressBar",props:["max","value"],computed:{width(){return this.value>0&&this.max>0?parseInt(this.value*100/this.max):0},width_percent(){return this.width+"%"}}};function ph(s,e,a,r,o,i){return i.width>0?(l(),c("div",{key:0,class:"progress-bar mt-2",style:ts({width:i.width_percent})},null,4)):y("",!0)}var zs=k(hh,[["render",ph]]);const $t={load:function(s){return Promise.all([p.library_albums("podcast"),p.library_podcasts_new_episodes()])},set:function(s,e){s.albums=new L(e[0].data),s.new_episodes=e[1].data.tracks}},fh={name:"PagePodcasts",components:{ContentWithHeading:I,ListItemTrack:ot,ListAlbums:G,ModalDialogTrack:at,ModalDialogAddRss:mh,ProgressBar:zs},beforeRouteEnter(s,e,a){$t.load(s).then(r=>{a(o=>$t.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;$t.load(s).then(o=>{$t.set(r,o),a()})},data(){return{albums:[],new_episodes:{items:[]},show_url_modal:!1,show_track_details_modal:!1,selected_track:{}}},computed:{rss(){return this.$store.state.rss_count}},methods:{play_track:function(s){p.player_play_uri(s.uri,!1)},open_track_dialog:function(s){this.selected_track=s,this.show_track_details_modal=!0},mark_all_played:function(){this.new_episodes.items.forEach(s=>{p.library_track_update(s.id,{play_count:"increment"})}),this.new_episodes.items={}},open_add_podcast_dialog:function(s){this.show_url_modal=!0},reload_new_episodes:function(){p.library_podcasts_new_episodes().then(({data:s})=>{this.new_episodes=s.tracks})},reload_podcasts:function(){p.library_albums("podcast").then(({data:s})=>{this.albums=new L(s),this.reload_new_episodes()})},update_rss:function(){this.$store.commit(ls,"rss"),this.$store.commit(it,!0)}}},yh=t("p",{class:"title is-4"},"New episodes",-1),gh={class:"buttons is-centered"},bh=t("span",{class:"icon"},[t("i",{class:"mdi mdi-pencil"})],-1),kh=t("span",null,"Mark All Played",-1),wh=[bh,kh],vh=["onClick"],$h=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),xh=[$h],Ch=t("p",{class:"title is-4"},"Podcasts",-1),qh={class:"heading"},Sh={class:"buttons is-centered"},Ph=t("span",{class:"icon"},[t("i",{class:"mdi mdi-refresh"})],-1),Ah=t("span",null,"Update",-1),Th=[Ph,Ah],Rh=t("span",{class:"icon"},[t("i",{class:"mdi mdi-rss"})],-1),Ih=t("span",null,"Add Podcast",-1),Eh=[Rh,Ih];function Lh(s,e,a,r,o,i){const n=h("progress-bar"),m=h("list-item-track"),f=h("modal-dialog-track"),g=h("content-with-heading"),b=h("list-albums"),$=h("modal-dialog-add-rss");return l(),c("div",null,[o.new_episodes.items.length>0?(l(),v(g,{key:0},{"heading-left":d(()=>[yh]),"heading-right":d(()=>[t("div",gh,[t("a",{class:"button is-small",onClick:e[0]||(e[0]=(...w)=>i.mark_all_played&&i.mark_all_played(...w))},wh)])]),content:d(()=>[(l(!0),c(R,null,U(o.new_episodes.items,w=>(l(),v(m,{key:w.id,track:w,onClick:P=>i.play_track(w)},{progress:d(()=>[_(n,{max:w.length_ms,value:w.seek_ms},null,8,["max","value"])]),actions:d(()=>[t("a",{onClick:P=>i.open_track_dialog(w)},xh,8,vh)]),_:2},1032,["track","onClick"]))),128)),_(f,{show:o.show_track_details_modal,track:o.selected_track,onClose:e[1]||(e[1]=w=>o.show_track_details_modal=!1),onPlayCountChanged:i.reload_new_episodes},null,8,["show","track","onPlayCountChanged"])]),_:1})):y("",!0),_(g,null,{"heading-left":d(()=>[Ch,t("p",qh,u(o.albums.total)+" podcasts",1)]),"heading-right":d(()=>[t("div",Sh,[i.rss.tracks>0?(l(),c("a",{key:0,class:"button is-small",onClick:e[2]||(e[2]=(...w)=>i.update_rss&&i.update_rss(...w))},Th)):y("",!0),t("a",{class:"button is-small",onClick:e[3]||(e[3]=(...w)=>i.open_add_podcast_dialog&&i.open_add_podcast_dialog(...w))},Eh)])]),content:d(()=>[_(b,{albums:o.albums,onPlayCountChanged:e[4]||(e[4]=w=>i.reload_new_episodes()),onPodcastDeleted:e[5]||(e[5]=w=>i.reload_podcasts())},null,8,["albums"]),_($,{show:o.show_url_modal,onClose:e[6]||(e[6]=w=>o.show_url_modal=!1),onPodcastAdded:e[7]||(e[7]=w=>i.reload_podcasts())},null,8,["show"])]),_:1})])}var Uh=k(fh,[["render",Lh]]);const xt={load:function(s){return Promise.all([p.library_album(s.params.album_id),p.library_podcast_episodes(s.params.album_id)])},set:function(s,e){s.album=e[0].data,s.tracks=e[1].data.tracks.items}},Oh={name:"PagePodcast",components:{ContentWithHeading:I,ListItemTrack:ot,ModalDialogTrack:at,ModalDialogAlbum:jt,ModalDialog:rs,ProgressBar:zs},beforeRouteEnter(s,e,a){xt.load(s).then(r=>{a(o=>xt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;xt.load(s).then(o=>{xt.set(r,o),a()})},data(){return{album:{},tracks:[],show_details_modal:!1,selected_track:{},show_album_details_modal:!1,show_remove_podcast_modal:!1,rss_playlist_to_remove:{}}},computed:{new_tracks(){return this.tracks.filter(s=>s.play_count===0).length}},methods:{play:function(){p.player_play_uri(this.album.uri,!1)},play_track:function(s){p.player_play_uri(s.uri,!1)},open_dialog:function(s){this.selected_track=s,this.show_details_modal=!0},open_remove_podcast_dialog:function(){this.show_album_details_modal=!1,p.library_track_playlists(this.tracks[0].id).then(({data:s})=>{const e=s.items.filter(a=>a.type==="rss");if(e.length!==1){this.$store.dispatch("add_notification",{text:"Podcast cannot be removed. Probably it was not added as an RSS playlist.",type:"danger"});return}this.rss_playlist_to_remove=e[0],this.show_remove_podcast_modal=!0})},remove_podcast:function(){this.show_remove_podcast_modal=!1,p.library_playlist_delete(this.rss_playlist_to_remove.id).then(()=>{this.$router.replace({path:"/podcasts"})})},reload_tracks:function(){p.library_podcast_episodes(this.album.id).then(({data:s})=>{this.tracks=s.tracks.items})}}},Dh={class:"title is-4"},zh={class:"buttons is-centered"},Nh=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),Vh=[Nh],Bh=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),Mh=t("span",null,"Play",-1),Fh=[Bh,Mh],jh={class:"heading has-text-centered-mobile"},Gh=["onClick"],Kh=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),Hh=[Kh],Wh=t("p",null,"Permanently remove this podcast from your library?",-1),Yh={class:"is-size-7"},Qh=C(" (This will also remove the RSS playlist "),Jh=C(".) ");function Xh(s,e,a,r,o,i){const n=h("progress-bar"),m=h("list-item-track"),f=h("modal-dialog-track"),g=h("modal-dialog-album"),b=h("modal-dialog"),$=h("content-with-heading");return l(),v($,null,{"heading-left":d(()=>[t("div",Dh,u(o.album.name),1)]),"heading-right":d(()=>[t("div",zh,[t("a",{class:"button is-small is-light is-rounded",onClick:e[0]||(e[0]=w=>o.show_album_details_modal=!0)},Vh),t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...w)=>i.play&&i.play(...w))},Fh)])]),content:d(()=>[t("p",jh,u(o.album.track_count)+" tracks ",1),(l(!0),c(R,null,U(o.tracks,w=>(l(),v(m,{key:w.id,track:w,onClick:P=>i.play_track(w)},{progress:d(()=>[_(n,{max:w.length_ms,value:w.seek_ms},null,8,["max","value"])]),actions:d(()=>[t("a",{onClick:z(P=>i.open_dialog(w),["prevent","stop"])},Hh,8,Gh)]),_:2},1032,["track","onClick"]))),128)),_(f,{show:o.show_details_modal,track:o.selected_track,onClose:e[2]||(e[2]=w=>o.show_details_modal=!1),onPlayCountChanged:i.reload_tracks},null,8,["show","track","onPlayCountChanged"]),_(g,{show:o.show_album_details_modal,album:o.album,media_kind:"podcast",new_tracks:i.new_tracks,onClose:e[3]||(e[3]=w=>o.show_album_details_modal=!1),onPlayCountChanged:i.reload_tracks,onRemovePodcast:i.open_remove_podcast_dialog},null,8,["show","album","new_tracks","onPlayCountChanged","onRemovePodcast"]),_(b,{show:o.show_remove_podcast_modal,title:"Remove podcast",delete_action:"Remove",onClose:e[4]||(e[4]=w=>o.show_remove_podcast_modal=!1),onDelete:i.remove_podcast},{"modal-content":d(()=>[Wh,t("p",Yh,[Qh,t("b",null,u(o.rss_playlist_to_remove.name),1),Jh])]),_:1},8,["show","onDelete"])]),_:1})}var Zh=k(Oh,[["render",Xh]]);const tp={name:"TabsAudiobooks"},sp={class:"section fd-tabs-section"},ep={class:"container"},ip={class:"columns is-centered"},op={class:"column is-four-fifths"},ap={class:"tabs is-centered is-small"},np=["onClick","onKeypress"],lp=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-artist"})],-1),rp=t("span",{class:""},"Authors",-1),dp=[lp,rp],cp=["onClick","onKeypress"],_p=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-album"})],-1),up=t("span",{class:""},"Audiobooks",-1),mp=[_p,up];function hp(s,e,a,r,o,i){const n=h("router-link");return l(),c("section",sp,[t("div",ep,[t("div",ip,[t("div",op,[t("div",ap,[t("ul",null,[_(n,{to:"/audiobooks/artists",custom:""},{default:d(({navigate:m,isActive:f})=>[t("li",{class:q({"is-active":f})},[t("a",{onClick:m,onKeypress:V(m,["enter"])},dp,40,np)],2)]),_:1}),_(n,{to:"/audiobooks/albums",custom:""},{default:d(({navigate:m,isActive:f})=>[t("li",{class:q({"is-active":f})},[t("a",{onClick:m,onKeypress:V(m,["enter"])},mp,40,cp)],2)]),_:1})])])])])])])}var Ns=k(tp,[["render",hp]]);const Ct={load:function(s){return p.library_albums("audiobook")},set:function(s,e){s.albums=new L(e.data),s.albums.group(Z("name_sort"))}},pp={name:"PageAudiobooksAlbums",components:{TabsAudiobooks:Ns,ContentWithHeading:I,IndexButtonList:W,ListAlbums:G},beforeRouteEnter(s,e,a){Ct.load(s).then(r=>{a(o=>Ct.set(o,r))})},beforeRouteUpdate(s,e,a){if(!this.albums.isEmpty()){a();return}const r=this;Ct.load(s).then(o=>{Ct.set(r,o),a()})},data(){return{albums:new L}},methods:{}},fp={class:"fd-page-with-tabs"},yp=t("p",{class:"title is-4"},"Audiobooks",-1),gp={class:"heading"};function bp(s,e,a,r,o,i){const n=h("tabs-audiobooks"),m=h("index-button-list"),f=h("list-albums"),g=h("content-with-heading");return l(),c("div",fp,[_(n),_(g,null,{options:d(()=>[_(m,{index:o.albums.indexList},null,8,["index"])]),"heading-left":d(()=>[yp,t("p",gp,u(o.albums.count)+" Audiobooks",1)]),content:d(()=>[_(f,{albums:o.albums},null,8,["albums"])]),_:1})])}var kp=k(pp,[["render",bp]]);const qt={load:function(s){return p.library_artists("audiobook")},set:function(s,e){s.artists_list=new L(e.data)}},wp={name:"PageAudiobooksArtists",components:{ContentWithHeading:I,TabsAudiobooks:Ns,IndexButtonList:W,ListArtists:ds},beforeRouteEnter(s,e,a){qt.load(s).then(r=>{a(o=>qt.set(o,r))})},beforeRouteUpdate(s,e,a){if(!this.artists_list.isEmpty()){a();return}const r=this;qt.load(s).then(o=>{qt.set(r,o),a()})},data(){return{artists_list:new L}},computed:{artists(){return this.artists_list?(this.artists_list.group(Z("name_sort")),this.artists_list):[]}},methods:{}},vp={class:"fd-page-with-tabs"},$p=t("p",{class:"title is-4"},"Authors",-1),xp={class:"heading"};function Cp(s,e,a,r,o,i){const n=h("tabs-audiobooks"),m=h("index-button-list"),f=h("list-artists"),g=h("content-with-heading");return l(),c("div",vp,[_(n),_(g,null,{options:d(()=>[_(m,{index:i.artists.indexList},null,8,["index"])]),"heading-left":d(()=>[$p,t("p",xp,u(i.artists.count)+" Authors",1)]),"heading-right":d(()=>[]),content:d(()=>[_(f,{artists:i.artists},null,8,["artists"])]),_:1})])}var qp=k(wp,[["render",Cp]]);const St={load:function(s){return Promise.all([p.library_artist(s.params.artist_id),p.library_artist_albums(s.params.artist_id)])},set:function(s,e){s.artist=e[0].data,s.albums=new L(e[1].data)}},Sp={name:"PageAudiobooksArtist",components:{ContentWithHeading:I,ListAlbums:G,ModalDialogArtist:Gt},beforeRouteEnter(s,e,a){St.load(s).then(r=>{a(o=>St.set(o,r))})},beforeRouteUpdate(s,e,a){if(!this.albums.isEmpty()){a();return}const r=this;St.load(s).then(o=>{St.set(r,o),a()})},data(){return{artist:{},albums:new L,show_artist_details_modal:!1}},methods:{play:function(){p.player_play_uri(this.albums.items.map(s=>s.uri).join(","),!1)}}},Pp={class:"title is-4"},Ap={class:"buttons is-centered"},Tp=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),Rp=[Tp],Ip=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),Ep=t("span",null,"Shuffle",-1),Lp=[Ip,Ep],Up={class:"heading has-text-centered-mobile"};function Op(s,e,a,r,o,i){const n=h("list-albums"),m=h("modal-dialog-artist"),f=h("content-with-heading");return l(),v(f,null,{"heading-left":d(()=>[t("p",Pp,u(o.artist.name),1)]),"heading-right":d(()=>[t("div",Ap,[t("a",{class:"button is-small is-light is-rounded",onClick:e[0]||(e[0]=g=>o.show_artist_details_modal=!0)},Rp),t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...g)=>i.play&&i.play(...g))},Lp)])]),content:d(()=>[t("p",Up,u(o.artist.album_count)+" albums ",1),_(n,{albums:o.albums},null,8,["albums"]),_(m,{show:o.show_artist_details_modal,artist:o.artist,onClose:e[2]||(e[2]=g=>o.show_artist_details_modal=!1)},null,8,["show","artist"])]),_:1})}var Dp=k(Sp,[["render",Op]]);const Pt={load:function(s){return Promise.all([p.library_album(s.params.album_id),p.library_album_tracks(s.params.album_id)])},set:function(s,e){s.album=e[0].data,s.tracks=e[1].data.items}},zp={name:"PageAudiobooksAlbum",components:{ContentWithHero:_s,ListTracks:H,ModalDialogAlbum:jt,CoverArtwork:K},beforeRouteEnter(s,e,a){Pt.load(s).then(r=>{a(o=>Pt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;Pt.load(s).then(o=>{Pt.set(r,o),a()})},data(){return{album:{},tracks:[],show_album_details_modal:!1}},methods:{open_artist:function(){this.show_details_modal=!1,this.$router.push({path:"/audiobooks/artists/"+this.album.artist_id})},play:function(){p.player_play_uri(this.album.uri,!1)},play_track:function(s){p.player_play_uri(this.album.uri,!1,s)},open_dialog:function(s){this.selected_track=s,this.show_details_modal=!0}}},Np={class:"title is-5"},Vp={class:"subtitle is-6 has-text-link has-text-weight-normal"},Bp={class:"buttons fd-is-centered-mobile fd-has-margin-top"},Mp=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),Fp=t("span",null,"Play",-1),jp=[Mp,Fp],Gp=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),Kp=[Gp],Hp={class:"image is-square fd-has-shadow fd-has-action"},Wp={class:"heading is-7 has-text-centered-mobile fd-has-margin-top"};function Yp(s,e,a,r,o,i){const n=h("cover-artwork"),m=h("list-tracks"),f=h("modal-dialog-album"),g=h("content-with-hero");return l(),v(g,null,{"heading-left":d(()=>[t("h1",Np,u(o.album.name),1),t("h2",Vp,[t("a",{class:"has-text-link",onClick:e[0]||(e[0]=(...b)=>i.open_artist&&i.open_artist(...b))},u(o.album.artist),1)]),t("div",Bp,[t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...b)=>i.play&&i.play(...b))},jp),t("a",{class:"button is-small is-light is-rounded",onClick:e[2]||(e[2]=b=>o.show_album_details_modal=!0)},Kp)])]),"heading-right":d(()=>[t("p",Hp,[_(n,{artwork_url:o.album.artwork_url,artist:o.album.artist,album:o.album.name,onClick:e[3]||(e[3]=b=>o.show_album_details_modal=!0)},null,8,["artwork_url","artist","album"])])]),content:d(()=>[t("p",Wp,u(o.album.track_count)+" tracks ",1),_(m,{tracks:o.tracks,uris:o.album.uri},null,8,["tracks","uris"]),_(f,{show:o.show_album_details_modal,album:o.album,media_kind:"audiobook",onClose:e[4]||(e[4]=b=>o.show_album_details_modal=!1)},null,8,["show","album"])]),_:1})}var Qp=k(zp,[["render",Yp]]);const Jp={name:"ListItemPlaylist",props:["playlist"]},Xp={class:"media"},Zp={key:0,class:"media-left fd-has-action"},tf={class:"media-content fd-has-action is-clipped"},sf={class:"title is-6"},ef={class:"media-right"};function of(s,e,a,r,o,i){return l(),c("div",Xp,[s.$slots.icon?(l(),c("figure",Zp,[E(s.$slots,"icon")])):y("",!0),t("div",tf,[t("h1",sf,u(a.playlist.name),1)]),t("div",ef,[E(s.$slots,"actions")])])}var Vs=k(Jp,[["render",of]]);const af={name:"ModalDialogPlaylist",props:["show","playlist","uris"],emits:["close"],methods:{play:function(){this.$emit("close"),p.player_play_uri(this.uris?this.uris:this.playlist.uri,!1)},queue_add:function(){this.$emit("close"),p.queue_add(this.uris?this.uris:this.playlist.uri)},queue_add_next:function(){this.$emit("close"),p.queue_add_next(this.uris?this.uris:this.playlist.uri)},open_playlist:function(){this.$emit("close"),this.$router.push({path:"/playlists/"+this.playlist.id+"/tracks"})}}},nf={key:0,class:"modal is-active"},lf={class:"modal-content fd-modal-card"},rf={class:"card"},df={class:"card-content"},cf={class:"title is-4"},_f={class:"content is-small"},uf=t("span",{class:"heading"},"Path",-1),mf={class:"title is-6"},hf=t("span",{class:"heading"},"Type",-1),pf={class:"title is-6"},ff={key:0,class:"card-footer"},yf=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),gf=t("span",{class:"is-size-7"},"Add",-1),bf=[yf,gf],kf=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-play"})],-1),wf=t("span",{class:"is-size-7"},"Add Next",-1),vf=[kf,wf],$f=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),xf=t("span",{class:"is-size-7"},"Play",-1),Cf=[$f,xf];function qf(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",nf,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",lf,[t("div",rf,[t("div",df,[t("p",cf,[t("a",{class:"has-text-link",onClick:e[1]||(e[1]=(...n)=>i.open_playlist&&i.open_playlist(...n))},u(a.playlist.name),1)]),t("div",_f,[t("p",null,[uf,t("span",mf,u(a.playlist.path),1)]),t("p",null,[hf,t("span",pf,u(a.playlist.type),1)])])]),a.playlist.folder?y("",!0):(l(),c("footer",ff,[t("a",{class:"card-footer-item has-text-dark",onClick:e[2]||(e[2]=(...n)=>i.queue_add&&i.queue_add(...n))},bf),t("a",{class:"card-footer-item has-text-dark",onClick:e[3]||(e[3]=(...n)=>i.queue_add_next&&i.queue_add_next(...n))},vf),t("a",{class:"card-footer-item has-text-dark",onClick:e[4]||(e[4]=(...n)=>i.play&&i.play(...n))},Cf)]))])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[5]||(e[5]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var hs=k(af,[["render",qf]]);const Sf={name:"ListPlaylists",components:{ListItemPlaylist:Vs,ModalDialogPlaylist:hs},props:["playlists"],data(){return{show_details_modal:!1,selected_playlist:{}}},methods:{open_playlist:function(s){s.type!=="folder"?this.$router.push({path:"/playlists/"+s.id+"/tracks"}):this.$router.push({path:"/playlists/"+s.id})},open_dialog:function(s){this.selected_playlist=s,this.show_details_modal=!0}}},Pf={class:"icon"},Af=["onClick"],Tf=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),Rf=[Tf];function If(s,e,a,r,o,i){const n=h("list-item-playlist"),m=h("modal-dialog-playlist");return l(),c("div",null,[(l(!0),c(R,null,U(a.playlists,f=>(l(),v(n,{key:f.id,playlist:f,onClick:g=>i.open_playlist(f)},{icon:d(()=>[t("span",Pf,[t("i",{class:q(["mdi",{"mdi-library-music":f.type!=="folder","mdi-rss":f.type==="rss","mdi-folder":f.type==="folder"}])},null,2)])]),actions:d(()=>[t("a",{onClick:z(g=>i.open_dialog(f),["prevent","stop"])},Rf,8,Af)]),_:2},1032,["playlist","onClick"]))),128)),_(m,{show:o.show_details_modal,playlist:o.selected_playlist,onClose:e[0]||(e[0]=f=>o.show_details_modal=!1)},null,8,["show","playlist"])])}var Bs=k(Sf,[["render",If]]);const At={load:function(s){return Promise.all([p.library_playlist(s.params.playlist_id),p.library_playlist_folder(s.params.playlist_id)])},set:function(s,e){s.playlist=e[0].data,s.playlists=e[1].data}},Ef={name:"PagePlaylists",components:{ContentWithHeading:I,ListPlaylists:Bs},beforeRouteEnter(s,e,a){At.load(s).then(r=>{a(o=>At.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;At.load(s).then(o=>{At.set(r,o),a()})},data(){return{playlist:{},playlists:{}}}},Lf={class:"title is-4"},Uf={class:"heading"};function Of(s,e,a,r,o,i){const n=h("list-playlists"),m=h("content-with-heading");return l(),v(m,null,{"heading-left":d(()=>[t("p",Lf,u(o.playlist.name),1),t("p",Uf,u(o.playlists.total)+" playlists",1)]),content:d(()=>[_(n,{playlists:o.playlists.items},null,8,["playlists"])]),_:1})}var Df=k(Ef,[["render",Of]]);const Tt={load:function(s){return Promise.all([p.library_playlist(s.params.playlist_id),p.library_playlist_tracks(s.params.playlist_id)])},set:function(s,e){s.playlist=e[0].data,s.tracks=e[1].data.items}},zf={name:"PagePlaylist",components:{ContentWithHeading:I,ListTracks:H,ModalDialogPlaylist:hs},beforeRouteEnter(s,e,a){Tt.load(s).then(r=>{a(o=>Tt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;Tt.load(s).then(o=>{Tt.set(r,o),a()})},data(){return{playlist:{},tracks:[],show_playlist_details_modal:!1}},computed:{uris(){return this.playlist.random?this.tracks.map(s=>s.uri).join(","):this.playlist.uri}},methods:{play:function(){p.player_play_uri(this.uris,!0)}}},Nf={class:"title is-4"},Vf={class:"buttons is-centered"},Bf=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),Mf=[Bf],Ff=t("span",{class:"icon"},[t("i",{class:"mdi mdi-shuffle"})],-1),jf=t("span",null,"Shuffle",-1),Gf=[Ff,jf],Kf={class:"heading has-text-centered-mobile"};function Hf(s,e,a,r,o,i){const n=h("list-tracks"),m=h("modal-dialog-playlist"),f=h("content-with-heading");return l(),v(f,null,{"heading-left":d(()=>[t("div",Nf,u(o.playlist.name),1)]),"heading-right":d(()=>[t("div",Vf,[t("a",{class:"button is-small is-light is-rounded",onClick:e[0]||(e[0]=g=>o.show_playlist_details_modal=!0)},Mf),t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...g)=>i.play&&i.play(...g))},Gf)])]),content:d(()=>[t("p",Kf,u(o.tracks.length)+" tracks",1),_(n,{tracks:o.tracks,uris:i.uris},null,8,["tracks","uris"]),_(m,{show:o.show_playlist_details_modal,playlist:o.playlist,uris:i.uris,onClose:e[2]||(e[2]=g=>o.show_playlist_details_modal=!1)},null,8,["show","playlist","uris"])]),_:1})}var Wf=k(zf,[["render",Hf]]);const Yf={name:"ListItemDirectory",props:["directory"]},Qf={class:"media"},Jf=t("figure",{class:"media-left fd-has-action"},[t("span",{class:"icon"},[t("i",{class:"mdi mdi-folder"})])],-1),Xf={class:"media-content fd-has-action is-clipped"},Zf={class:"title is-6"},ty={class:"subtitle is-7 has-text-grey-light"},sy={class:"media-right"};function ey(s,e,a,r,o,i){return l(),c("div",Qf,[Jf,t("div",Xf,[t("h1",Zf,u(a.directory.path.substring(a.directory.path.lastIndexOf("/")+1)),1),t("h2",ty,u(a.directory.path),1)]),t("div",sy,[E(s.$slots,"actions")])])}var iy=k(Yf,[["render",ey]]);const oy={name:"ModalDialogDirectory",props:["show","directory"],emits:["close"],methods:{play:function(){this.$emit("close"),p.player_play_expression('path starts with "'+this.directory.path+'" order by path asc',!1)},queue_add:function(){this.$emit("close"),p.queue_expression_add('path starts with "'+this.directory.path+'" order by path asc')},queue_add_next:function(){this.$emit("close"),p.queue_expression_add_next('path starts with "'+this.directory.path+'" order by path asc')}}},ay={key:0,class:"modal is-active"},ny={class:"modal-content fd-modal-card"},ly={class:"card"},ry={class:"card-content"},dy={class:"title is-4"},cy={class:"card-footer"},_y=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),uy=t("span",{class:"is-size-7"},"Add",-1),my=[_y,uy],hy=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-play"})],-1),py=t("span",{class:"is-size-7"},"Add Next",-1),fy=[hy,py],yy=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),gy=t("span",{class:"is-size-7"},"Play",-1),by=[yy,gy];function ky(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",ay,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",ny,[t("div",ly,[t("div",ry,[t("p",dy,u(a.directory.path),1)]),t("footer",cy,[t("a",{class:"card-footer-item has-text-dark",onClick:e[1]||(e[1]=(...n)=>i.queue_add&&i.queue_add(...n))},my),t("a",{class:"card-footer-item has-text-dark",onClick:e[2]||(e[2]=(...n)=>i.queue_add_next&&i.queue_add_next(...n))},fy),t("a",{class:"card-footer-item has-text-dark",onClick:e[3]||(e[3]=(...n)=>i.play&&i.play(...n))},by)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[4]||(e[4]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var wy=k(oy,[["render",ky]]);const Rt={load:function(s){return s.query.directory?p.library_files(s.query.directory):Promise.resolve()},set:function(s,e){e?s.files=e.data:s.files={directories:s.$store.state.config.directories.map(a=>({path:a})),tracks:{items:[]},playlists:{items:[]}}}},vy={name:"PageFiles",components:{ContentWithHeading:I,ListItemDirectory:iy,ListItemPlaylist:Vs,ListItemTrack:ot,ModalDialogDirectory:wy,ModalDialogPlaylist:hs,ModalDialogTrack:at},beforeRouteEnter(s,e,a){Rt.load(s).then(r=>{a(o=>Rt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;Rt.load(s).then(o=>{Rt.set(r,o),a()})},data(){return{files:{directories:[],tracks:{items:[]},playlists:{items:[]}},show_directory_details_modal:!1,selected_directory:{},show_playlist_details_modal:!1,selected_playlist:{},show_track_details_modal:!1,selected_track:{}}},computed:{current_directory(){return this.$route.query&&this.$route.query.directory?this.$route.query.directory:"/"}},methods:{open_parent_directory:function(){this.current_directory.slice(0,this.current_directory.lastIndexOf("/"))===""||this.$store.state.config.directories.includes(this.current_directory)?this.$router.push({path:"/files"}):this.$router.push({path:"/files",query:{directory:this.current_directory.slice(0,this.current_directory.lastIndexOf("/"))}})},open_directory:function(s){this.$router.push({path:"/files",query:{directory:s.path}})},open_directory_dialog:function(s){this.selected_directory=s,this.show_directory_details_modal=!0},play:function(){p.player_play_expression('path starts with "'+this.current_directory+'" order by path asc',!1)},play_track:function(s){p.player_play_uri(this.files.tracks.items.map(e=>e.uri).join(","),!1,s)},open_track_dialog:function(s){this.selected_track=s,this.show_track_details_modal=!0},open_playlist:function(s){this.$router.push({path:"/playlists/"+s.id+"/tracks"})},open_playlist_dialog:function(s){this.selected_playlist=s,this.show_playlist_details_modal=!0}}},$y=t("p",{class:"title is-4"},"Files",-1),xy={class:"title is-7 has-text-grey"},Cy={class:"buttons is-centered"},qy=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),Sy=[qy],Py=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),Ay=t("span",null,"Play",-1),Ty=[Py,Ay],Ry=t("figure",{class:"media-left fd-has-action"},[t("span",{class:"icon"},[t("i",{class:"mdi mdi-subdirectory-arrow-left"})])],-1),Iy=t("div",{class:"media-content fd-has-action is-clipped"},[t("h1",{class:"title is-6"},"..")],-1),Ey={class:"media-right"},Ly=["onClick"],Uy=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),Oy=[Uy],Dy=t("span",{class:"icon"},[t("i",{class:"mdi mdi-library-music"})],-1),zy=["onClick"],Ny=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),Vy=[Ny],By=t("span",{class:"icon"},[t("i",{class:"mdi mdi-file-outline"})],-1),My=["onClick"],Fy=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),jy=[Fy];function Gy(s,e,a,r,o,i){const n=h("list-item-directory"),m=h("list-item-playlist"),f=h("list-item-track"),g=h("modal-dialog-directory"),b=h("modal-dialog-playlist"),$=h("modal-dialog-track"),w=h("content-with-heading");return l(),c("div",null,[_(w,null,{"heading-left":d(()=>[$y,t("p",xy,u(i.current_directory),1)]),"heading-right":d(()=>[t("div",Cy,[t("a",{class:"button is-small is-light is-rounded",onClick:e[0]||(e[0]=P=>i.open_directory_dialog({path:i.current_directory}))},Sy),t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...P)=>i.play&&i.play(...P))},Ty)])]),content:d(()=>[s.$route.query.directory?(l(),c("div",{key:0,class:"media",onClick:e[2]||(e[2]=P=>i.open_parent_directory())},[Ry,Iy,t("div",Ey,[E(s.$slots,"actions")])])):y("",!0),(l(!0),c(R,null,U(o.files.directories,P=>(l(),v(n,{key:P.path,directory:P,onClick:S=>i.open_directory(P)},{actions:d(()=>[t("a",{onClick:S=>i.open_directory_dialog(P)},Oy,8,Ly)]),_:2},1032,["directory","onClick"]))),128)),(l(!0),c(R,null,U(o.files.playlists.items,P=>(l(),v(m,{key:P.id,playlist:P,onClick:S=>i.open_playlist(P)},{icon:d(()=>[Dy]),actions:d(()=>[t("a",{onClick:S=>i.open_playlist_dialog(P)},Vy,8,zy)]),_:2},1032,["playlist","onClick"]))),128)),(l(!0),c(R,null,U(o.files.tracks.items,(P,S)=>(l(),v(f,{key:P.id,track:P,onClick:F=>i.play_track(S)},{icon:d(()=>[By]),actions:d(()=>[t("a",{onClick:F=>i.open_track_dialog(P)},jy,8,My)]),_:2},1032,["track","onClick"]))),128)),_(g,{show:o.show_directory_details_modal,directory:o.selected_directory,onClose:e[3]||(e[3]=P=>o.show_directory_details_modal=!1)},null,8,["show","directory"]),_(b,{show:o.show_playlist_details_modal,playlist:o.selected_playlist,onClose:e[4]||(e[4]=P=>o.show_playlist_details_modal=!1)},null,8,["show","playlist"]),_($,{show:o.show_track_details_modal,track:o.selected_track,onClose:e[5]||(e[5]=P=>o.show_track_details_modal=!1)},null,8,["show","track"])]),_:3})])}var Ky=k(vy,[["render",Gy]]);const It={load:function(s){return p.library_radio_streams()},set:function(s,e){s.tracks=e.data.tracks}},Hy={name:"PageRadioStreams",components:{ContentWithHeading:I,ListTracks:H},beforeRouteEnter(s,e,a){It.load(s).then(r=>{a(o=>It.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;It.load(s).then(o=>{It.set(r,o),a()})},data(){return{tracks:{items:[]}}}},Wy=t("p",{class:"title is-4"},"Radio",-1),Yy={class:"heading has-text-centered-mobile"};function Qy(s,e,a,r,o,i){const n=h("list-tracks"),m=h("content-with-heading");return l(),c("div",null,[_(m,null,{"heading-left":d(()=>[Wy]),content:d(()=>[t("p",Yy,u(o.tracks.total)+" tracks ",1),_(n,{tracks:o.tracks.items},null,8,["tracks"])]),_:1})])}var Jy=k(Hy,[["render",Qy]]);const Xy={name:"ContentText"},Zy={class:"section fd-content py-3"},tg={class:"container"},sg={class:"columns is-centered"},eg={class:"column is-four-fifths"};function ig(s,e,a,r,o,i){return l(),c("section",Zy,[t("div",tg,[t("div",sg,[t("div",eg,[E(s.$slots,"content")])])])])}var Ms=k(Xy,[["render",ig]]);const og={name:"TabsSearch",props:["query"],computed:{spotify_enabled(){return this.$store.state.spotify.webapi_token_valid},route_query:function(){return this.query?{type:"track,artist,album,playlist,audiobook,podcast",query:this.query,limit:3,offset:0}:null}},methods:{search_library:function(){this.$store.state.search_path="/search/library",this.$router.push({path:this.$store.state.search_path,query:this.route_query})},search_spotify:function(){this.$store.state.search_path="/search/spotify",this.$router.push({path:this.$store.state.search_path,query:this.route_query})}}},ag={key:0,class:"section fd-remove-padding-bottom"},ng={class:"container"},lg={class:"columns is-centered"},rg={class:"column is-four-fifths"},dg={class:"tabs is-centered is-small is-toggle is-toggle-rounded"},cg=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-library-books"})],-1),_g=t("span",{class:""},"Library",-1),ug=[cg,_g],mg=t("span",{class:"icon is-small"},[t("i",{class:"mdi mdi-spotify"})],-1),hg=t("span",{class:""},"Spotify",-1),pg=[mg,hg];function fg(s,e,a,r,o,i){return i.spotify_enabled?(l(),c("section",ag,[t("div",ng,[t("div",lg,[t("div",rg,[t("div",dg,[t("ul",null,[t("li",{class:q({"is-active":s.$store.state.search_path==="/search/library"})},[t("a",{onClick:e[0]||(e[0]=(...n)=>i.search_library&&i.search_library(...n))},ug)],2),t("li",{class:q({"is-active":s.$store.state.search_path==="/search/spotify"})},[t("a",{onClick:e[1]||(e[1]=(...n)=>i.search_spotify&&i.search_spotify(...n))},pg)],2)])])])])])])):y("",!0)}var Fs=k(og,[["render",fg]]);const yg={name:"PageSearch",components:{ContentWithHeading:I,ContentText:Ms,TabsSearch:Fs,ListTracks:H,ListArtists:ds,ListAlbums:G,ListPlaylists:Bs,ListComposers:Ds},data(){return{search_query:"",tracks:{items:[],total:0},artists:new L,albums:new L,composers:{items:[],total:0},playlists:{items:[],total:0},audiobooks:new L,podcasts:new L}},computed:{recent_searches(){return this.$store.state.recent_searches},show_tracks(){return this.$route.query.type&&this.$route.query.type.includes("track")},show_all_tracks_button(){return this.tracks.total>this.tracks.items.length},show_artists(){return this.$route.query.type&&this.$route.query.type.includes("artist")},show_all_artists_button(){return this.artists.total>this.artists.items.length},show_albums(){return this.$route.query.type&&this.$route.query.type.includes("album")},show_all_albums_button(){return this.albums.total>this.albums.items.length},show_composers(){return this.$route.query.type&&this.$route.query.type.includes("composer")},show_all_composers_button(){return this.composers.total>this.composers.items.length},show_playlists(){return this.$route.query.type&&this.$route.query.type.includes("playlist")},show_all_playlists_button(){return this.playlists.total>this.playlists.items.length},show_audiobooks(){return this.$route.query.type&&this.$route.query.type.includes("audiobook")},show_all_audiobooks_button(){return this.audiobooks.total>this.audiobooks.items.length},show_podcasts(){return this.$route.query.type&&this.$route.query.type.includes("podcast")},show_all_podcasts_button(){return this.podcasts.total>this.podcasts.items.length},is_visible_artwork(){return this.$store.getters.settings_option("webinterface","show_cover_artwork_in_album_lists").value}},watch:{$route(s,e){this.search(s)}},mounted:function(){this.search(this.$route)},methods:{search:function(s){if(!s.query.query||s.query.query===""){this.search_query="",this.$refs.search_field.focus();return}this.search_query=s.query.query,this.searchMusic(s.query),this.searchAudiobooks(s.query),this.searchPodcasts(s.query),this.$store.commit(as,s.query.query)},searchMusic:function(s){if(s.type.indexOf("track")<0&&s.type.indexOf("artist")<0&&s.type.indexOf("album")<0&&s.type.indexOf("playlist")<0)return;const e={type:s.type,media_kind:"music"};s.query.startsWith("query:")?e.expression=s.query.replace(/^query:/,"").trim():e.query=s.query,s.limit&&(e.limit=s.limit,e.offset=s.offset),p.search(e).then(({data:a})=>{this.tracks=a.tracks?a.tracks:{items:[],total:0},this.artists=new L(a.artists),this.albums=new L(a.albums),this.composers=a.composers?a.composers:{items:[],total:0},this.playlists=a.playlists?a.playlists:{items:[],total:0}})},searchAudiobooks:function(s){if(s.type.indexOf("audiobook")<0)return;const e={type:"album",media_kind:"audiobook"};s.query.startsWith("query:")?e.expression=s.query.replace(/^query:/,"").trim():e.expression='((album includes "'+s.query+'" or artist includes "'+s.query+'") and media_kind is audiobook)',s.limit&&(e.limit=s.limit,e.offset=s.offset),p.search(e).then(({data:a})=>{this.audiobooks=new L(a.albums)})},searchPodcasts:function(s){if(s.type.indexOf("podcast")<0)return;const e={type:"album",media_kind:"podcast"};s.query.startsWith("query:")?e.expression=s.query.replace(/^query:/,"").trim():e.expression='((album includes "'+s.query+'" or artist includes "'+s.query+'") and media_kind is podcast)',s.limit&&(e.limit=s.limit,e.offset=s.offset),p.search(e).then(({data:a})=>{this.podcasts=new L(a.albums)})},new_search:function(){!this.search_query||(this.$router.push({path:this.$store.state.search_path,query:{type:"track,artist,album,playlist,audiobook,podcast,composer",query:this.search_query,limit:3,offset:0}}),this.$refs.search_field.blur())},open_search_tracks:function(){this.$router.push({path:"/search/library",query:{type:"track",query:this.$route.query.query}})},open_search_artists:function(){this.$router.push({path:"/search/library",query:{type:"artist",query:this.$route.query.query}})},open_search_albums:function(){this.$router.push({path:"/search/library",query:{type:"album",query:this.$route.query.query}})},open_search_composers:function(){this.$router.push({path:"/search/library",query:{type:"tracks",query:this.$route.query.query}})},open_search_playlists:function(){this.$router.push({path:"/search/library",query:{type:"playlist",query:this.$route.query.query}})},open_search_audiobooks:function(){this.$router.push({path:"/search/library",query:{type:"audiobook",query:this.$route.query.query}})},open_search_podcasts:function(){this.$router.push({path:"/search/library",query:{type:"podcast",query:this.$route.query.query}})},open_composer:function(s){this.$router.push({name:"ComposerAlbums",params:{composer:s.name}})},open_playlist:function(s){this.$router.push({path:"/playlists/"+s.id+"/tracks"})},open_recent_search:function(s){this.search_query=s,this.new_search()},open_track_dialog:function(s){this.selected_track=s,this.show_track_details_modal=!0},open_album_dialog:function(s){this.selected_album=s,this.show_album_details_modal=!0},open_artist_dialog:function(s){this.selected_artist=s,this.show_artist_details_modal=!0},open_composer_dialog:function(s){this.selected_composer=s,this.show_composer_details_modal=!0},open_playlist_dialog:function(s){this.selected_playlist=s,this.show_playlist_details_modal=!0}}},gg={class:"section fd-remove-padding-bottom"},bg={class:"container"},kg={class:"columns is-centered"},wg={class:"column is-four-fifths"},vg={class:"field"},$g={class:"control is-expanded has-icons-left"},xg=t("span",{class:"icon is-left"},[t("i",{class:"mdi mdi-magnify"})],-1),Cg=t("p",{class:"help has-text-centered"},[C(" Tip: you can search by a smart playlist query language "),t("a",{href:"https://github.com/owntone/owntone-server/blob/master/README_SMARTPL.md",target:"_blank"},"expression"),C(" if you prefix it with "),t("code",null,"query:"),C(". ")],-1),qg={class:"tags",style:{"margin-top":"16px"}},Sg=["onClick"],Pg=t("p",{class:"title is-4"},"Tracks",-1),Ag={key:0,class:"level"},Tg={class:"level-item"},Rg=t("p",null,[t("i",null,"No tracks found")],-1),Ig=t("p",{class:"title is-4"},"Artists",-1),Eg={key:0,class:"level"},Lg={class:"level-item"},Ug=t("p",null,[t("i",null,"No artists found")],-1),Og=t("p",{class:"title is-4"},"Albums",-1),Dg={key:0,class:"level"},zg={class:"level-item"},Ng=t("p",null,[t("i",null,"No albums found")],-1),Vg=t("p",{class:"title is-4"},"Composers",-1),Bg={key:0,class:"level"},Mg={class:"level-item"},Fg=t("p",null,[t("i",null,"No composers found")],-1),jg=t("p",{class:"title is-4"},"Playlists",-1),Gg={key:0,class:"level"},Kg={class:"level-item"},Hg=t("p",null,[t("i",null,"No playlists found")],-1),Wg=t("p",{class:"title is-4"},"Podcasts",-1),Yg={key:0,class:"level"},Qg={class:"level-item"},Jg=t("p",null,[t("i",null,"No podcasts found")],-1),Xg=t("p",{class:"title is-4"},"Audiobooks",-1),Zg={key:0,class:"level"},tb={class:"level-item"},sb=t("p",null,[t("i",null,"No audiobooks found")],-1);function eb(s,e,a,r,o,i){const n=h("tabs-search"),m=h("list-tracks"),f=h("content-with-heading"),g=h("content-text"),b=h("list-artists"),$=h("list-albums"),w=h("list-composers"),P=h("list-playlists");return l(),c("div",null,[t("section",gg,[t("div",bg,[t("div",kg,[t("div",wg,[t("form",{onSubmit:e[1]||(e[1]=z((...S)=>i.new_search&&i.new_search(...S),["prevent"]))},[t("div",vg,[t("p",$g,[O(t("input",{ref:"search_field","onUpdate:modelValue":e[0]||(e[0]=S=>o.search_query=S),class:"input is-rounded is-shadowless",type:"text",placeholder:"Search",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"},null,512),[[B,o.search_query]]),xg]),Cg])],32),t("div",qg,[(l(!0),c(R,null,U(i.recent_searches,S=>(l(),c("a",{key:S,class:"tag",onClick:F=>i.open_recent_search(S)},u(S),9,Sg))),128))])])])])]),_(n,{query:o.search_query},null,8,["query"]),i.show_tracks&&o.tracks.total?(l(),v(f,{key:0},{"heading-left":d(()=>[Pg]),content:d(()=>[_(m,{tracks:o.tracks.items},null,8,["tracks"])]),footer:d(()=>[i.show_all_tracks_button?(l(),c("nav",Ag,[t("p",Tg,[t("a",{class:"button is-light is-small is-rounded",onClick:e[2]||(e[2]=(...S)=>i.open_search_tracks&&i.open_search_tracks(...S))},"Show all "+u(o.tracks.total.toLocaleString())+" tracks",1)])])):y("",!0)]),_:1})):y("",!0),i.show_tracks&&!o.tracks.total?(l(),v(g,{key:1,class:"mt-6"},{content:d(()=>[Rg]),_:1})):y("",!0),i.show_artists&&o.artists.total?(l(),v(f,{key:2},{"heading-left":d(()=>[Ig]),content:d(()=>[_(b,{artists:o.artists,hide_group_title:!0},null,8,["artists"])]),footer:d(()=>[i.show_all_artists_button?(l(),c("nav",Eg,[t("p",Lg,[t("a",{class:"button is-light is-small is-rounded",onClick:e[3]||(e[3]=(...S)=>i.open_search_artists&&i.open_search_artists(...S))},"Show all "+u(o.artists.total.toLocaleString())+" artists",1)])])):y("",!0)]),_:1})):y("",!0),i.show_artists&&!o.artists.total?(l(),v(g,{key:3},{content:d(()=>[Ug]),_:1})):y("",!0),i.show_albums&&o.albums.total?(l(),v(f,{key:4},{"heading-left":d(()=>[Og]),content:d(()=>[_($,{albums:o.albums,hide_group_title:!0},null,8,["albums"])]),footer:d(()=>[i.show_all_albums_button?(l(),c("nav",Dg,[t("p",zg,[t("a",{class:"button is-light is-small is-rounded",onClick:e[4]||(e[4]=(...S)=>i.open_search_albums&&i.open_search_albums(...S))},"Show all "+u(o.albums.total.toLocaleString())+" albums",1)])])):y("",!0)]),_:1})):y("",!0),i.show_albums&&!o.albums.total?(l(),v(g,{key:5},{content:d(()=>[Ng]),_:1})):y("",!0),i.show_composers&&o.composers.total?(l(),v(f,{key:6},{"heading-left":d(()=>[Vg]),content:d(()=>[_(w,{composers:o.composers.items},null,8,["composers"])]),footer:d(()=>[i.show_all_composers_button?(l(),c("nav",Bg,[t("p",Mg,[t("a",{class:"button is-light is-small is-rounded",onClick:e[5]||(e[5]=(...S)=>i.open_search_composers&&i.open_search_composers(...S))},"Show all "+u(o.composers.total)+" composers",1)])])):y("",!0)]),_:1})):y("",!0),i.show_composers&&!o.composers.total?(l(),v(g,{key:7},{content:d(()=>[Fg]),_:1})):y("",!0),i.show_playlists&&o.playlists.total?(l(),v(f,{key:8},{"heading-left":d(()=>[jg]),content:d(()=>[_(P,{playlists:o.playlists.items},null,8,["playlists"])]),footer:d(()=>[i.show_all_playlists_button?(l(),c("nav",Gg,[t("p",Kg,[t("a",{class:"button is-light is-small is-rounded",onClick:e[6]||(e[6]=(...S)=>i.open_search_playlists&&i.open_search_playlists(...S))},"Show all "+u(o.playlists.total.toLocaleString())+" playlists",1)])])):y("",!0)]),_:1})):y("",!0),i.show_playlists&&!o.playlists.total?(l(),v(g,{key:9},{content:d(()=>[Hg]),_:1})):y("",!0),i.show_podcasts&&o.podcasts.total?(l(),v(f,{key:10},{"heading-left":d(()=>[Wg]),content:d(()=>[_($,{albums:o.podcasts},null,8,["albums"])]),footer:d(()=>[i.show_all_podcasts_button?(l(),c("nav",Yg,[t("p",Qg,[t("a",{class:"button is-light is-small is-rounded",onClick:e[7]||(e[7]=(...S)=>i.open_search_podcasts&&i.open_search_podcasts(...S))},"Show all "+u(o.podcasts.total.toLocaleString())+" podcasts",1)])])):y("",!0)]),_:1})):y("",!0),i.show_podcasts&&!o.podcasts.total?(l(),v(g,{key:11},{content:d(()=>[Jg]),_:1})):y("",!0),i.show_audiobooks&&o.audiobooks.total?(l(),v(f,{key:12},{"heading-left":d(()=>[Xg]),content:d(()=>[_($,{albums:o.audiobooks},null,8,["albums"])]),footer:d(()=>[i.show_all_audiobooks_button?(l(),c("nav",Zg,[t("p",tb,[t("a",{class:"button is-light is-small is-rounded",onClick:e[8]||(e[8]=(...S)=>i.open_search_audiobooks&&i.open_search_audiobooks(...S))},"Show all "+u(o.audiobooks.total.toLocaleString())+" audiobooks",1)])])):y("",!0)]),_:1})):y("",!0),i.show_audiobooks&&!o.audiobooks.total?(l(),v(g,{key:13},{content:d(()=>[sb]),_:1})):y("",!0)])}var ib=k(yg,[["render",eb]]);const ob={name:"PageAbout",data(){return{show_update_dropdown:!1,show_update_library:!1}},computed:{config(){return this.$store.state.config},library(){return this.$store.state.library}},methods:{onClickOutside(s){this.show_update_dropdown=!1},showUpdateDialog(){this.$store.commit(it,!0)}}},ab={class:"section"},nb={class:"container"},lb={class:"columns is-centered"},rb={class:"column is-four-fifths has-text-centered-mobile"},db={class:"heading"},cb=t("b",null,"OwnTone",-1),_b={class:"title is-4"},ub={class:"section"},mb={class:"container"},hb={class:"columns is-centered"},pb={class:"column is-four-fifths"},fb={class:"content"},yb={class:"level is-mobile"},gb=t("div",{class:"level-left"},[t("div",{class:"level-item"},[t("h2",{class:"title is-5"},"Library")])],-1),bb={class:"level-right"},kb={key:0},wb=t("a",{class:"button is-small is-loading"},"Update",-1),vb=[wb],$b={key:1},xb={class:"table"},Cb=t("th",null,"Artists",-1),qb={class:"has-text-right"},Sb=t("th",null,"Albums",-1),Pb={class:"has-text-right"},Ab=t("th",null,"Tracks",-1),Tb={class:"has-text-right"},Rb=t("th",null,"Total playtime",-1),Ib={class:"has-text-right"},Eb=t("th",null,"Library updated",-1),Lb={class:"has-text-right"},Ub={class:"has-text-grey"},Ob=t("th",null,"Uptime",-1),Db={class:"has-text-right"},zb={class:"has-text-grey"},Nb={class:"section"},Vb={class:"container"},Bb={class:"columns is-centered"},Mb={class:"column is-four-fifths"},Fb={class:"content has-text-centered-mobile"},jb={class:"is-size-7"},Gb=Zs('<p class="is-size-7"> Web interface built with <a href="http://bulma.io">Bulma</a>, <a href="https://materialdesignicons.com/">Material Design Icons</a>, <a href="https://vuejs.org/">Vue.js</a>, <a href="https://github.com/mzabriskie/axios">axios</a> and <a href="https://github.com/owntone/owntone-server/network/dependencies">more</a>. </p>',1);function Kb(s,e,a,r,o,i){return l(),c("div",null,[t("section",ab,[t("div",nb,[t("div",lb,[t("div",rb,[t("p",db,[cb,C(" - version "+u(i.config.version),1)]),t("h1",_b,u(i.config.library_name),1)])])])]),t("section",ub,[t("div",mb,[t("div",hb,[t("div",pb,[t("div",fb,[t("nav",yb,[gb,t("div",bb,[i.library.updating?(l(),c("div",kb,vb)):(l(),c("div",$b,[t("a",{class:"button is-small",onClick:e[0]||(e[0]=n=>i.showUpdateDialog())},"Update")]))])]),t("table",xb,[t("tbody",null,[t("tr",null,[Cb,t("td",qb,u(s.$filters.number(i.library.artists)),1)]),t("tr",null,[Sb,t("td",Pb,u(s.$filters.number(i.library.albums)),1)]),t("tr",null,[Ab,t("td",Tb,u(s.$filters.number(i.library.songs)),1)]),t("tr",null,[Rb,t("td",Ib,u(s.$filters.duration(i.library.db_playtime*1e3,"y [years], d [days], h [hours], m [minutes]")),1)]),t("tr",null,[Eb,t("td",Lb,[C(u(s.$filters.timeFromNow(i.library.updated_at))+" ",1),t("span",Ub,"("+u(s.$filters.time(i.library.updated_at,"lll"))+")",1)])]),t("tr",null,[Ob,t("td",Db,[C(u(s.$filters.timeFromNow(i.library.started_at,!0))+" ",1),t("span",zb,"("+u(s.$filters.time(i.library.started_at,"ll"))+")",1)])])])])])])])])]),t("section",Nb,[t("div",Vb,[t("div",Bb,[t("div",Mb,[t("div",Fb,[t("p",jb," Compiled with support for "+u(i.config.buildoptions.join(", "))+". ",1),Gb])])])])])])}var Hb=k(ob,[["render",Kb]]);const Wb={name:"SpotifyListItemAlbum",props:["album"]},Yb={class:"media"},Qb={key:0,class:"media-left fd-has-action"},Jb={class:"media-content fd-has-action is-clipped"},Xb={class:"title is-6"},Zb={class:"subtitle is-7 has-text-grey"},t1={class:"subtitle is-7 has-text-grey has-text-weight-normal"},s1={class:"media-right"};function e1(s,e,a,r,o,i){return l(),c("div",Yb,[s.$slots.artwork?(l(),c("div",Qb,[E(s.$slots,"artwork")])):y("",!0),t("div",Jb,[t("h1",Xb,u(a.album.name),1),t("h2",Zb,[t("b",null,u(a.album.artists[0].name),1)]),t("h2",t1," ("+u(a.album.album_type)+", "+u(s.$filters.time(a.album.release_date,"L"))+") ",1)]),t("div",s1,[E(s.$slots,"actions")])])}var Kt=k(Wb,[["render",e1]]);const i1={name:"SpotifyListItemPlaylist",props:["playlist"],methods:{open_playlist:function(){this.$router.push({path:"/music/spotify/playlists/"+this.playlist.id})}}},o1={class:"media"},a1={class:"title is-6"},n1={class:"subtitle is-7"},l1={class:"media-right"};function r1(s,e,a,r,o,i){return l(),c("div",o1,[t("div",{class:"media-content fd-has-action is-clipped",onClick:e[0]||(e[0]=(...n)=>i.open_playlist&&i.open_playlist(...n))},[t("h1",a1,u(a.playlist.name),1),t("h2",n1,u(a.playlist.owner.display_name),1)]),t("div",l1,[E(s.$slots,"actions")])])}var ps=k(i1,[["render",r1]]);const d1={name:"SpotifyModalDialogAlbum",props:["show","album"],emits:["close"],data(){return{artwork_visible:!1}},computed:{artwork_url:function(){return this.album.images&&this.album.images.length>0?this.album.images[0].url:""}},methods:{play:function(){this.$emit("close"),p.player_play_uri(this.album.uri,!1)},queue_add:function(){this.$emit("close"),p.queue_add(this.album.uri)},queue_add_next:function(){this.$emit("close"),p.queue_add_next(this.album.uri)},open_album:function(){this.$router.push({path:"/music/spotify/albums/"+this.album.id})},open_artist:function(){this.$router.push({path:"/music/spotify/artists/"+this.album.artists[0].id})},artwork_loaded:function(){this.artwork_visible=!0},artwork_error:function(){this.artwork_visible=!1}}},c1={key:0,class:"modal is-active"},_1={class:"modal-content fd-modal-card"},u1={class:"card"},m1={class:"card-content"},h1={class:"image is-square fd-has-margin-bottom"},p1=["src"],f1={class:"title is-4"},y1={class:"content is-small"},g1=t("span",{class:"heading"},"Album artist",-1),b1=t("span",{class:"heading"},"Release date",-1),k1={class:"title is-6"},w1=t("span",{class:"heading"},"Type",-1),v1={class:"title is-6"},$1={class:"card-footer"},x1=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),C1=t("span",{class:"is-size-7"},"Add",-1),q1=[x1,C1],S1=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-play"})],-1),P1=t("span",{class:"is-size-7"},"Add Next",-1),A1=[S1,P1],T1=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),R1=t("span",{class:"is-size-7"},"Play",-1),I1=[T1,R1];function E1(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",c1,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",_1,[t("div",u1,[t("div",m1,[O(t("figure",h1,[t("img",{src:i.artwork_url,class:"fd-has-shadow",onLoad:e[1]||(e[1]=(...n)=>i.artwork_loaded&&i.artwork_loaded(...n)),onError:e[2]||(e[2]=(...n)=>i.artwork_error&&i.artwork_error(...n))},null,40,p1)],512),[[Nt,o.artwork_visible]]),t("p",f1,[t("a",{class:"has-text-link",onClick:e[3]||(e[3]=(...n)=>i.open_album&&i.open_album(...n))},u(a.album.name),1)]),t("div",y1,[t("p",null,[g1,t("a",{class:"title is-6 has-text-link",onClick:e[4]||(e[4]=(...n)=>i.open_artist&&i.open_artist(...n))},u(a.album.artists[0].name),1)]),t("p",null,[b1,t("span",k1,u(s.$filters.time(a.album.release_date,"L")),1)]),t("p",null,[w1,t("span",v1,u(a.album.album_type),1)])])]),t("footer",$1,[t("a",{class:"card-footer-item has-text-dark",onClick:e[5]||(e[5]=(...n)=>i.queue_add&&i.queue_add(...n))},q1),t("a",{class:"card-footer-item has-text-dark",onClick:e[6]||(e[6]=(...n)=>i.queue_add_next&&i.queue_add_next(...n))},A1),t("a",{class:"card-footer-item has-text-dark",onClick:e[7]||(e[7]=(...n)=>i.play&&i.play(...n))},I1)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[8]||(e[8]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var nt=k(d1,[["render",E1]]);const L1={name:"SpotifyModalDialogPlaylist",props:["show","playlist"],emits:["close"],methods:{play:function(){this.$emit("close"),p.player_play_uri(this.playlist.uri,!1)},queue_add:function(){this.$emit("close"),p.queue_add(this.playlist.uri)},queue_add_next:function(){this.$emit("close"),p.queue_add_next(this.playlist.uri)},open_playlist:function(){this.$router.push({path:"/music/spotify/playlists/"+this.playlist.id})}}},U1={key:0,class:"modal is-active"},O1={class:"modal-content fd-modal-card"},D1={class:"card"},z1={class:"card-content"},N1={class:"title is-4"},V1={class:"content is-small"},B1=t("span",{class:"heading"},"Owner",-1),M1={class:"title is-6"},F1=t("span",{class:"heading"},"Tracks",-1),j1={class:"title is-6"},G1=t("span",{class:"heading"},"Path",-1),K1={class:"title is-6"},H1={class:"card-footer"},W1=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),Y1=t("span",{class:"is-size-7"},"Add",-1),Q1=[W1,Y1],J1=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-play"})],-1),X1=t("span",{class:"is-size-7"},"Add Next",-1),Z1=[J1,X1],tk=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),sk=t("span",{class:"is-size-7"},"Play",-1),ek=[tk,sk];function ik(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",U1,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",O1,[t("div",D1,[t("div",z1,[t("p",N1,[t("a",{class:"has-text-link",onClick:e[1]||(e[1]=(...n)=>i.open_playlist&&i.open_playlist(...n))},u(a.playlist.name),1)]),t("div",V1,[t("p",null,[B1,t("span",M1,u(a.playlist.owner.display_name),1)]),t("p",null,[F1,t("span",j1,u(a.playlist.tracks.total),1)]),t("p",null,[G1,t("span",K1,u(a.playlist.uri),1)])])]),t("footer",H1,[t("a",{class:"card-footer-item has-text-dark",onClick:e[2]||(e[2]=(...n)=>i.queue_add&&i.queue_add(...n))},Q1),t("a",{class:"card-footer-item has-text-dark",onClick:e[3]||(e[3]=(...n)=>i.queue_add_next&&i.queue_add_next(...n))},Z1),t("a",{class:"card-footer-item has-text-dark",onClick:e[4]||(e[4]=(...n)=>i.play&&i.play(...n))},ek)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[5]||(e[5]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var Ht=k(L1,[["render",ik]]);const Et={load:function(s){if(T.state.spotify_new_releases.length>0&&T.state.spotify_featured_playlists.length>0)return Promise.resolve();const e=new M;return e.setAccessToken(T.state.spotify.webapi_token),Promise.all([e.getNewReleases({country:T.state.spotify.webapi_country,limit:50}),e.getFeaturedPlaylists({country:T.state.spotify.webapi_country,limit:50})])},set:function(s,e){e&&(T.commit(is,e[0].albums.items),T.commit(os,e[1].playlists.items))}},ok={name:"SpotifyPageBrowse",components:{ContentWithHeading:I,TabsMusic:j,SpotifyListItemAlbum:Kt,SpotifyListItemPlaylist:ps,SpotifyModalDialogAlbum:nt,SpotifyModalDialogPlaylist:Ht,CoverArtwork:K},beforeRouteEnter(s,e,a){Et.load(s).then(r=>{a(o=>Et.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;Et.load(s).then(o=>{Et.set(r,o),a()})},data(){return{show_album_details_modal:!1,selected_album:{},show_playlist_details_modal:!1,selected_playlist:{}}},computed:{new_releases(){return this.$store.state.spotify_new_releases.slice(0,3)},featured_playlists(){return this.$store.state.spotify_featured_playlists.slice(0,3)},is_visible_artwork(){return this.$store.getters.settings_option("webinterface","show_cover_artwork_in_album_lists").value}},methods:{open_album:function(s){this.$router.push({path:"/music/spotify/albums/"+s.id})},open_album_dialog:function(s){this.selected_album=s,this.show_album_details_modal=!0},open_playlist_dialog:function(s){this.selected_playlist=s,this.show_playlist_details_modal=!0},artwork_url:function(s){return s.images&&s.images.length>0?s.images[0].url:""}}},ak={class:"fd-page-with-tabs"},nk=t("p",{class:"title is-4"},"New Releases",-1),lk={class:"image is-64x64 fd-has-shadow fd-has-action"},rk=["onClick"],dk=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),ck=[dk],_k={class:"level"},uk={class:"level-item"},mk=C(" Show more "),hk=t("p",{class:"title is-4"},"Featured Playlists",-1),pk=["onClick"],fk=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),yk=[fk],gk={class:"level"},bk={class:"level-item"},kk=C(" Show more ");function wk(s,e,a,r,o,i){const n=h("tabs-music"),m=h("cover-artwork"),f=h("spotify-list-item-album"),g=h("spotify-modal-dialog-album"),b=h("router-link"),$=h("content-with-heading"),w=h("spotify-list-item-playlist"),P=h("spotify-modal-dialog-playlist");return l(),c("div",ak,[_(n),_($,null,{"heading-left":d(()=>[nk]),content:d(()=>[(l(!0),c(R,null,U(i.new_releases,S=>(l(),v(f,{key:S.id,album:S,onClick:F=>i.open_album(S)},Bt({actions:d(()=>[t("a",{onClick:F=>i.open_album_dialog(S)},ck,8,rk)]),_:2},[i.is_visible_artwork?{name:"artwork",fn:d(()=>[t("p",lk,[_(m,{artwork_url:i.artwork_url(S),artist:S.artist,album:S.name,maxwidth:64,maxheight:64},null,8,["artwork_url","artist","album"])])])}:void 0]),1032,["album","onClick"]))),128)),_(g,{show:o.show_album_details_modal,album:o.selected_album,onClose:e[0]||(e[0]=S=>o.show_album_details_modal=!1)},null,8,["show","album"])]),footer:d(()=>[t("nav",_k,[t("p",uk,[_(b,{to:"/music/spotify/new-releases",class:"button is-light is-small is-rounded"},{default:d(()=>[mk]),_:1})])])]),_:1}),_($,null,{"heading-left":d(()=>[hk]),content:d(()=>[(l(!0),c(R,null,U(i.featured_playlists,S=>(l(),v(w,{key:S.id,playlist:S},{actions:d(()=>[t("a",{onClick:F=>i.open_playlist_dialog(S)},yk,8,pk)]),_:2},1032,["playlist"]))),128)),_(P,{show:o.show_playlist_details_modal,playlist:o.selected_playlist,onClose:e[1]||(e[1]=S=>o.show_playlist_details_modal=!1)},null,8,["show","playlist"])]),footer:d(()=>[t("nav",gk,[t("p",bk,[_(b,{to:"/music/spotify/featured-playlists",class:"button is-light is-small is-rounded"},{default:d(()=>[kk]),_:1})])])]),_:1})])}var vk=k(ok,[["render",wk]]);const Lt={load:function(s){if(T.state.spotify_new_releases.length>0)return Promise.resolve();const e=new M;return e.setAccessToken(T.state.spotify.webapi_token),e.getNewReleases({country:T.state.spotify.webapi_country,limit:50})},set:function(s,e){e&&T.commit(is,e.albums.items)}},$k={name:"SpotifyPageBrowseNewReleases",components:{ContentWithHeading:I,TabsMusic:j,SpotifyListItemAlbum:Kt,SpotifyModalDialogAlbum:nt,CoverArtwork:K},beforeRouteEnter(s,e,a){Lt.load(s).then(r=>{a(o=>Lt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;Lt.load(s).then(o=>{Lt.set(r,o),a()})},data(){return{show_album_details_modal:!1,selected_album:{}}},computed:{new_releases(){return this.$store.state.spotify_new_releases},is_visible_artwork(){return this.$store.getters.settings_option("webinterface","show_cover_artwork_in_album_lists").value}},methods:{open_album:function(s){this.$router.push({path:"/music/spotify/albums/"+s.id})},open_album_dialog:function(s){this.selected_album=s,this.show_album_details_modal=!0},artwork_url:function(s){return s.images&&s.images.length>0?s.images[0].url:""}}},xk={class:"fd-page-with-tabs"},Ck=t("p",{class:"title is-4"},"New Releases",-1),qk={class:"image is-64x64 fd-has-shadow fd-has-action"},Sk=["onClick"],Pk=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),Ak=[Pk];function Tk(s,e,a,r,o,i){const n=h("tabs-music"),m=h("cover-artwork"),f=h("spotify-list-item-album"),g=h("spotify-modal-dialog-album"),b=h("content-with-heading");return l(),c("div",xk,[_(n),_(b,null,{"heading-left":d(()=>[Ck]),content:d(()=>[(l(!0),c(R,null,U(i.new_releases,$=>(l(),v(f,{key:$.id,album:$,onClick:w=>i.open_album($)},Bt({actions:d(()=>[t("a",{onClick:w=>i.open_album_dialog($)},Ak,8,Sk)]),_:2},[i.is_visible_artwork?{name:"artwork",fn:d(()=>[t("p",qk,[_(m,{artwork_url:i.artwork_url($),artist:$.artist,album:$.name,maxwidth:64,maxheight:64},null,8,["artwork_url","artist","album"])])])}:void 0]),1032,["album","onClick"]))),128)),_(g,{show:o.show_album_details_modal,album:o.selected_album,onClose:e[0]||(e[0]=$=>o.show_album_details_modal=!1)},null,8,["show","album"])]),_:1})])}var Rk=k($k,[["render",Tk]]);const Ut={load:function(s){if(T.state.spotify_featured_playlists.length>0)return Promise.resolve();const e=new M;e.setAccessToken(T.state.spotify.webapi_token),e.getFeaturedPlaylists({country:T.state.spotify.webapi_country,limit:50})},set:function(s,e){e&&T.commit(os,e.playlists.items)}},Ik={name:"SpotifyPageBrowseFeaturedPlaylists",components:{ContentWithHeading:I,TabsMusic:j,SpotifyListItemPlaylist:ps,SpotifyModalDialogPlaylist:Ht},beforeRouteEnter(s,e,a){Ut.load(s).then(r=>{a(o=>Ut.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;Ut.load(s).then(o=>{Ut.set(r,o),a()})},data(){return{show_playlist_details_modal:!1,selected_playlist:{}}},computed:{featured_playlists(){return this.$store.state.spotify_featured_playlists}},methods:{open_playlist_dialog:function(s){this.selected_playlist=s,this.show_playlist_details_modal=!0}}},Ek={class:"fd-page-with-tabs"},Lk=t("p",{class:"title is-4"},"Featured Playlists",-1),Uk=["onClick"],Ok=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),Dk=[Ok];function zk(s,e,a,r,o,i){const n=h("tabs-music"),m=h("spotify-list-item-playlist"),f=h("spotify-modal-dialog-playlist"),g=h("content-with-heading");return l(),c("div",Ek,[_(n),_(g,null,{"heading-left":d(()=>[Lk]),content:d(()=>[(l(!0),c(R,null,U(i.featured_playlists,b=>(l(),v(m,{key:b.id,playlist:b},{actions:d(()=>[t("a",{onClick:$=>i.open_playlist_dialog(b)},Dk,8,Uk)]),_:2},1032,["playlist"]))),128)),_(f,{show:o.show_playlist_details_modal,playlist:o.selected_playlist,onClose:e[0]||(e[0]=b=>o.show_playlist_details_modal=!1)},null,8,["show","playlist"])]),_:1})])}var Nk=k(Ik,[["render",zk]]);const Vk={name:"SpotifyModalDialogArtist",props:["show","artist"],emits:["close"],methods:{play:function(){this.$emit("close"),p.player_play_uri(this.artist.uri,!1)},queue_add:function(){this.$emit("close"),p.queue_add(this.artist.uri)},queue_add_next:function(){this.$emit("close"),p.queue_add_next(this.artist.uri)},open_artist:function(){this.$router.push({path:"/music/spotify/artists/"+this.artist.id})}}},Bk={key:0,class:"modal is-active"},Mk={class:"modal-content fd-modal-card"},Fk={class:"card"},jk={class:"card-content"},Gk={class:"title is-4"},Kk={class:"content is-small"},Hk=t("span",{class:"heading"},"Popularity / Followers",-1),Wk={class:"title is-6"},Yk=t("span",{class:"heading"},"Genres",-1),Qk={class:"title is-6"},Jk={class:"card-footer"},Xk=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),Zk=t("span",{class:"is-size-7"},"Add",-1),tw=[Xk,Zk],sw=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-play"})],-1),ew=t("span",{class:"is-size-7"},"Add Next",-1),iw=[sw,ew],ow=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),aw=t("span",{class:"is-size-7"},"Play",-1),nw=[ow,aw];function lw(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",Bk,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",Mk,[t("div",Fk,[t("div",jk,[t("p",Gk,[t("a",{class:"has-text-link",onClick:e[1]||(e[1]=(...n)=>i.open_artist&&i.open_artist(...n))},u(a.artist.name),1)]),t("div",Kk,[t("p",null,[Hk,t("span",Wk,u(a.artist.popularity)+" / "+u(a.artist.followers.total),1)]),t("p",null,[Yk,t("span",Qk,u(a.artist.genres.join(", ")),1)])])]),t("footer",Jk,[t("a",{class:"card-footer-item has-text-dark",onClick:e[2]||(e[2]=(...n)=>i.queue_add&&i.queue_add(...n))},tw),t("a",{class:"card-footer-item has-text-dark",onClick:e[3]||(e[3]=(...n)=>i.queue_add_next&&i.queue_add_next(...n))},iw),t("a",{class:"card-footer-item has-text-dark",onClick:e[4]||(e[4]=(...n)=>i.play&&i.play(...n))},nw)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[5]||(e[5]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var js=k(Vk,[["render",lw]]);const Qt=50,Ot={load:function(s){const e=new M;return e.setAccessToken(T.state.spotify.webapi_token),Promise.all([e.getArtist(s.params.artist_id),e.getArtistAlbums(s.params.artist_id,{limit:Qt,offset:0,include_groups:"album,single",market:T.state.spotify.webapi_country})])},set:function(s,e){s.artist=e[0],s.albums=[],s.total=0,s.offset=0,s.append_albums(e[1])}},rw={name:"SpotifyPageArtist",components:{ContentWithHeading:I,SpotifyListItemAlbum:Kt,SpotifyModalDialogAlbum:nt,SpotifyModalDialogArtist:js,VueEternalLoading:ss.exports.VueEternalLoading,CoverArtwork:K},beforeRouteEnter(s,e,a){Ot.load(s).then(r=>{a(o=>Ot.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;Ot.load(s).then(o=>{Ot.set(r,o),a()})},data(){return{artist:{},albums:[],total:0,offset:0,show_details_modal:!1,selected_album:{},show_artist_details_modal:!1}},computed:{is_visible_artwork(){return this.$store.getters.settings_option("webinterface","show_cover_artwork_in_album_lists").value}},methods:{load_next:function({loaded:s}){const e=new M;e.setAccessToken(this.$store.state.spotify.webapi_token),e.getArtistAlbums(this.artist.id,{limit:Qt,offset:this.offset,include_groups:"album,single"}).then(a=>{this.append_albums(a),s(a.items.length,Qt)})},append_albums:function(s){this.albums=this.albums.concat(s.items),this.total=s.total,this.offset+=s.limit},play:function(){this.show_details_modal=!1,p.player_play_uri(this.artist.uri,!0)},open_album:function(s){this.$router.push({path:"/music/spotify/albums/"+s.id})},open_dialog:function(s){this.selected_album=s,this.show_details_modal=!0},artwork_url:function(s){return s.images&&s.images.length>0?s.images[0].url:""}}},dw={class:"title is-4"},cw={class:"buttons is-centered"},_w=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),uw=[_w],mw=t("span",{class:"icon"},[t("i",{class:"mdi mdi-shuffle"})],-1),hw=t("span",null,"Shuffle",-1),pw=[mw,hw],fw={class:"heading has-text-centered-mobile"},yw={class:"image is-64x64 fd-has-shadow fd-has-action"},gw=["onClick"],bw=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),kw=[bw],ww=C(" . ");function vw(s,e,a,r,o,i){const n=h("cover-artwork"),m=h("spotify-list-item-album"),f=h("VueEternalLoading"),g=h("spotify-modal-dialog-album"),b=h("spotify-modal-dialog-artist"),$=h("content-with-heading");return l(),v($,null,{"heading-left":d(()=>[t("p",dw,u(o.artist.name),1)]),"heading-right":d(()=>[t("div",cw,[t("a",{class:"button is-small is-light is-rounded",onClick:e[0]||(e[0]=w=>o.show_artist_details_modal=!0)},uw),t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...w)=>i.play&&i.play(...w))},pw)])]),content:d(()=>[t("p",fw,u(o.total)+" albums",1),(l(!0),c(R,null,U(o.albums,w=>(l(),v(m,{key:w.id,album:w,onClick:P=>i.open_album(w)},Bt({actions:d(()=>[t("a",{onClick:z(P=>i.open_dialog(w),["prevent","stop"])},kw,8,gw)]),_:2},[i.is_visible_artwork?{name:"artwork",fn:d(()=>[t("p",yw,[_(n,{artwork_url:i.artwork_url(w),artist:w.artist,album:w.name,maxwidth:64,maxheight:64},null,8,["artwork_url","artist","album"])])])}:void 0]),1032,["album","onClick"]))),128)),o.offset<o.total?(l(),v(f,{key:0,load:i.load_next},{"no-more":d(()=>[ww]),_:1},8,["load"])):y("",!0),_(g,{show:o.show_details_modal,album:o.selected_album,onClose:e[2]||(e[2]=w=>o.show_details_modal=!1)},null,8,["show","album"]),_(b,{show:o.show_artist_details_modal,artist:o.artist,onClose:e[3]||(e[3]=w=>o.show_artist_details_modal=!1)},null,8,["show","artist"])]),_:1})}var $w=k(rw,[["render",vw]]);const xw={name:"SpotifyListItemTrack",props:["track","position","album","context_uri"],methods:{play:function(){p.player_play_uri(this.context_uri,!1,this.position)}}},Cw={class:"media"},qw={key:0,class:"subtitle is-7"},Sw=C(" (Track is not playable"),Pw={key:0},Aw=C(") "),Tw={class:"media-right"};function Rw(s,e,a,r,o,i){return l(),c("div",Cw,[t("div",{class:"media-content fd-has-action is-clipped",onClick:e[0]||(e[0]=(...n)=>i.play&&i.play(...n))},[t("h1",{class:q(["title is-6",{"has-text-grey-light":a.track.is_playable===!1}])},u(a.track.name),3),t("h2",{class:q(["subtitle is-7",{"has-text-grey":a.track.is_playable,"has-text-grey-light":a.track.is_playable===!1}])},[t("b",null,u(a.track.artists[0].name),1)],2),a.track.is_playable===!1?(l(),c("h2",qw,[Sw,a.track.restrictions&&a.track.restrictions.reason?(l(),c("span",Pw,", restriction reason: "+u(a.track.restrictions.reason),1)):y("",!0),Aw])):y("",!0)]),t("div",Tw,[E(s.$slots,"actions")])])}var fs=k(xw,[["render",Rw]]);const Iw={name:"SpotifyModalDialogTrack",props:["show","track","album"],emits:["close"],methods:{play:function(){this.$emit("close"),p.player_play_uri(this.track.uri,!1)},queue_add:function(){this.$emit("close"),p.queue_add(this.track.uri)},queue_add_next:function(){this.$emit("close"),p.queue_add_next(this.track.uri)},open_album:function(){this.$router.push({path:"/music/spotify/albums/"+this.album.id})},open_artist:function(){this.$router.push({path:"/music/spotify/artists/"+this.album.artists[0].id})}}},Ew={key:0,class:"modal is-active"},Lw={class:"modal-content fd-modal-card"},Uw={class:"card"},Ow={class:"card-content"},Dw={class:"title is-4"},zw={class:"subtitle"},Nw={class:"content is-small"},Vw=t("span",{class:"heading"},"Album",-1),Bw=t("span",{class:"heading"},"Album artist",-1),Mw=t("span",{class:"heading"},"Release date",-1),Fw={class:"title is-6"},jw=t("span",{class:"heading"},"Track / Disc",-1),Gw={class:"title is-6"},Kw=t("span",{class:"heading"},"Length",-1),Hw={class:"title is-6"},Ww=t("span",{class:"heading"},"Path",-1),Yw={class:"title is-6"},Qw={class:"card-footer"},Jw=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-plus"})],-1),Xw=t("span",{class:"is-size-7"},"Add",-1),Zw=[Jw,Xw],tv=t("span",{class:"icon"},[t("i",{class:"mdi mdi-playlist-play"})],-1),sv=t("span",{class:"is-size-7"},"Add Next",-1),ev=[tv,sv],iv=t("span",{class:"icon"},[t("i",{class:"mdi mdi-play"})],-1),ov=t("span",{class:"is-size-7"},"Play",-1),av=[iv,ov];function nv(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",Ew,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",Lw,[t("div",Uw,[t("div",Ow,[t("p",Dw,u(a.track.name),1),t("p",zw,u(a.track.artists[0].name),1),t("div",Nw,[t("p",null,[Vw,t("a",{class:"title is-6 has-text-link",onClick:e[1]||(e[1]=(...n)=>i.open_album&&i.open_album(...n))},u(a.album.name),1)]),t("p",null,[Bw,t("a",{class:"title is-6 has-text-link",onClick:e[2]||(e[2]=(...n)=>i.open_artist&&i.open_artist(...n))},u(a.album.artists[0].name),1)]),t("p",null,[Mw,t("span",Fw,u(s.$filters.time(a.album.release_date,"L")),1)]),t("p",null,[jw,t("span",Gw,u(a.track.track_number)+" / "+u(a.track.disc_number),1)]),t("p",null,[Kw,t("span",Hw,u(s.$filters.duration(a.track.duration_ms)),1)]),t("p",null,[Ww,t("span",Yw,u(a.track.uri),1)])])]),t("footer",Qw,[t("a",{class:"card-footer-item has-text-dark",onClick:e[3]||(e[3]=(...n)=>i.queue_add&&i.queue_add(...n))},Zw),t("a",{class:"card-footer-item has-text-dark",onClick:e[4]||(e[4]=(...n)=>i.queue_add_next&&i.queue_add_next(...n))},ev),t("a",{class:"card-footer-item has-text-dark",onClick:e[5]||(e[5]=(...n)=>i.play&&i.play(...n))},av)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[6]||(e[6]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var ys=k(Iw,[["render",nv]]);const Dt={load:function(s){const e=new M;return e.setAccessToken(T.state.spotify.webapi_token),e.getAlbum(s.params.album_id,{market:T.state.spotify.webapi_country})},set:function(s,e){s.album=e}},lv={name:"PageAlbum",components:{ContentWithHero:_s,SpotifyListItemTrack:fs,SpotifyModalDialogTrack:ys,SpotifyModalDialogAlbum:nt,CoverArtwork:K},beforeRouteEnter(s,e,a){Dt.load(s).then(r=>{a(o=>Dt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;Dt.load(s).then(o=>{Dt.set(r,o),a()})},data(){return{album:{artists:[{}],tracks:{}},show_track_details_modal:!1,selected_track:{},show_album_details_modal:!1}},computed:{artwork_url:function(){return this.album.images&&this.album.images.length>0?this.album.images[0].url:""}},methods:{open_artist:function(){this.$router.push({path:"/music/spotify/artists/"+this.album.artists[0].id})},play:function(){this.show_details_modal=!1,p.player_play_uri(this.album.uri,!0)},open_track_dialog:function(s){this.selected_track=s,this.show_track_details_modal=!0}}},rv={class:"title is-5"},dv={class:"subtitle is-6 has-text-link has-text-weight-normal"},cv={class:"buttons fd-is-centered-mobile fd-has-margin-top"},_v=t("span",{class:"icon"},[t("i",{class:"mdi mdi-shuffle"})],-1),uv=t("span",null,"Shuffle",-1),mv=[_v,uv],hv=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),pv=[hv],fv={class:"image is-square fd-has-shadow fd-has-action"},yv={class:"heading is-7 has-text-centered-mobile fd-has-margin-top"},gv=["onClick"],bv=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),kv=[bv];function wv(s,e,a,r,o,i){const n=h("cover-artwork"),m=h("spotify-list-item-track"),f=h("spotify-modal-dialog-track"),g=h("spotify-modal-dialog-album"),b=h("content-with-hero");return l(),v(b,null,{"heading-left":d(()=>[t("h1",rv,u(o.album.name),1),t("h2",dv,[t("a",{class:"has-text-link",onClick:e[0]||(e[0]=(...$)=>i.open_artist&&i.open_artist(...$))},u(o.album.artists[0].name),1)]),t("div",cv,[t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...$)=>i.play&&i.play(...$))},mv),t("a",{class:"button is-small is-light is-rounded",onClick:e[2]||(e[2]=$=>o.show_album_details_modal=!0)},pv)])]),"heading-right":d(()=>[t("p",fv,[_(n,{artwork_url:i.artwork_url,artist:o.album.artist,album:o.album.name,onClick:e[3]||(e[3]=$=>o.show_album_details_modal=!0)},null,8,["artwork_url","artist","album"])])]),content:d(()=>[t("p",yv,u(o.album.tracks.total)+" tracks ",1),(l(!0),c(R,null,U(o.album.tracks.items,($,w)=>(l(),v(m,{key:$.id,track:$,position:w,album:o.album,context_uri:o.album.uri},{actions:d(()=>[t("a",{onClick:P=>i.open_track_dialog($)},kv,8,gv)]),_:2},1032,["track","position","album","context_uri"]))),128)),_(f,{show:o.show_track_details_modal,track:o.selected_track,album:o.album,onClose:e[4]||(e[4]=$=>o.show_track_details_modal=!1)},null,8,["show","track","album"]),_(g,{show:o.show_album_details_modal,album:o.album,onClose:e[5]||(e[5]=$=>o.show_album_details_modal=!1)},null,8,["show","album"])]),_:1})}var vv=k(lv,[["render",wv]]);const Jt=50,zt={load:function(s){const e=new M;return e.setAccessToken(T.state.spotify.webapi_token),Promise.all([e.getPlaylist(s.params.playlist_id),e.getPlaylistTracks(s.params.playlist_id,{limit:Jt,offset:0})])},set:function(s,e){s.playlist=e[0],s.tracks=[],s.total=0,s.offset=0,s.append_tracks(e[1])}},$v={name:"SpotifyPagePlaylist",components:{ContentWithHeading:I,SpotifyListItemTrack:fs,SpotifyModalDialogTrack:ys,SpotifyModalDialogPlaylist:Ht,VueEternalLoading:ss.exports.VueEternalLoading},beforeRouteEnter(s,e,a){zt.load(s).then(r=>{a(o=>zt.set(o,r))})},beforeRouteUpdate(s,e,a){const r=this;zt.load(s).then(o=>{zt.set(r,o),a()})},data(){return{playlist:{tracks:{}},tracks:[],total:0,offset:0,show_track_details_modal:!1,selected_track:{},show_playlist_details_modal:!1}},methods:{load_next:function({loaded:s}){const e=new M;e.setAccessToken(this.$store.state.spotify.webapi_token),e.getPlaylistTracks(this.playlist.id,{limit:Jt,offset:this.offset}).then(a=>{this.append_tracks(a),s(a.items.length,Jt)})},append_tracks:function(s){this.tracks=this.tracks.concat(s.items),this.total=s.total,this.offset+=s.limit},play:function(){this.show_details_modal=!1,p.player_play_uri(this.playlist.uri,!0)},open_track_dialog:function(s){this.selected_track=s,this.show_track_details_modal=!0}}},xv={class:"title is-4"},Cv={class:"buttons is-centered"},qv=t("span",{class:"icon"},[t("i",{class:"mdi mdi-dots-horizontal mdi-18px"})],-1),Sv=[qv],Pv=t("span",{class:"icon"},[t("i",{class:"mdi mdi-shuffle"})],-1),Av=t("span",null,"Shuffle",-1),Tv=[Pv,Av],Rv={class:"heading has-text-centered-mobile"},Iv=["onClick"],Ev=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),Lv=[Ev],Uv=C(" . ");function Ov(s,e,a,r,o,i){const n=h("spotify-list-item-track"),m=h("VueEternalLoading"),f=h("spotify-modal-dialog-track"),g=h("spotify-modal-dialog-playlist"),b=h("content-with-heading");return l(),v(b,null,{"heading-left":d(()=>[t("div",xv,u(o.playlist.name),1)]),"heading-right":d(()=>[t("div",Cv,[t("a",{class:"button is-small is-light is-rounded",onClick:e[0]||(e[0]=$=>o.show_playlist_details_modal=!0)},Sv),t("a",{class:"button is-small is-dark is-rounded",onClick:e[1]||(e[1]=(...$)=>i.play&&i.play(...$))},Tv)])]),content:d(()=>[t("p",Rv,u(o.playlist.tracks.total)+" tracks ",1),(l(!0),c(R,null,U(o.tracks,($,w)=>(l(),v(n,{key:$.track.id,track:$.track,album:$.track.album,position:w,context_uri:o.playlist.uri},{actions:d(()=>[t("a",{onClick:P=>i.open_track_dialog($.track)},Lv,8,Iv)]),_:2},1032,["track","album","position","context_uri"]))),128)),o.offset<o.total?(l(),v(m,{key:0,load:i.load_next},{"no-more":d(()=>[Uv]),_:1},8,["load"])):y("",!0),_(f,{show:o.show_track_details_modal,track:o.selected_track,album:o.selected_track.album,onClose:e[2]||(e[2]=$=>o.show_track_details_modal=!1)},null,8,["show","track","album"]),_(g,{show:o.show_playlist_details_modal,playlist:o.playlist,onClose:e[3]||(e[3]=$=>o.show_playlist_details_modal=!1)},null,8,["show","playlist"])]),_:1})}var Dv=k($v,[["render",Ov]]);const zv={name:"SpotifyListItemArtist",props:["artist"],methods:{open_artist:function(){this.$router.push({path:"/music/spotify/artists/"+this.artist.id})}}},Nv={class:"media"},Vv={class:"title is-6"},Bv={class:"media-right"};function Mv(s,e,a,r,o,i){return l(),c("div",Nv,[t("div",{class:"media-content fd-has-action is-clipped",onClick:e[0]||(e[0]=(...n)=>i.open_artist&&i.open_artist(...n))},[t("h1",Vv,u(a.artist.name),1)]),t("div",Bv,[E(s.$slots,"actions")])])}var Fv=k(zv,[["render",Mv]]);const st=50,jv={name:"SpotifyPageSearch",components:{ContentWithHeading:I,ContentText:Ms,TabsSearch:Fs,SpotifyListItemTrack:fs,SpotifyListItemArtist:Fv,SpotifyListItemAlbum:Kt,SpotifyListItemPlaylist:ps,SpotifyModalDialogTrack:ys,SpotifyModalDialogArtist:js,SpotifyModalDialogAlbum:nt,SpotifyModalDialogPlaylist:Ht,VueEternalLoading:ss.exports.VueEternalLoading,CoverArtwork:K},data(){return{search_query:"",tracks:{items:[],total:0},artists:{items:[],total:0},albums:{items:[],total:0},playlists:{items:[],total:0},query:{},search_param:{},show_track_details_modal:!1,selected_track:{},show_album_details_modal:!1,selected_album:{},show_artist_details_modal:!1,selected_artist:{},show_playlist_details_modal:!1,selected_playlist:{},validSearchTypes:["track","artist","album","playlist"]}},computed:{recent_searches(){return this.$store.state.recent_searches.filter(s=>!s.startsWith("query:"))},show_tracks(){return this.$route.query.type&&this.$route.query.type.includes("track")},show_all_tracks_button(){return this.tracks.total>this.tracks.items.length},show_artists(){return this.$route.query.type&&this.$route.query.type.includes("artist")},show_all_artists_button(){return this.artists.total>this.artists.items.length},show_albums(){return this.$route.query.type&&this.$route.query.type.includes("album")},show_all_albums_button(){return this.albums.total>this.albums.items.length},show_playlists(){return this.$route.query.type&&this.$route.query.type.includes("playlist")},show_all_playlists_button(){return this.playlists.total>this.playlists.items.length},is_visible_artwork(){return this.$store.getters.settings_option("webinterface","show_cover_artwork_in_album_lists").value}},watch:{$route(s,e){this.query=s.query,this.search()}},mounted:function(){this.query=this.$route.query,this.search()},methods:{reset:function(){this.tracks={items:[],total:0},this.artists={items:[],total:0},this.albums={items:[],total:0},this.playlists={items:[],total:0}},search:function(){if(this.reset(),!this.query.query||this.query.query===""||this.query.query.startsWith("query:")){this.search_query="",this.$refs.search_field.focus();return}this.search_query=this.query.query,this.search_param.limit=this.query.limit?this.query.limit:st,this.search_param.offset=this.query.offset?this.query.offset:0,this.$store.commit(as,this.query.query),this.search_all()},spotify_search:function(){return p.spotify().then(({data:s})=>{this.search_param.market=s.webapi_country;const e=new M;e.setAccessToken(s.webapi_token);const a=this.query.type.split(",").filter(r=>this.validSearchTypes.includes(r));return e.search(this.query.query,a,this.search_param)})},search_all:function(){this.spotify_search().then(s=>{this.tracks=s.tracks?s.tracks:{items:[],total:0},this.artists=s.artists?s.artists:{items:[],total:0},this.albums=s.albums?s.albums:{items:[],total:0},this.playlists=s.playlists?s.playlists:{items:[],total:0}})},search_tracks_next:function({loaded:s}){this.spotify_search().then(e=>{this.tracks.items=this.tracks.items.concat(e.tracks.items),this.tracks.total=e.tracks.total,this.search_param.offset+=e.tracks.limit,s(e.tracks.items.length,st)})},search_artists_next:function({loaded:s}){this.spotify_search().then(e=>{this.artists.items=this.artists.items.concat(e.artists.items),this.artists.total=e.artists.total,this.search_param.offset+=e.artists.limit,s(e.artists.items.length,st)})},search_albums_next:function({loaded:s}){this.spotify_search().then(e=>{this.albums.items=this.albums.items.concat(e.albums.items),this.albums.total=e.albums.total,this.search_param.offset+=e.albums.limit,s(e.albums.items.length,st)})},search_playlists_next:function({loaded:s}){this.spotify_search().then(e=>{this.playlists.items=this.playlists.items.concat(e.playlists.items),this.playlists.total=e.playlists.total,this.search_param.offset+=e.playlists.limit,s(e.playlists.items.length,st)})},new_search:function(){!this.search_query||(this.$router.push({path:"/search/spotify",query:{type:"track,artist,album,playlist,audiobook,podcast",query:this.search_query,limit:3,offset:0}}),this.$refs.search_field.blur())},open_search_tracks:function(){this.$router.push({path:"/search/spotify",query:{type:"track",query:this.$route.query.query}})},open_search_artists:function(){this.$router.push({path:"/search/spotify",query:{type:"artist",query:this.$route.query.query}})},open_search_albums:function(){this.$router.push({path:"/search/spotify",query:{type:"album",query:this.$route.query.query}})},open_search_playlists:function(){this.$router.push({path:"/search/spotify",query:{type:"playlist",query:this.$route.query.query}})},open_recent_search:function(s){this.search_query=s,this.new_search()},open_track_dialog:function(s){this.selected_track=s,this.show_track_details_modal=!0},open_album_dialog:function(s){this.selected_album=s,this.show_album_details_modal=!0},open_artist_dialog:function(s){this.selected_artist=s,this.show_artist_details_modal=!0},open_playlist_dialog:function(s){this.selected_playlist=s,this.show_playlist_details_modal=!0},open_album:function(s){this.$router.push({path:"/music/spotify/albums/"+s.id})},artwork_url:function(s){return s.images&&s.images.length>0?s.images[0].url:""}}},Gv={class:"section fd-remove-padding-bottom"},Kv={class:"container"},Hv={class:"columns is-centered"},Wv={class:"column is-four-fifths"},Yv={class:"field"},Qv={class:"control is-expanded has-icons-left"},Jv=t("span",{class:"icon is-left"},[t("i",{class:"mdi mdi-magnify"})],-1),Xv={class:"tags",style:{"margin-top":"16px"}},Zv=["onClick"],t$=t("p",{class:"title is-4"},"Tracks",-1),s$=["onClick"],e$=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),i$=[e$],o$=C(" . "),a$={key:0,class:"level"},n$={class:"level-item"},l$=t("p",null,[t("i",null,"No tracks found")],-1),r$=t("p",{class:"title is-4"},"Artists",-1),d$=["onClick"],c$=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),_$=[c$],u$=C(" . "),m$={key:0,class:"level"},h$={class:"level-item"},p$=t("p",null,[t("i",null,"No artists found")],-1),f$=t("p",{class:"title is-4"},"Albums",-1),y$={class:"image is-64x64 fd-has-shadow fd-has-action"},g$=["onClick"],b$=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),k$=[b$],w$=C(" . "),v$={key:0,class:"level"},$$={class:"level-item"},x$=t("p",null,[t("i",null,"No albums found")],-1),C$=t("p",{class:"title is-4"},"Playlists",-1),q$=["onClick"],S$=t("span",{class:"icon has-text-dark"},[t("i",{class:"mdi mdi-dots-vertical mdi-18px"})],-1),P$=[S$],A$=C(" . "),T$={key:0,class:"level"},R$={class:"level-item"},I$=t("p",null,[t("i",null,"No playlists found")],-1);function E$(s,e,a,r,o,i){const n=h("tabs-search"),m=h("spotify-list-item-track"),f=h("VueEternalLoading"),g=h("spotify-modal-dialog-track"),b=h("content-with-heading"),$=h("content-text"),w=h("spotify-list-item-artist"),P=h("spotify-modal-dialog-artist"),S=h("cover-artwork"),F=h("spotify-list-item-album"),lt=h("spotify-modal-dialog-album"),rt=h("spotify-list-item-playlist"),D=h("spotify-modal-dialog-playlist");return l(),c("div",null,[t("section",Gv,[t("div",Kv,[t("div",Hv,[t("div",Wv,[t("form",{onSubmit:e[1]||(e[1]=z((...A)=>i.new_search&&i.new_search(...A),["prevent"]))},[t("div",Yv,[t("p",Qv,[O(t("input",{ref:"search_field","onUpdate:modelValue":e[0]||(e[0]=A=>o.search_query=A),class:"input is-rounded is-shadowless",type:"text",placeholder:"Search",autocomplete:"off"},null,512),[[B,o.search_query]]),Jv])])],32),t("div",Xv,[(l(!0),c(R,null,U(i.recent_searches,A=>(l(),c("a",{key:A,class:"tag",onClick:tt=>i.open_recent_search(A)},u(A),9,Zv))),128))])])])])]),_(n,{query:o.search_query},null,8,["query"]),i.show_tracks&&o.tracks.total?(l(),v(b,{key:0},{"heading-left":d(()=>[t$]),content:d(()=>[(l(!0),c(R,null,U(o.tracks.items,A=>(l(),v(m,{key:A.id,track:A,album:A.album,position:0,context_uri:A.uri},{actions:d(()=>[t("a",{onClick:tt=>i.open_track_dialog(A)},i$,8,s$)]),_:2},1032,["track","album","context_uri"]))),128)),o.query.type==="track"?(l(),v(f,{key:0,load:i.search_tracks_next},{"no-more":d(()=>[o$]),_:1},8,["load"])):y("",!0),_(g,{show:o.show_track_details_modal,track:o.selected_track,album:o.selected_track.album,onClose:e[2]||(e[2]=A=>o.show_track_details_modal=!1)},null,8,["show","track","album"])]),footer:d(()=>[i.show_all_tracks_button?(l(),c("nav",a$,[t("p",n$,[t("a",{class:"button is-light is-small is-rounded",onClick:e[3]||(e[3]=(...A)=>i.open_search_tracks&&i.open_search_tracks(...A))},"Show all "+u(o.tracks.total.toLocaleString())+" tracks",1)])])):y("",!0)]),_:1})):y("",!0),i.show_tracks&&!o.tracks.total?(l(),v($,{key:1,class:"mt-6"},{content:d(()=>[l$]),_:1})):y("",!0),i.show_artists&&o.artists.total?(l(),v(b,{key:2},{"heading-left":d(()=>[r$]),content:d(()=>[(l(!0),c(R,null,U(o.artists.items,A=>(l(),v(w,{key:A.id,artist:A},{actions:d(()=>[t("a",{onClick:tt=>i.open_artist_dialog(A)},_$,8,d$)]),_:2},1032,["artist"]))),128)),o.query.type==="artist"?(l(),v(f,{key:0,load:i.search_artists_next},{"no-more":d(()=>[u$]),_:1},8,["load"])):y("",!0),_(P,{show:o.show_artist_details_modal,artist:o.selected_artist,onClose:e[4]||(e[4]=A=>o.show_artist_details_modal=!1)},null,8,["show","artist"])]),footer:d(()=>[i.show_all_artists_button?(l(),c("nav",m$,[t("p",h$,[t("a",{class:"button is-light is-small is-rounded",onClick:e[5]||(e[5]=(...A)=>i.open_search_artists&&i.open_search_artists(...A))},"Show all "+u(o.artists.total.toLocaleString())+" artists",1)])])):y("",!0)]),_:1})):y("",!0),i.show_artists&&!o.artists.total?(l(),v($,{key:3},{content:d(()=>[p$]),_:1})):y("",!0),i.show_albums&&o.albums.total?(l(),v(b,{key:4},{"heading-left":d(()=>[f$]),content:d(()=>[(l(!0),c(R,null,U(o.albums.items,A=>(l(),v(F,{key:A.id,album:A,onClick:tt=>i.open_album(A)},Bt({actions:d(()=>[t("a",{onClick:tt=>i.open_album_dialog(A)},k$,8,g$)]),_:2},[i.is_visible_artwork?{name:"artwork",fn:d(()=>[t("p",y$,[_(S,{artwork_url:i.artwork_url(A),artist:A.artist,album:A.name,maxwidth:64,maxheight:64},null,8,["artwork_url","artist","album"])])])}:void 0]),1032,["album","onClick"]))),128)),o.query.type==="album"?(l(),v(f,{key:0,load:i.search_albums_next},{"no-more":d(()=>[w$]),_:1},8,["load"])):y("",!0),_(lt,{show:o.show_album_details_modal,album:o.selected_album,onClose:e[6]||(e[6]=A=>o.show_album_details_modal=!1)},null,8,["show","album"])]),footer:d(()=>[i.show_all_albums_button?(l(),c("nav",v$,[t("p",$$,[t("a",{class:"button is-light is-small is-rounded",onClick:e[7]||(e[7]=(...A)=>i.open_search_albums&&i.open_search_albums(...A))},"Show all "+u(o.albums.total.toLocaleString())+" albums",1)])])):y("",!0)]),_:1})):y("",!0),i.show_albums&&!o.albums.total?(l(),v($,{key:5},{content:d(()=>[x$]),_:1})):y("",!0),i.show_playlists&&o.playlists.total?(l(),v(b,{key:6},{"heading-left":d(()=>[C$]),content:d(()=>[(l(!0),c(R,null,U(o.playlists.items,A=>(l(),v(rt,{key:A.id,playlist:A},{actions:d(()=>[t("a",{onClick:tt=>i.open_playlist_dialog(A)},P$,8,q$)]),_:2},1032,["playlist"]))),128)),o.query.type==="playlist"?(l(),v(f,{key:0,load:i.search_playlists_next},{"no-more":d(()=>[A$]),_:1},8,["load"])):y("",!0),_(D,{show:o.show_playlist_details_modal,playlist:o.selected_playlist,onClose:e[8]||(e[8]=A=>o.show_playlist_details_modal=!1)},null,8,["show","playlist"])]),footer:d(()=>[i.show_all_playlists_button?(l(),c("nav",T$,[t("p",R$,[t("a",{class:"button is-light is-small is-rounded",onClick:e[9]||(e[9]=(...A)=>i.open_search_playlists&&i.open_search_playlists(...A))},"Show all "+u(o.playlists.total.toLocaleString())+" playlists",1)])])):y("",!0)]),_:1})):y("",!0),i.show_playlists&&!o.playlists.total?(l(),v($,{key:7},{content:d(()=>[I$]),_:1})):y("",!0)])}var L$=k(jv,[["render",E$]]);const U$={name:"TabsSettings",computed:{}},O$={class:"section fd-tabs-section"},D$={class:"container"},z$={class:"columns is-centered"},N$={class:"column is-four-fifths"},V$={class:"tabs is-centered is-small"},B$=["onClick","onKeypress"],M$=t("span",{class:""},"Webinterface",-1),F$=[M$],j$=["onClick","onKeypress"],G$=t("span",{class:""},"Remotes & Outputs",-1),K$=[G$],H$=["onClick","onKeypress"],W$=t("span",{class:""},"Artwork",-1),Y$=[W$],Q$=["onClick","onKeypress"],J$=t("span",{class:""},"Online Services",-1),X$=[J$];function Z$(s,e,a,r,o,i){const n=h("router-link");return l(),c("section",O$,[t("div",D$,[t("div",z$,[t("div",N$,[t("div",V$,[t("ul",null,[_(n,{to:"/settings/webinterface",custom:""},{default:d(({navigate:m,isActive:f})=>[t("li",{class:q({"is-active":f})},[t("a",{onClick:m,onKeypress:V(m,["enter"])},F$,40,B$)],2)]),_:1}),_(n,{to:"/settings/remotes-outputs",custom:""},{default:d(({navigate:m,isActive:f})=>[t("li",{class:q({"is-active":f})},[t("a",{onClick:m,onKeypress:V(m,["enter"])},K$,40,j$)],2)]),_:1}),_(n,{to:"/settings/artwork",custom:""},{default:d(({navigate:m,isActive:f})=>[t("li",{class:q({"is-active":f})},[t("a",{onClick:m,onKeypress:V(m,["enter"])},Y$,40,H$)],2)]),_:1}),_(n,{to:"/settings/online-services",custom:""},{default:d(({navigate:m,isActive:f})=>[t("li",{class:q({"is-active":f})},[t("a",{onClick:m,onKeypress:V(m,["enter"])},X$,40,Q$)],2)]),_:1})])])])])])])}var Wt=k(U$,[["render",Z$]]);const t0={name:"SettingsCheckbox",props:["category_name","option_name"],data(){return{timerDelay:2e3,timerId:-1,statusUpdate:""}},computed:{category(){return this.$store.state.settings.categories.find(s=>s.name===this.category_name)},option(){return this.category?this.category.options.find(s=>s.name===this.option_name):{}},value(){return this.option.value},info(){return this.statusUpdate==="success"?"(setting saved)":this.statusUpdate==="error"?"(error saving setting)":""}},methods:{set_update_timer(){this.timerId>0&&(window.clearTimeout(this.timerId),this.timerId=-1),this.statusUpdate="",this.$refs.settings_checkbox.checked!==this.value&&(this.timerId=window.setTimeout(this.update_setting,this.timerDelay))},update_setting(){this.timerId=-1;const s=this.$refs.settings_checkbox.checked;if(console.log(this.$refs.settings_checkbox),s===this.value){this.statusUpdate="";return}const e={category:this.category.name,name:this.option_name,value:s};p.settings_update(this.category.name,e).then(()=>{this.$store.commit(Mt,e),this.statusUpdate="success"}).catch(()=>{this.statusUpdate="error",this.$refs.settings_checkbox.checked=this.value}).finally(()=>{this.timerId=window.setTimeout(this.clear_status,this.timerDelay)})},clear_status:function(){this.statusUpdate=""}}},s0={class:"field"},e0={class:"checkbox"},i0=["checked"],o0={key:0,class:"help"};function a0(s,e,a,r,o,i){return l(),c("div",s0,[t("label",e0,[t("input",{ref:"settings_checkbox",type:"checkbox",checked:i.value,onChange:e[0]||(e[0]=(...n)=>i.set_update_timer&&i.set_update_timer(...n))},null,40,i0),E(s.$slots,"label"),t("i",{class:q(["is-size-7",{"has-text-info":o.statusUpdate==="success","has-text-danger":o.statusUpdate==="error"}])},u(i.info),3)]),s.$slots.info?(l(),c("p",o0,[E(s.$slots,"info")])):y("",!0)])}var Gs=k(t0,[["render",a0]]);const n0={name:"SettingsTextfield",props:["category_name","option_name","placeholder","disabled"],data(){return{timerDelay:2e3,timerId:-1,statusUpdate:""}},computed:{category(){return this.$store.state.settings.categories.find(s=>s.name===this.category_name)},option(){return this.category?this.category.options.find(s=>s.name===this.option_name):{}},value(){return this.option.value},info(){return this.statusUpdate==="success"?"(setting saved)":this.statusUpdate==="error"?"(error saving setting)":""}},methods:{set_update_timer(){this.timerId>0&&(window.clearTimeout(this.timerId),this.timerId=-1),this.statusUpdate="",this.$refs.settings_text.value!==this.value&&(this.timerId=window.setTimeout(this.update_setting,this.timerDelay))},update_setting(){this.timerId=-1;const s=this.$refs.settings_text.value;if(s===this.value){this.statusUpdate="";return}const e={category:this.category.name,name:this.option_name,value:s};p.settings_update(this.category.name,e).then(()=>{this.$store.commit(Mt,e),this.statusUpdate="success"}).catch(()=>{this.statusUpdate="error",this.$refs.settings_text.value=this.value}).finally(()=>{this.timerId=window.setTimeout(this.clear_status,this.timerDelay)})},clear_status:function(){this.statusUpdate=""}}},l0=["disabled"],r0={class:"field"},d0={class:"label has-text-weight-normal"},c0={class:"control"},_0=["placeholder","value"],u0={key:0,class:"help"};function m0(s,e,a,r,o,i){return l(),c("fieldset",{disabled:a.disabled},[t("div",r0,[t("label",d0,[E(s.$slots,"label"),t("i",{class:q(["is-size-7",{"has-text-info":o.statusUpdate==="success","has-text-danger":o.statusUpdate==="error"}])},u(i.info),3)]),t("div",c0,[t("input",{ref:"settings_text",class:"input",type:"text",placeholder:a.placeholder,value:i.value,onInput:e[0]||(e[0]=(...n)=>i.set_update_timer&&i.set_update_timer(...n))},null,40,_0)]),s.$slots.info?(l(),c("p",u0,[E(s.$slots,"info")])):y("",!0)])],8,l0)}var h0=k(n0,[["render",m0]]);const p0={name:"SettingsIntfield",props:["category_name","option_name","placeholder","disabled"],data(){return{timerDelay:2e3,timerId:-1,statusUpdate:""}},computed:{category(){return this.$store.state.settings.categories.find(s=>s.name===this.category_name)},option(){return this.category?this.category.options.find(s=>s.name===this.option_name):{}},value(){return this.option.value},info(){return this.statusUpdate==="success"?"(setting saved)":this.statusUpdate==="error"?"(error saving setting)":""}},methods:{set_update_timer(){this.timerId>0&&(window.clearTimeout(this.timerId),this.timerId=-1),this.statusUpdate="",this.$refs.settings_number.value!==this.value&&(this.timerId=window.setTimeout(this.update_setting,this.timerDelay))},update_setting(){this.timerId=-1;const s=this.$refs.settings_number.value;if(s===this.value){this.statusUpdate="";return}const e={category:this.category.name,name:this.option_name,value:parseInt(s,10)};p.settings_update(this.category.name,e).then(()=>{this.$store.commit(Mt,e),this.statusUpdate="success"}).catch(()=>{this.statusUpdate="error",this.$refs.settings_number.value=this.value}).finally(()=>{this.timerId=window.setTimeout(this.clear_status,this.timerDelay)})},clear_status:function(){this.statusUpdate=""}}},f0=["disabled"],y0={class:"field"},g0={class:"label has-text-weight-normal"},b0={class:"control"},k0=["placeholder","value"],w0={key:0,class:"help"};function v0(s,e,a,r,o,i){return l(),c("fieldset",{disabled:a.disabled},[t("div",y0,[t("label",g0,[E(s.$slots,"label"),t("i",{class:q(["is-size-7",{"has-text-info":o.statusUpdate==="success","has-text-danger":o.statusUpdate==="error"}])},u(i.info),3)]),t("div",b0,[t("input",{ref:"settings_number",class:"input",type:"number",min:"0",style:{width:"10em"},placeholder:a.placeholder,value:i.value,onInput:e[0]||(e[0]=(...n)=>i.set_update_timer&&i.set_update_timer(...n))},null,40,k0)]),s.$slots.info?(l(),c("p",w0,[E(s.$slots,"info")])):y("",!0)])],8,f0)}var $0=k(p0,[["render",v0]]);const x0={name:"SettingsPageWebinterface",components:{ContentWithHeading:I,TabsSettings:Wt,SettingsCheckbox:Gs,SettingsTextfield:h0,SettingsIntfield:$0},computed:{settings_option_show_composer_now_playing(){return this.$store.getters.settings_option_show_composer_now_playing}},mounted(){function s(){const o=window.matchMedia("(prefers-color-scheme: dark)"),i=localStorage.getItem("preferred_colorscheme"),n=document.querySelector('meta[name="theme-color"]');i==="dark"||i==="system"&&o.matches?(document.documentElement.classList.add("dark-theme"),n.setAttribute("content","#000000")):(i=="light"||i==="system"&&!o.matches)&&(document.documentElement.classList.remove("dark-theme"),n.setAttribute("content","#ffffff"))}document.querySelector('input[id="'+localStorage.getItem("preferred_colorscheme")+'"]').checked=!0;for(var e=document.getElementById("colorscheme_radio"),a=e.getElementsByTagName("input"),r=0;r<a.length;++r)a[r].addEventListener("change",function(){this.checked&&(localStorage.setItem("preferred_colorscheme",this.id),s())});s()}},C0={class:"fd-page-with-tabs"},q0=t("div",{class:"title is-4"},"Color scheme",-1),S0=t("span",{id:"colorscheme_radio"},[t("input",{type:"radio",class:"fd-radio",id:"system",name:"colorscheme_radio",value:"system"}),t("label",{for:"system"}," Use system setting"),t("br"),t("input",{type:"radio",class:"fd-radio",id:"light",name:"colorscheme_radio",value:"light"}),t("label",{for:"light"}," Light mode"),t("br"),t("input",{type:"radio",class:"fd-radio",id:"dark",name:"colorscheme_radio",value:"dark"}),t("label",{for:"dark"}," Dark mode"),t("br")],-1),P0=t("div",{class:"title is-4"},"Navbar items",-1),A0=t("p",{class:"content"},"Select the top navigation bar menu items",-1),T0=t("div",{class:"notification is-size-7"}," If you select more items than can be shown on your screen then the burger menu will disappear. ",-1),R0=C(" Playlists "),I0=C(" Music "),E0=C(" Podcasts "),L0=C(" Audiobooks "),U0=C(" Radio "),O0=C(" Files "),D0=C(" Search "),z0=t("div",{class:"title is-4"},"Album lists",-1),N0=C(" Show cover artwork in album list "),V0=t("div",{class:"title is-4"},"Now playing page",-1),B0=C(" Show composer "),M0=C(' If enabled the composer of the current playing track is shown on the "now playing page" '),F0=C(" Show composer only for listed genres "),j0=t("p",{class:"help"},' Comma separated list of genres the composer should be displayed on the "now playing page". ',-1),G0=t("p",{class:"help"},"Leave empty to always show the composer.",-1),K0=t("p",{class:"help"},[C(" The genre tag of the current track is matched by checking, if one of the defined genres are included. For example setting to "),t("code",null,"classical, soundtrack"),C(' will show the composer for tracks with a genre tag of "Contemporary Classical".'),t("br")],-1),H0=t("div",{class:"title is-4"},"Recently added page",-1),W0=C(' Limit the number of albums shown on the "Recently Added" page ');function Y0(s,e,a,r,o,i){const n=h("tabs-settings"),m=h("content-with-heading"),f=h("settings-checkbox"),g=h("settings-textfield"),b=h("settings-intfield");return l(),c("div",C0,[_(n),_(m,null,{"heading-left":d(()=>[q0]),content:d(()=>[S0]),_:1}),_(m,null,{"heading-left":d(()=>[P0]),content:d(()=>[A0,T0,_(f,{category_name:"webinterface",option_name:"show_menu_item_playlists"},{label:d(()=>[R0]),_:1}),_(f,{category_name:"webinterface",option_name:"show_menu_item_music"},{label:d(()=>[I0]),_:1}),_(f,{category_name:"webinterface",option_name:"show_menu_item_podcasts"},{label:d(()=>[E0]),_:1}),_(f,{category_name:"webinterface",option_name:"show_menu_item_audiobooks"},{label:d(()=>[L0]),_:1}),_(f,{category_name:"webinterface",option_name:"show_menu_item_radio"},{label:d(()=>[U0]),_:1}),_(f,{category_name:"webinterface",option_name:"show_menu_item_files"},{label:d(()=>[O0]),_:1}),_(f,{category_name:"webinterface",option_name:"show_menu_item_search"},{label:d(()=>[D0]),_:1})]),_:1}),_(m,null,{"heading-left":d(()=>[z0]),content:d(()=>[_(f,{category_name:"webinterface",option_name:"show_cover_artwork_in_album_lists"},{label:d(()=>[N0]),_:1})]),_:1}),_(m,null,{"heading-left":d(()=>[V0]),content:d(()=>[_(f,{category_name:"webinterface",option_name:"show_composer_now_playing"},{label:d(()=>[B0]),info:d(()=>[M0]),_:1}),_(g,{category_name:"webinterface",option_name:"show_composer_for_genre",disabled:!i.settings_option_show_composer_now_playing,placeholder:"Genres"},{label:d(()=>[F0]),info:d(()=>[j0,G0,K0]),_:1},8,["disabled"])]),_:1}),_(m,null,{"heading-left":d(()=>[H0]),content:d(()=>[_(b,{category_name:"webinterface",option_name:"recently_added_limit"},{label:d(()=>[W0]),_:1})]),_:1})])}var Q0=k(x0,[["render",Y0]]);const J0={name:"SettingsPageArtwork",components:{ContentWithHeading:I,TabsSettings:Wt,SettingsCheckbox:Gs},computed:{spotify(){return this.$store.state.spotify}}},X0={class:"fd-page-with-tabs"},Z0=t("div",{class:"title is-4"},"Artwork",-1),tx=t("div",{class:"content"},[t("p",null," OwnTone supports PNG and JPEG artwork which is either placed as separate image files in the library, embedded in the media files or made available online by radio stations. "),t("p",null," In addition to that, you can enable fetching artwork from the following artwork providers: ")],-1),sx=C(" Spotify "),ex=C(" Discogs ("),ix=t("a",{href:"https://www.discogs.com/"},"https://www.discogs.com/",-1),ox=C(") "),ax=C(" Cover Art Archive ("),nx=t("a",{href:"https://coverartarchive.org/"},"https://coverartarchive.org/",-1),lx=C(") ");function rx(s,e,a,r,o,i){const n=h("tabs-settings"),m=h("settings-checkbox"),f=h("content-with-heading");return l(),c("div",X0,[_(n),_(f,null,{"heading-left":d(()=>[Z0]),content:d(()=>[tx,i.spotify.libspotify_logged_in?(l(),v(m,{key:0,category_name:"artwork",option_name:"use_artwork_source_spotify"},{label:d(()=>[sx]),_:1})):y("",!0),_(m,{category_name:"artwork",option_name:"use_artwork_source_discogs"},{label:d(()=>[ex,ix,ox]),_:1}),_(m,{category_name:"artwork",option_name:"use_artwork_source_coverartarchive"},{label:d(()=>[ax,nx,lx]),_:1})]),_:1})])}var dx=k(J0,[["render",rx]]);const cx={name:"SettingsPageOnlineServices",components:{ContentWithHeading:I,TabsSettings:Wt},filters:{join(s){return s.join(", ")}},data(){return{libspotify:{user:"",password:"",errors:{user:"",password:"",error:""}},lastfm_login:{user:"",password:"",errors:{user:"",password:"",error:""}}}},computed:{lastfm(){return this.$store.state.lastfm},spotify(){return this.$store.state.spotify},spotify_required_scope(){return this.spotify.webapi_required_scope?this.spotify.webapi_required_scope.split(" "):[]},spotify_missing_scope(){return this.spotify.webapi_token_valid&&this.spotify.webapi_granted_scope&&this.spotify.webapi_required_scope?this.spotify.webapi_required_scope.split(" ").filter(s=>this.spotify.webapi_granted_scope.indexOf(s)<0):[]},use_libspotify(){return this.$store.state.config.use_libspotify}},methods:{login_libspotify(){p.spotify_login(this.libspotify).then(s=>{this.libspotify.user="",this.libspotify.password="",this.libspotify.errors.user="",this.libspotify.errors.password="",this.libspotify.errors.error="",s.data.success||(this.libspotify.errors.user=s.data.errors.user,this.libspotify.errors.password=s.data.errors.password,this.libspotify.errors.error=s.data.errors.error)})},logout_spotify(){p.spotify_logout()},login_lastfm(){p.lastfm_login(this.lastfm_login).then(s=>{this.lastfm_login.user="",this.lastfm_login.password="",this.lastfm_login.errors.user="",this.lastfm_login.errors.password="",this.lastfm_login.errors.error="",s.data.success||(this.lastfm_login.errors.user=s.data.errors.user,this.lastfm_login.errors.password=s.data.errors.password,this.lastfm_login.errors.error=s.data.errors.error)})},logoutLastfm(){p.lastfm_logout()}}},_x={class:"fd-page-with-tabs"},ux=t("div",{class:"title is-4"},"Spotify",-1),mx={key:0,class:"notification is-size-7"},hx=t("p",null," OwnTone was either built without support for Spotify or libspotify is not installed. ",-1),px=[hx],fx={key:1},yx={class:"notification is-size-7"},gx=t("b",null,"You must have a Spotify premium account",-1),bx=C(". "),kx={key:0},wx={key:0},vx=t("p",{class:"content"},[t("b",null,"libspotify"),C(" - Login with your Spotify username and password ")],-1),$x={key:0,class:"fd-has-margin-bottom"},xx=C(" Logged in as "),Cx={class:"field is-grouped"},qx={class:"control is-expanded"},Sx={class:"help is-danger"},Px={class:"control is-expanded"},Ax={class:"help is-danger"},Tx=t("div",{class:"control"},[t("button",{class:"button is-info"},"Login")],-1),Rx={class:"help is-danger"},Ix=t("p",{class:"help"}," libspotify enables OwnTone to play Spotify tracks. ",-1),Ex=t("p",{class:"help"}," OwnTone will not store your password, but will still be able to log you in automatically afterwards, because libspotify saves a login token. ",-1),Lx={class:"fd-has-margin-top"},Ux=t("p",{class:"content"},[t("b",null,"Spotify Web API"),C(" - Grant access to the Spotify Web API ")],-1),Ox={key:0},Dx=C(" Access granted for "),zx={key:1,class:"help is-danger"},Nx=C(" Please reauthorize Web API access to grant OwnTone the following additional access rights: "),Vx={class:"field fd-has-margin-top"},Bx={class:"control"},Mx=["href"],Fx={class:"help"},jx=C(" Access to the Spotify Web API enables scanning of your Spotify library. Required scopes are "),Gx=C(". "),Kx={key:2,class:"field fd-has-margin-top"},Hx={class:"control"},Wx=t("div",{class:"title is-4"},"Last.fm",-1),Yx={key:0,class:"notification is-size-7"},Qx=t("p",null,"OwnTone was built without support for Last.fm.",-1),Jx=[Qx],Xx={key:1},Zx=t("p",{class:"content"},[t("b",null,"Last.fm"),C(" - Login with your Last.fm username and password to enable scrobbling ")],-1),t2={key:0},s2={key:1},e2={class:"field is-grouped"},i2={class:"control is-expanded"},o2={class:"help is-danger"},a2={class:"control is-expanded"},n2={class:"help is-danger"},l2=t("div",{class:"control"},[t("button",{class:"button is-info",type:"submit"},"Login")],-1),r2={class:"help is-danger"},d2=t("p",{class:"help"}," OwnTone will not store your Last.fm username/password, only the session key. The session key does not expire. ",-1);function c2(s,e,a,r,o,i){const n=h("tabs-settings"),m=h("content-with-heading");return l(),c("div",_x,[_(n),_(m,null,{"heading-left":d(()=>[ux]),content:d(()=>[i.spotify.spotify_installed?y("",!0):(l(),c("div",mx,px)),i.spotify.spotify_installed?(l(),c("div",fx,[t("div",yx,[gx,bx,s.use_libspotity?(l(),c("span",kx,"If you normally log into Spotify with your Facebook account you must first go to Spotify's web site where you can get the Spotify username and password that matches your account.")):y("",!0)]),s.use_libspotity?(l(),c("div",wx,[vx,i.spotify.libspotify_logged_in?(l(),c("p",$x,[xx,t("b",null,[t("code",null,u(i.spotify.libspotify_user),1)])])):y("",!0),i.spotify.spotify_installed&&!i.spotify.libspotify_logged_in?(l(),c("form",{key:1,onSubmit:e[2]||(e[2]=z((...f)=>i.login_libspotify&&i.login_libspotify(...f),["prevent"]))},[t("div",Cx,[t("div",qx,[O(t("input",{"onUpdate:modelValue":e[0]||(e[0]=f=>o.libspotify.user=f),class:"input",type:"text",placeholder:"Username"},null,512),[[B,o.libspotify.user]]),t("p",Sx,u(o.libspotify.errors.user),1)]),t("div",Px,[O(t("input",{"onUpdate:modelValue":e[1]||(e[1]=f=>o.libspotify.password=f),class:"input",type:"password",placeholder:"Password"},null,512),[[B,o.libspotify.password]]),t("p",Ax,u(o.libspotify.errors.password),1)]),Tx])],32)):y("",!0),t("p",Rx,u(o.libspotify.errors.error),1),Ix,Ex])):y("",!0),t("div",Lx,[Ux,i.spotify.webapi_token_valid?(l(),c("p",Ox,[Dx,t("b",null,[t("code",null,u(i.spotify.webapi_user),1)])])):y("",!0),i.spotify_missing_scope.length>0?(l(),c("p",zx,[Nx,t("b",null,[t("code",null,u(i.spotify_missing_scope.join()),1)])])):y("",!0),t("div",Vx,[t("div",Bx,[t("a",{class:q(["button",{"is-info":!i.spotify.webapi_token_valid||i.spotify_missing_scope.length>0}]),href:i.spotify.oauth_uri},"Authorize Web API access",10,Mx)])]),t("p",Fx,[jx,t("code",null,u(i.spotify_required_scope.join()),1),Gx]),i.spotify.webapi_token_valid?(l(),c("div",Kx,[t("div",Hx,[t("a",{class:"button is-danger",onClick:e[3]||(e[3]=(...f)=>i.logout_spotify&&i.logout_spotify(...f))},"Logout")])])):y("",!0)])])):y("",!0)]),_:1}),_(m,null,{"heading-left":d(()=>[Wx]),content:d(()=>[i.lastfm.enabled?y("",!0):(l(),c("div",Yx,Jx)),i.lastfm.enabled?(l(),c("div",Xx,[Zx,i.lastfm.scrobbling_enabled?(l(),c("div",t2,[t("a",{class:"button",onClick:e[4]||(e[4]=(...f)=>i.logoutLastfm&&i.logoutLastfm(...f))},"Stop scrobbling")])):y("",!0),i.lastfm.scrobbling_enabled?y("",!0):(l(),c("div",s2,[t("form",{onSubmit:e[7]||(e[7]=z((...f)=>i.login_lastfm&&i.login_lastfm(...f),["prevent"]))},[t("div",e2,[t("div",i2,[O(t("input",{"onUpdate:modelValue":e[5]||(e[5]=f=>o.lastfm_login.user=f),class:"input",type:"text",placeholder:"Username"},null,512),[[B,o.lastfm_login.user]]),t("p",o2,u(o.lastfm_login.errors.user),1)]),t("div",a2,[O(t("input",{"onUpdate:modelValue":e[6]||(e[6]=f=>o.lastfm_login.password=f),class:"input",type:"password",placeholder:"Password"},null,512),[[B,o.lastfm_login.password]]),t("p",n2,u(o.lastfm_login.errors.password),1)]),l2]),t("p",r2,u(o.lastfm_login.errors.error),1),d2],32)]))])):y("",!0)]),_:1})])}var _2=k(cx,[["render",c2]]);const u2={name:"SettingsPageRemotesOutputs",components:{ContentWithHeading:I,TabsSettings:Wt},filters:{},data(){return{pairing_req:{pin:""},verification_req:{pin:""}}},computed:{pairing(){return this.$store.state.pairing},outputs(){return this.$store.state.outputs}},methods:{kickoff_pairing(){p.pairing_kickoff(this.pairing_req)},output_toggle(s){p.output_toggle(s)},kickoff_verification(s){p.output_update(s,this.verification_req)}}},m2={class:"fd-page-with-tabs"},h2=t("div",{class:"title is-4"},"Remote Pairing",-1),p2={key:0,class:"notification"},f2={class:"label has-text-weight-normal"},y2=C(" Remote pairing request from "),g2={class:"field is-grouped"},b2={class:"control"},k2=t("div",{class:"control"},[t("button",{class:"button is-info",type:"submit"},"Send")],-1),w2={key:1,class:"content"},v2=t("p",null,"No active pairing request.",-1),$2=[v2],x2=t("div",{class:"title is-4"},"Speaker pairing and device verification",-1),C2=t("p",{class:"content"}," If your speaker requires pairing then activate it below and enter the PIN that it displays. ",-1),q2={class:"field"},S2={class:"control"},P2={class:"checkbox"},A2=["onUpdate:modelValue","onChange"],T2=["onSubmit"],R2={class:"field is-grouped"},I2={class:"control"},E2=t("div",{class:"control"},[t("button",{class:"button is-info",type:"submit"},"Verify")],-1);function L2(s,e,a,r,o,i){const n=h("tabs-settings"),m=h("content-with-heading");return l(),c("div",m2,[_(n),_(m,null,{"heading-left":d(()=>[h2]),content:d(()=>[i.pairing.active?(l(),c("div",p2,[t("form",{onSubmit:e[1]||(e[1]=z((...f)=>i.kickoff_pairing&&i.kickoff_pairing(...f),["prevent"]))},[t("label",f2,[y2,t("b",null,u(i.pairing.remote),1)]),t("div",g2,[t("div",b2,[O(t("input",{"onUpdate:modelValue":e[0]||(e[0]=f=>o.pairing_req.pin=f),class:"input",type:"text",placeholder:"Enter pairing code"},null,512),[[B,o.pairing_req.pin]])]),k2])],32)])):y("",!0),i.pairing.active?y("",!0):(l(),c("div",w2,$2))]),_:1}),_(m,null,{"heading-left":d(()=>[x2]),content:d(()=>[C2,(l(!0),c(R,null,U(i.outputs,f=>(l(),c("div",{key:f.id},[t("div",q2,[t("div",S2,[t("label",P2,[O(t("input",{"onUpdate:modelValue":g=>f.selected=g,type:"checkbox",onChange:g=>i.output_toggle(f.id)},null,40,A2),[[Q,f.selected]]),C(" "+u(f.name),1)])])]),f.needs_auth_key?(l(),c("form",{key:0,class:"fd-has-margin-bottom",onSubmit:z(g=>i.kickoff_verification(f.id),["prevent"])},[t("div",R2,[t("div",I2,[O(t("input",{"onUpdate:modelValue":e[2]||(e[2]=g=>o.verification_req.pin=g),class:"input",type:"text",placeholder:"Enter verification code"},null,512),[[B,o.verification_req.pin]])]),E2])],40,T2)):y("",!0)]))),128))]),_:1})])}var U2=k(u2,[["render",L2]]);const Ks=te({history:se(),routes:[{path:"/",name:"PageQueue",component:Jo},{path:"/about",name:"About",component:Hb},{path:"/now-playing",name:"Now playing",component:ka},{path:"/music",redirect:"/music/browse"},{path:"/music/browse",name:"Browse",component:Kr,meta:{show_progress:!0,has_tabs:!0}},{path:"/music/browse/recently_added",name:"Browse Recently Added",component:Xr,meta:{show_progress:!0,has_tabs:!0}},{path:"/music/browse/recently_played",name:"Browse Recently Played",component:od,meta:{show_progress:!0,has_tabs:!0}},{path:"/music/artists",name:"Artists",component:gc,meta:{show_progress:!0,has_tabs:!0,has_index:!0}},{path:"/music/artists/:artist_id",name:"Artist",component:Ic,meta:{show_progress:!0,has_index:!0}},{path:"/music/artists/:artist_id/tracks",name:"Tracks",component:Du,meta:{show_progress:!0,has_index:!0}},{path:"/music/albums",name:"Albums",component:Jc,meta:{show_progress:!0,has_tabs:!0,has_index:!0}},{path:"/music/albums/:album_id",name:"Album",component:C_,meta:{show_progress:!0}},{path:"/music/genres",name:"Genres",component:ou,meta:{show_progress:!0,has_tabs:!0,has_index:!0}},{path:"/music/genres/:genre",name:"Genre",component:pu,meta:{show_progress:!0,has_index:!0}},{path:"/music/genres/:genre/tracks",name:"GenreTracks",component:qu,meta:{show_progress:!0,has_index:!0}},{path:"/music/composers",name:"Composers",component:bm,meta:{show_progress:!0,has_tabs:!0,has_index:!0}},{path:"/music/composers/:composer/albums",name:"ComposerAlbums",component:Tm,meta:{show_progress:!0,has_tabs:!0,has_index:!0}},{path:"/music/composers/:composer/tracks",name:"ComposerTracks",component:jm,meta:{show_progress:!0,has_tabs:!0,has_index:!0}},{path:"/podcasts",name:"Podcasts",component:Uh,meta:{show_progress:!0}},{path:"/podcasts/:album_id",name:"Podcast",component:Zh,meta:{show_progress:!0}},{path:"/audiobooks",redirect:"/audiobooks/artists"},{path:"/audiobooks/artists",name:"AudiobooksArtists",component:qp,meta:{show_progress:!0,has_tabs:!0,has_index:!0}},{path:"/audiobooks/artists/:artist_id",name:"AudiobooksArtist",component:Dp,meta:{show_progress:!0}},{path:"/audiobooks/albums",name:"AudiobooksAlbums",component:kp,meta:{show_progress:!0,has_tabs:!0,has_index:!0}},{path:"/audiobooks/:album_id",name:"Audiobook",component:Qp,meta:{show_progress:!0}},{path:"/radio",name:"Radio",component:Jy,meta:{show_progress:!0}},{path:"/files",name:"Files",component:Ky,meta:{show_progress:!0}},{path:"/playlists",redirect:"/playlists/0"},{path:"/playlists/:playlist_id",name:"Playlists",component:Df,meta:{show_progress:!0}},{path:"/playlists/:playlist_id/tracks",name:"Playlist",component:Wf,meta:{show_progress:!0}},{path:"/search",redirect:"/search/library"},{path:"/search/library",name:"Search Library",component:ib},{path:"/music/spotify",name:"Spotify",component:vk,meta:{show_progress:!0,has_tabs:!0}},{path:"/music/spotify/new-releases",name:"Spotify Browse New Releases",component:Rk,meta:{show_progress:!0,has_tabs:!0}},{path:"/music/spotify/featured-playlists",name:"Spotify Browse Featured Playlists",component:Nk,meta:{show_progress:!0,has_tabs:!0}},{path:"/music/spotify/artists/:artist_id",name:"Spotify Artist",component:$w,meta:{show_progress:!0}},{path:"/music/spotify/albums/:album_id",name:"Spotify Album",component:vv,meta:{show_progress:!0}},{path:"/music/spotify/playlists/:playlist_id",name:"Spotify Playlist",component:Dv,meta:{show_progress:!0}},{path:"/search/spotify",name:"Spotify Search",component:L$},{path:"/settings/webinterface",name:"Settings Webinterface",component:Q0},{path:"/settings/artwork",name:"Settings Artwork",component:dx},{path:"/settings/online-services",name:"Settings Online Services",component:_2},{path:"/settings/remotes-outputs",name:"Settings Remotes Outputs",component:U2}],scrollBehavior(s,e,a){return a?new Promise((o,i)=>{setTimeout(()=>{o(a)},0)}):s.path===e.path&&s.hash?{el:s.hash,top:120}:s.hash?new Promise((o,i)=>{setTimeout(()=>{o({el:s.hash,top:120})},0)}):s.meta.has_index?new Promise((o,i)=>{setTimeout(()=>{s.meta.has_tabs?o({el:"#top",top:140}):o({el:"#top",top:110})},0)}):{left:0,top:0}}});Ks.beforeEach((s,e,a)=>{if(T.state.show_burger_menu){T.commit(J,!1),a(!1);return}if(T.state.show_player_menu){T.commit(X,!1),a(!1);return}a(!0)});ee(Y);const O2={duration:function(s,e){return e?Y.duration(s).format(e):Y.duration(s).format("hh:*mm:ss")},time:function(s,e){return e?Y(s).format(e):Y(s).format()},timeFromNow:function(s,e){return Y(s).fromNow(e)},number:function(s){return s.toLocaleString()},channels:function(s){return s===1?"mono":s===2?"stereo":s?s+" channels":""}},D2={name:"NavbarItemLink",props:{to:String,exact:Boolean},computed:{is_active(){return this.exact?this.$route.path===this.to:this.$route.path.startsWith(this.to)},show_player_menu:{get(){return this.$store.state.show_player_menu},set(s){this.$store.commit(X,s)}},show_burger_menu:{get(){return this.$store.state.show_burger_menu},set(s){this.$store.commit(J,s)}}},methods:{open_link:function(){this.show_burger_menu&&this.$store.commit(J,!1),this.show_player_menu&&this.$store.commit(X,!1),this.$router.push({path:this.to})},full_path:function(){return this.$router.resolve(this.to).href}}},z2=["href"];function N2(s,e,a,r,o,i){return l(),c("a",{class:q(["navbar-item",{"is-active":i.is_active}]),href:i.full_path(),onClick:e[0]||(e[0]=z(n=>i.open_link(),["stop","prevent"]))},[E(s.$slots,"default")],10,z2)}var Hs=k(D2,[["render",N2]]);const V2={name:"NavbarTop",components:{NavbarItemLink:Hs},data(){return{show_settings_menu:!1}},computed:{is_visible_playlists(){return this.$store.getters.settings_option("webinterface","show_menu_item_playlists").value},is_visible_music(){return this.$store.getters.settings_option("webinterface","show_menu_item_music").value},is_visible_podcasts(){return this.$store.getters.settings_option("webinterface","show_menu_item_podcasts").value},is_visible_audiobooks(){return this.$store.getters.settings_option("webinterface","show_menu_item_audiobooks").value},is_visible_radio(){return this.$store.getters.settings_option("webinterface","show_menu_item_radio").value},is_visible_files(){return this.$store.getters.settings_option("webinterface","show_menu_item_files").value},is_visible_search(){return this.$store.getters.settings_option("webinterface","show_menu_item_search").value},player(){return this.$store.state.player},config(){return this.$store.state.config},library(){return this.$store.state.library},audiobooks(){return this.$store.state.audiobooks_count},podcasts(){return this.$store.state.podcasts_count},spotify_enabled(){return this.$store.state.spotify.webapi_token_valid},show_burger_menu:{get(){return this.$store.state.show_burger_menu},set(s){this.$store.commit(J,s)}},show_player_menu(){return this.$store.state.show_player_menu},show_update_dialog:{get(){return this.$store.state.show_update_dialog},set(s){this.$store.commit(it,s)}},zindex(){return this.show_player_menu?"z-index: 20":""}},watch:{$route(s,e){this.show_settings_menu=!1}},methods:{on_click_outside_settings(){this.show_settings_menu=!this.show_settings_menu},open_update_dialog(){this.show_update_dialog=!0,this.show_settings_menu=!1,this.show_burger_menu=!1}}},B2={class:"navbar-brand"},M2=t("span",{class:"icon"},[t("i",{class:"mdi mdi-library-music"})],-1),F2=t("span",{class:"icon"},[t("i",{class:"mdi mdi-music"})],-1),j2=t("span",{class:"icon"},[t("i",{class:"mdi mdi-microphone"})],-1),G2=t("span",{class:"icon"},[t("i",{class:"mdi mdi-book-open-variant"})],-1),K2=t("span",{class:"icon"},[t("i",{class:"mdi mdi-radio"})],-1),H2=t("span",{class:"icon"},[t("i",{class:"mdi mdi-folder-open"})],-1),W2=t("span",{class:"icon"},[t("i",{class:"mdi mdi-magnify"})],-1),Y2=t("span",null,null,-1),Q2=t("span",null,null,-1),J2=t("span",null,null,-1),X2=[Y2,Q2,J2],Z2=t("div",{class:"navbar-start"},null,-1),tC={class:"navbar-end"},sC=t("a",{class:"navbar-link is-arrowless"},[t("span",{class:"icon is-hidden-touch"},[t("i",{class:"mdi mdi-24px mdi-menu"})]),t("span",{class:"is-hidden-desktop has-text-weight-bold"},"OwnTone")],-1),eC={class:"navbar-dropdown is-right"},iC=t("span",{class:"icon"},[t("i",{class:"mdi mdi-library-music"})],-1),oC=t("b",null,"Playlists",-1),aC=t("span",{class:"icon"},[t("i",{class:"mdi mdi-music"})],-1),nC=t("b",null,"Music",-1),lC=t("span",{class:"fd-navbar-item-level2"},"Artists",-1),rC=t("span",{class:"fd-navbar-item-level2"},"Albums",-1),dC=t("span",{class:"fd-navbar-item-level2"},"Genres",-1),cC=t("span",{class:"fd-navbar-item-level2"},"Spotify",-1),_C=t("span",{class:"icon"},[t("i",{class:"mdi mdi-microphone"})],-1),uC=t("b",null,"Podcasts",-1),mC=t("span",{class:"icon"},[t("i",{class:"mdi mdi-book-open-variant"})],-1),hC=t("b",null,"Audiobooks",-1),pC=t("span",{class:"icon"},[t("i",{class:"mdi mdi-radio"})],-1),fC=t("b",null,"Radio",-1),yC=t("span",{class:"icon"},[t("i",{class:"mdi mdi-folder-open"})],-1),gC=t("b",null,"Files",-1),bC=t("span",{class:"icon"},[t("i",{class:"mdi mdi-magnify"})],-1),kC=t("b",null,"Search",-1),wC=t("hr",{class:"fd-navbar-divider"},null,-1),vC=C(" Settings "),$C=C(" About "),xC=t("div",{class:"navbar-item is-hidden-desktop",style:{"margin-bottom":"2.5rem"}},null,-1);function CC(s,e,a,r,o,i){const n=h("navbar-item-link");return l(),c("nav",{class:"fd-top-navbar navbar is-light is-fixed-top",style:ts(i.zindex),role:"navigation","aria-label":"main navigation"},[t("div",B2,[i.is_visible_playlists?(l(),v(n,{key:0,to:"/playlists"},{default:d(()=>[M2]),_:1})):y("",!0),i.is_visible_music?(l(),v(n,{key:1,to:"/music"},{default:d(()=>[F2]),_:1})):y("",!0),i.is_visible_podcasts?(l(),v(n,{key:2,to:"/podcasts"},{default:d(()=>[j2]),_:1})):y("",!0),i.is_visible_audiobooks?(l(),v(n,{key:3,to:"/audiobooks"},{default:d(()=>[G2]),_:1})):y("",!0),i.is_visible_radio?(l(),v(n,{key:4,to:"/radio"},{default:d(()=>[K2]),_:1})):y("",!0),i.is_visible_files?(l(),v(n,{key:5,to:"/files"},{default:d(()=>[H2]),_:1})):y("",!0),i.is_visible_search?(l(),v(n,{key:6,to:"/search"},{default:d(()=>[W2]),_:1})):y("",!0),t("div",{class:q(["navbar-burger",{"is-active":i.show_burger_menu}]),onClick:e[0]||(e[0]=m=>i.show_burger_menu=!i.show_burger_menu)},X2,2)]),t("div",{class:q(["navbar-menu",{"is-active":i.show_burger_menu}])},[Z2,t("div",tC,[t("div",{class:q(["navbar-item has-dropdown is-hoverable",{"is-active":o.show_settings_menu}]),onClick:e[2]||(e[2]=(...m)=>i.on_click_outside_settings&&i.on_click_outside_settings(...m))},[sC,t("div",eC,[_(n,{to:"/playlists"},{default:d(()=>[iC,oC]),_:1}),_(n,{to:"/music",exact:""},{default:d(()=>[aC,nC]),_:1}),_(n,{to:"/music/artists"},{default:d(()=>[lC]),_:1}),_(n,{to:"/music/albums"},{default:d(()=>[rC]),_:1}),_(n,{to:"/music/genres"},{default:d(()=>[dC]),_:1}),i.spotify_enabled?(l(),v(n,{key:0,to:"/music/spotify"},{default:d(()=>[cC]),_:1})):y("",!0),_(n,{to:"/podcasts"},{default:d(()=>[_C,uC]),_:1}),_(n,{to:"/audiobooks"},{default:d(()=>[mC,hC]),_:1}),_(n,{to:"/radio"},{default:d(()=>[pC,fC]),_:1}),_(n,{to:"/files"},{default:d(()=>[yC,gC]),_:1}),_(n,{to:"/search"},{default:d(()=>[bC,kC]),_:1}),wC,_(n,{to:"/settings/webinterface"},{default:d(()=>[vC]),_:1}),t("a",{class:"navbar-item",onClick:e[1]||(e[1]=z(m=>i.open_update_dialog(),["stop","prevent"]))}," Update Library "),_(n,{to:"/about"},{default:d(()=>[$C]),_:1}),xC])],2)])],2),O(t("div",{class:"is-overlay",style:{"z-index":"10",width:"100vw",height:"100vh"},onClick:e[3]||(e[3]=m=>o.show_settings_menu=!1)},null,512),[[Nt,o.show_settings_menu]])],4)}var qC=k(V2,[["render",CC]]),et={_audio:new Audio,_context:null,_source:null,_gain:null,setupAudio(){const s=window.AudioContext||window.webkitAudioContext;return this._context=new s,this._source=this._context.createMediaElementSource(this._audio),this._gain=this._context.createGain(),this._source.connect(this._gain),this._gain.connect(this._context.destination),this._audio.addEventListener("canplaythrough",e=>{this._audio.play()}),this._audio.addEventListener("canplay",e=>{this._audio.play()}),this._audio},setVolume(s){!this._gain||(s=parseFloat(s)||0,s=s<0?0:s,s=s>1?1:s,this._gain.gain.value=s)},playSource(s){this.stopAudio(),this._context.resume().then(()=>{this._audio.src=String(s||"")+"?x="+Date.now(),this._audio.crossOrigin="anonymous",this._audio.load()})},stopAudio(){try{this._audio.pause()}catch{}try{this._audio.stop()}catch{}try{this._audio.close()}catch{}}};const SC={name:"NavbarItemOutput",components:{Slider:Zt},props:["output"],computed:{type_class(){return this.output.type.startsWith("AirPlay")?"mdi-airplay":this.output.type==="Chromecast"?"mdi-cast":this.output.type==="fifo"?"mdi-pipe":"mdi-server"},volume(){return this.output.selected?this.output.volume:0}},methods:{play_next:function(){p.player_next()},set_volume:function(s){p.player_output_volume(this.output.id,s)},set_enabled:function(){const s={selected:!this.output.selected};p.output_update(this.output.id,s)}}},PC={class:"navbar-item"},AC={class:"level is-mobile"},TC={class:"level-left fd-expanded"},RC={class:"level-item",style:{"flex-grow":"0"}},IC={class:"button is-white is-small"},EC=["title"],LC={class:"level-item fd-expanded"},UC={class:"fd-expanded"};function OC(s,e,a,r,o,i){const n=h("Slider");return l(),c("div",PC,[t("div",AC,[t("div",TC,[t("div",RC,[t("a",IC,[t("span",{class:q(["icon fd-has-action",{"has-text-grey-light":!a.output.selected}]),onClick:e[0]||(e[0]=(...m)=>i.set_enabled&&i.set_enabled(...m))},[t("i",{class:q(["mdi mdi-18px",i.type_class]),title:a.output.type},null,10,EC)],2)])]),t("div",LC,[t("div",UC,[t("p",{class:q(["heading",{"has-text-grey-light":!a.output.selected}])},u(a.output.name),3),_(n,{modelValue:i.volume,"onUpdate:modelValue":e[1]||(e[1]=m=>i.volume=m),min:0,max:100,step:1,tooltips:!1,disabled:!a.output.selected,classes:{target:"slider"},onChange:i.set_volume},null,8,["modelValue","disabled","onChange"])])])])])])}var DC=k(SC,[["render",OC]]);const zC={name:"PlayerButtonPlayPause",props:{icon_style:String,show_disabled_message:Boolean},computed:{is_playing(){return this.$store.state.player.state==="play"},is_pause_allowed(){return this.$store.getters.now_playing&&this.$store.getters.now_playing.data_kind!=="pipe"},disabled(){return!this.$store.state.queue||this.$store.state.queue.count<=0}},methods:{toggle_play_pause:function(){if(this.disabled){this.show_disabled_message&&this.$store.dispatch("add_notification",{text:"Queue is empty",type:"info",topic:"connection",timeout:2e3});return}this.is_playing&&this.is_pause_allowed?p.player_pause():this.is_playing&&!this.is_pause_allowed?p.player_stop():p.player_play()}}},NC=["disabled"],VC={class:"icon"};function BC(s,e,a,r,o,i){return l(),c("a",{disabled:i.disabled,onClick:e[0]||(e[0]=(...n)=>i.toggle_play_pause&&i.toggle_play_pause(...n))},[t("span",VC,[t("i",{class:q(["mdi",[a.icon_style,{"mdi-play":!i.is_playing,"mdi-pause":i.is_playing&&i.is_pause_allowed,"mdi-stop":i.is_playing&&!i.is_pause_allowed}]])},null,2)])],8,NC)}var MC=k(zC,[["render",BC]]);const FC={name:"PlayerButtonNext",props:{icon_style:String},computed:{disabled(){return!this.$store.state.queue||this.$store.state.queue.count<=0}},methods:{play_next:function(){this.disabled||p.player_next()}}},jC=["disabled"],GC={class:"icon"};function KC(s,e,a,r,o,i){return l(),c("a",{disabled:i.disabled,onClick:e[0]||(e[0]=(...n)=>i.play_next&&i.play_next(...n))},[t("span",GC,[t("i",{class:q(["mdi mdi-skip-forward",a.icon_style])},null,2)])],8,jC)}var HC=k(FC,[["render",KC]]);const WC={name:"PlayerButtonPrevious",props:{icon_style:String},computed:{disabled(){return!this.$store.state.queue||this.$store.state.queue.count<=0}},methods:{play_previous:function(){this.disabled||p.player_previous()}}},YC=["disabled"],QC={class:"icon"};function JC(s,e,a,r,o,i){return l(),c("a",{disabled:i.disabled,onClick:e[0]||(e[0]=(...n)=>i.play_previous&&i.play_previous(...n))},[t("span",QC,[t("i",{class:q(["mdi mdi-skip-backward",a.icon_style])},null,2)])],8,YC)}var XC=k(WC,[["render",JC]]);const ZC={name:"PlayerButtonShuffle",props:{icon_style:String},computed:{is_shuffle(){return this.$store.state.player.shuffle}},methods:{toggle_shuffle_mode:function(){p.player_shuffle(!this.is_shuffle)}}},t3={class:"icon"};function s3(s,e,a,r,o,i){return l(),c("a",{class:q({"is-warning":i.is_shuffle}),onClick:e[0]||(e[0]=(...n)=>i.toggle_shuffle_mode&&i.toggle_shuffle_mode(...n))},[t("span",t3,[t("i",{class:q(["mdi",[a.icon_style,{"mdi-shuffle":i.is_shuffle,"mdi-shuffle-disabled":!i.is_shuffle}]])},null,2)])],2)}var e3=k(ZC,[["render",s3]]);const i3={name:"PlayerButtonConsume",props:{icon_style:String},computed:{is_consume(){return this.$store.state.player.consume}},methods:{toggle_consume_mode:function(){p.player_consume(!this.is_consume)}}},o3={class:"icon"};function a3(s,e,a,r,o,i){return l(),c("a",{class:q({"is-warning":i.is_consume}),onClick:e[0]||(e[0]=(...n)=>i.toggle_consume_mode&&i.toggle_consume_mode(...n))},[t("span",o3,[t("i",{class:q(["mdi mdi-fire",a.icon_style])},null,2)])],2)}var n3=k(i3,[["render",a3]]);const l3={name:"PlayerButtonRepeat",props:{icon_style:String},computed:{is_repeat_all(){return this.$store.state.player.repeat==="all"},is_repeat_single(){return this.$store.state.player.repeat==="single"},is_repeat_off(){return!this.is_repeat_all&&!this.is_repeat_single}},methods:{toggle_repeat_mode:function(){this.is_repeat_all?p.player_repeat("single"):this.is_repeat_single?p.player_repeat("off"):p.player_repeat("all")}}},r3={class:"icon"};function d3(s,e,a,r,o,i){return l(),c("a",{class:q({"is-warning":!i.is_repeat_off}),onClick:e[0]||(e[0]=(...n)=>i.toggle_repeat_mode&&i.toggle_repeat_mode(...n))},[t("span",r3,[t("i",{class:q(["mdi",[a.icon_style,{"mdi-repeat":i.is_repeat_all,"mdi-repeat-once":i.is_repeat_single,"mdi-repeat-off":i.is_repeat_off}]])},null,2)])],2)}var c3=k(l3,[["render",d3]]);const _3={name:"PlayerButtonSeekBack",props:["seek_ms","icon_style"],computed:{now_playing(){return this.$store.getters.now_playing},is_stopped(){return this.$store.state.player.state==="stop"},disabled(){return!this.$store.state.queue||this.$store.state.queue.count<=0||this.is_stopped||this.now_playing.data_kind==="pipe"},visible(){return["podcast","audiobook"].includes(this.now_playing.media_kind)}},methods:{seek:function(){this.disabled||p.player_seek(this.seek_ms*-1)}}},u3=["disabled"],m3={class:"icon"};function h3(s,e,a,r,o,i){return i.visible?(l(),c("a",{key:0,disabled:i.disabled,onClick:e[0]||(e[0]=(...n)=>i.seek&&i.seek(...n))},[t("span",m3,[t("i",{class:q(["mdi mdi-rewind",a.icon_style])},null,2)])],8,u3)):y("",!0)}var p3=k(_3,[["render",h3]]);const f3={name:"PlayerButtonSeekForward",props:["seek_ms","icon_style"],computed:{now_playing(){return this.$store.getters.now_playing},is_stopped(){return this.$store.state.player.state==="stop"},disabled(){return!this.$store.state.queue||this.$store.state.queue.count<=0||this.is_stopped||this.now_playing.data_kind==="pipe"},visible(){return["podcast","audiobook"].includes(this.now_playing.media_kind)}},methods:{seek:function(){this.disabled||p.player_seek(this.seek_ms)}}},y3=["disabled"],g3={class:"icon"};function b3(s,e,a,r,o,i){return i.visible?(l(),c("a",{key:0,disabled:i.disabled,onClick:e[0]||(e[0]=(...n)=>i.seek&&i.seek(...n))},[t("span",g3,[t("i",{class:q(["mdi mdi-fast-forward",a.icon_style])},null,2)])],8,y3)):y("",!0)}var k3=k(f3,[["render",b3]]);const w3={name:"NavbarBottom",components:{NavbarItemLink:Hs,NavbarItemOutput:DC,Slider:Zt,PlayerButtonPlayPause:MC,PlayerButtonNext:HC,PlayerButtonPrevious:XC,PlayerButtonShuffle:e3,PlayerButtonConsume:n3,PlayerButtonRepeat:c3,PlayerButtonSeekForward:k3,PlayerButtonSeekBack:p3},data(){return{old_volume:0,playing:!1,loading:!1,stream_volume:10,show_outputs_menu:!1,show_desktop_outputs_menu:!1}},computed:{show_player_menu:{get(){return this.$store.state.show_player_menu},set(s){this.$store.commit(X,s)}},show_burger_menu(){return this.$store.state.show_burger_menu},zindex(){return this.show_burger_menu?"z-index: 20":""},state(){return this.$store.state.player},now_playing(){return this.$store.getters.now_playing},is_now_playing_page(){return this.$route.path==="/now-playing"},outputs(){return this.$store.state.outputs},player(){return this.$store.state.player},config(){return this.$store.state.config}},watch:{"$store.state.player.volume"(){this.player.volume>0&&(this.old_volume=this.player.volume)}},mounted(){this.setupAudio()},unmounted(){this.closeAudio()},methods:{on_click_outside_outputs(){this.show_outputs_menu=!1},set_volume:function(s){p.player_volume(s)},toggle_mute_volume:function(){this.player.volume>0?this.set_volume(0):this.set_volume(this.old_volume)},setupAudio:function(){const s=et.setupAudio();s.addEventListener("waiting",e=>{this.playing=!1,this.loading=!0}),s.addEventListener("playing",e=>{this.playing=!0,this.loading=!1}),s.addEventListener("ended",e=>{this.playing=!1,this.loading=!1}),s.addEventListener("error",e=>{this.closeAudio(),this.$store.dispatch("add_notification",{text:"HTTP stream error: failed to load stream or stopped loading due to network problem",type:"danger"}),this.playing=!1,this.loading=!1})},closeAudio:function(){et.stopAudio(),this.playing=!1},playChannel:function(){if(this.playing)return;const s="/stream.mp3";this.loading=!0,et.playSource(s),et.setVolume(this.stream_volume/100)},togglePlay:function(){if(!this.loading)return this.playing?this.closeAudio():this.playChannel()},set_stream_volume:function(s){this.stream_volume=s,et.setVolume(this.stream_volume/100)}}},v3={class:"navbar-brand fd-expanded"},$3=t("span",{class:"icon"},[t("i",{class:"mdi mdi-24px mdi-playlist-play"})],-1),x3={class:"is-clipped"},C3={class:"is-size-7 fd-is-text-clipped"},q3=t("br",null,null,-1),S3={key:0},P3={class:"icon"},A3={class:"icon"},T3={class:"navbar-dropdown is-right is-boxed",style:{"margin-right":"6px","margin-bottom":"6px","border-radius":"6px"}},R3={class:"navbar-item"},I3={class:"level is-mobile"},E3={class:"level-left fd-expanded"},L3={class:"level-item",style:{"flex-grow":"0"}},U3={class:"icon"},O3={class:"level-item fd-expanded"},D3={class:"fd-expanded"},z3=t("p",{class:"heading"},"Volume",-1),N3=t("hr",{class:"fd-navbar-divider"},null,-1),V3=t("hr",{class:"fd-navbar-divider"},null,-1),B3={class:"navbar-item"},M3={class:"level is-mobile"},F3={class:"level-left fd-expanded"},j3={class:"level-item",style:{"flex-grow":"0"}},G3=t("i",{class:"mdi mdi-18px mdi-radio-tower"},null,-1),K3=[G3],H3={class:"level-item fd-expanded"},W3={class:"fd-expanded"},Y3=C(" HTTP stream "),Q3=t("a",{href:"stream.mp3"},[t("span",{class:"is-lowercase"},"(stream.mp3)")],-1),J3=[Y3,Q3],X3=t("hr",{class:"fd-navbar-divider"},null,-1),Z3={class:"navbar-item"},t4={class:"level is-mobile fd-expanded"},s4={class:"level-item"},e4={class:"buttons has-addons"},i4=t("div",{class:"navbar-start"},null,-1),o4={class:"navbar-end"},a4={class:"navbar-item"},n4={class:"buttons is-centered"},l4=t("hr",{class:"fd-navbar-divider"},null,-1),r4={class:"navbar-item"},d4={class:"level is-mobile"},c4={class:"level-left fd-expanded"},_4={class:"level-item",style:{"flex-grow":"0"}},u4={class:"icon"},m4={class:"level-item fd-expanded"},h4={class:"fd-expanded"},p4=t("p",{class:"heading"},"Volume",-1),f4=t("hr",{class:"fd-navbar-divider"},null,-1),y4={class:"navbar-item fd-has-margin-bottom"},g4={class:"level is-mobile"},b4={class:"level-left fd-expanded"},k4={class:"level-item",style:{"flex-grow":"0"}},w4=t("i",{class:"mdi mdi-18px mdi-radio-tower"},null,-1),v4=[w4],$4={class:"level-item fd-expanded"},x4={class:"fd-expanded"},C4=C(" HTTP stream "),q4=t("a",{href:"stream.mp3"},[t("span",{class:"is-lowercase"},"(stream.mp3)")],-1),S4=[C4,q4];function P4(s,e,a,r,o,i){const n=h("navbar-item-link"),m=h("router-link"),f=h("player-button-previous"),g=h("player-button-seek-back"),b=h("player-button-play-pause"),$=h("player-button-seek-forward"),w=h("player-button-next"),P=h("Slider"),S=h("navbar-item-output"),F=h("player-button-repeat"),lt=h("player-button-shuffle"),rt=h("player-button-consume");return l(),c("nav",{class:q(["fd-bottom-navbar navbar is-white is-fixed-bottom",{"is-transparent":i.is_now_playing_page,"is-dark":!i.is_now_playing_page}]),style:ts(i.zindex),role:"navigation","aria-label":"player controls"},[t("div",v3,[_(n,{to:"/",exact:""},{default:d(()=>[$3]),_:1}),i.is_now_playing_page?y("",!0):(l(),v(m,{key:0,to:"/now-playing",class:"navbar-item is-expanded is-clipped","active-class":"is-active",exact:""},{default:d(()=>[t("div",x3,[t("p",C3,[t("strong",null,u(i.now_playing.title),1),q3,C(" "+u(i.now_playing.artist),1),i.now_playing.data_kind==="url"?(l(),c("span",S3," - "+u(i.now_playing.album),1)):y("",!0)])])]),_:1})),i.is_now_playing_page?(l(),v(f,{key:1,class:"navbar-item fd-margin-left-auto",icon_style:"mdi-24px"})):y("",!0),i.is_now_playing_page?(l(),v(g,{key:2,seek_ms:"10000",class:"navbar-item",icon_style:"mdi-24px"})):y("",!0),_(b,{class:"navbar-item",icon_style:"mdi-36px",show_disabled_message:""}),i.is_now_playing_page?(l(),v($,{key:3,seek_ms:"30000",class:"navbar-item",icon_style:"mdi-24px"})):y("",!0),i.is_now_playing_page?(l(),v(w,{key:4,class:"navbar-item",icon_style:"mdi-24px"})):y("",!0),t("a",{class:"navbar-item fd-margin-left-auto is-hidden-desktop",onClick:e[0]||(e[0]=D=>i.show_player_menu=!i.show_player_menu)},[t("span",P3,[t("i",{class:q(["mdi mdi-18px",{"mdi-chevron-up":!i.show_player_menu,"mdi-chevron-down":i.show_player_menu}])},null,2)])]),t("div",{class:q(["navbar-item has-dropdown has-dropdown-up fd-margin-left-auto is-hidden-touch",{"is-active":i.show_player_menu}])},[t("a",{class:"navbar-link is-arrowless",onClick:e[1]||(e[1]=D=>i.show_player_menu=!i.show_player_menu)},[t("span",A3,[t("i",{class:q(["mdi mdi-18px",{"mdi-chevron-up":!i.show_player_menu,"mdi-chevron-down":i.show_player_menu}])},null,2)])]),t("div",T3,[t("div",R3,[t("div",I3,[t("div",E3,[t("div",L3,[t("a",{class:"button is-white is-small",onClick:e[2]||(e[2]=(...D)=>i.toggle_mute_volume&&i.toggle_mute_volume(...D))},[t("span",U3,[t("i",{class:q(["mdi mdi-18px",{"mdi-volume-off":i.player.volume<=0,"mdi-volume-high":i.player.volume>0}])},null,2)])])]),t("div",O3,[t("div",D3,[z3,_(P,{modelValue:i.player.volume,"onUpdate:modelValue":e[3]||(e[3]=D=>i.player.volume=D),min:0,max:100,step:1,tooltips:!1,classes:{target:"slider"},onChange:i.set_volume},null,8,["modelValue","onChange"])])])])])]),N3,(l(!0),c(R,null,U(i.outputs,D=>(l(),v(S,{key:D.id,output:D},null,8,["output"]))),128)),V3,t("div",B3,[t("div",M3,[t("div",F3,[t("div",j3,[t("a",{class:q(["button is-white is-small",{"is-loading":o.loading}])},[t("span",{class:q(["icon fd-has-action",{"has-text-grey-light":!o.playing&&!o.loading,"is-loading":o.loading}]),onClick:e[4]||(e[4]=(...D)=>i.togglePlay&&i.togglePlay(...D))},K3,2)],2)]),t("div",H3,[t("div",W3,[t("p",{class:q(["heading",{"has-text-grey-light":!o.playing}])},J3,2),_(P,{modelValue:o.stream_volume,"onUpdate:modelValue":e[5]||(e[5]=D=>o.stream_volume=D),min:0,max:100,step:1,tooltips:!1,disabled:!o.playing,classes:{target:"slider"},onChange:i.set_stream_volume},null,8,["modelValue","disabled","onChange"])])])])])]),X3,t("div",Z3,[t("div",t4,[t("div",s4,[t("div",e4,[_(F,{class:"button"}),_(lt,{class:"button"}),_(rt,{class:"button"})])])])])])],2)]),t("div",{class:q(["navbar-menu is-hidden-desktop",{"is-active":i.show_player_menu}])},[i4,t("div",o4,[t("div",a4,[t("div",n4,[_(F,{class:"button",icon_style:"mdi-18px"}),_(lt,{class:"button",icon_style:"mdi-18px"}),_(rt,{class:"button",icon_style:"mdi-18px"})])]),l4,t("div",r4,[t("div",d4,[t("div",c4,[t("div",_4,[t("a",{class:"button is-white is-small",onClick:e[6]||(e[6]=(...D)=>i.toggle_mute_volume&&i.toggle_mute_volume(...D))},[t("span",u4,[t("i",{class:q(["mdi mdi-18px",{"mdi-volume-off":i.player.volume<=0,"mdi-volume-high":i.player.volume>0}])},null,2)])])]),t("div",m4,[t("div",h4,[p4,_(P,{modelValue:i.player.volume,"onUpdate:modelValue":e[7]||(e[7]=D=>i.player.volume=D),min:0,max:100,step:1,tooltips:!1,classes:{target:"slider"},onChange:i.set_volume},null,8,["modelValue","onChange"])])])])])]),(l(!0),c(R,null,U(i.outputs,D=>(l(),v(S,{key:D.id,output:D},null,8,["output"]))),128)),f4,t("div",y4,[t("div",g4,[t("div",b4,[t("div",k4,[t("a",{class:q(["button is-white is-small",{"is-loading":o.loading}])},[t("span",{class:q(["icon fd-has-action",{"has-text-grey-light":!o.playing&&!o.loading,"is-loading":o.loading}]),onClick:e[8]||(e[8]=(...D)=>i.togglePlay&&i.togglePlay(...D))},v4,2)],2)]),t("div",$4,[t("div",x4,[t("p",{class:q(["heading",{"has-text-grey-light":!o.playing}])},S4,2),_(P,{modelValue:o.stream_volume,"onUpdate:modelValue":e[9]||(e[9]=D=>o.stream_volume=D),min:0,max:100,step:1,tooltips:!1,disabled:!o.playing,classes:{target:"slider"},onChange:i.set_stream_volume},null,8,["modelValue","disabled","onChange"])])])])])])])],2)],6)}var A4=k(w3,[["render",P4]]);const T4={name:"NotificationList",components:{},data(){return{showNav:!1}},computed:{notifications(){return this.$store.state.notifications.list}},methods:{remove:function(s){this.$store.commit(Yt,s)}}},R4={key:0,class:"fd-notifications"},I4={class:"columns is-centered"},E4={class:"column is-half"},L4=["onClick"];function U4(s,e,a,r,o,i){return i.notifications.length>0?(l(),c("section",R4,[t("div",I4,[t("div",E4,[(l(!0),c(R,null,U(i.notifications,n=>(l(),c("div",{key:n.id,class:q(["notification has-shadow",["notification",n.type?`is-${n.type}`:""]])},[t("button",{class:"delete",onClick:m=>i.remove(n)},null,8,L4),C(" "+u(n.text),1)],2))),128))])])])):y("",!0)}var O4=k(T4,[["render",U4]]);const D4={name:"ModalDialogRemotePairing",props:["show"],emits:["close"],data(){return{pairing_req:{pin:""}}},computed:{pairing(){return this.$store.state.pairing}},watch:{show(){this.show&&(this.loading=!1,setTimeout(()=>{this.$refs.pin_field.focus()},10))}},methods:{kickoff_pairing(){p.pairing_kickoff(this.pairing_req).then(()=>{this.pairing_req.pin=""})}}},z4={key:0,class:"modal is-active"},N4={class:"modal-content fd-modal-card"},V4={class:"card"},B4={class:"card-content"},M4=t("p",{class:"title is-4"},"Remote pairing request",-1),F4={class:"label"},j4={class:"field"},G4={class:"control"},K4={class:"card-footer"},H4=t("span",{class:"icon"},[t("i",{class:"mdi mdi-cancel"})],-1),W4=t("span",{class:"is-size-7"},"Cancel",-1),Y4=[H4,W4],Q4=t("span",{class:"icon"},[t("i",{class:"mdi mdi-cellphone-iphone"})],-1),J4=t("span",{class:"is-size-7"},"Pair Remote",-1),X4=[Q4,J4];function Z4(s,e,a,r,o,i){return l(),c("div",null,[_(N,{name:"fade"},{default:d(()=>[a.show?(l(),c("div",z4,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>s.$emit("close"))}),t("div",N4,[t("div",V4,[t("div",B4,[M4,t("form",{onSubmit:e[2]||(e[2]=z((...n)=>i.kickoff_pairing&&i.kickoff_pairing(...n),["prevent"]))},[t("label",F4,u(i.pairing.remote),1),t("div",j4,[t("div",G4,[O(t("input",{ref:"pin_field","onUpdate:modelValue":e[1]||(e[1]=n=>o.pairing_req.pin=n),class:"input",type:"text",placeholder:"Enter pairing code"},null,512),[[B,o.pairing_req.pin]])])])],32)]),t("footer",K4,[t("a",{class:"card-footer-item has-text-danger",onClick:e[3]||(e[3]=n=>s.$emit("close"))},Y4),t("a",{class:"card-footer-item has-background-info has-text-white has-text-weight-bold",onClick:e[4]||(e[4]=(...n)=>i.kickoff_pairing&&i.kickoff_pairing(...n))},X4)])])]),t("button",{class:"modal-close is-large","aria-label":"close",onClick:e[5]||(e[5]=n=>s.$emit("close"))})])):y("",!0)]),_:1})])}var t8=k(D4,[["render",Z4]]);const s8={name:"ModalDialogUpdate",components:{ModalDialog:rs},props:["show"],emits:["close"],data(){return{rescan_metadata:!1}},computed:{library(){return this.$store.state.library},rss(){return this.$store.state.rss_count},spotify_enabled(){return this.$store.state.spotify.webapi_token_valid},update_dialog_scan_kind:{get(){return this.$store.state.update_dialog_scan_kind},set(s){this.$store.commit(ls,s)}}},methods:{update_library(){this.rescan_metadata?p.library_rescan(this.update_dialog_scan_kind):p.library_update(this.update_dialog_scan_kind)},close(){this.update_dialog_scan_kind="",this.$emit("close")}}},e8={key:0},i8=t("p",{class:"mb-3"},"Scan for new, deleted and modified files",-1),o8={key:0,class:"field"},a8={class:"control"},n8={class:"select is-small"},l8=t("option",{value:""},"Update everything",-1),r8=t("option",{value:"files"},"Only update local library",-1),d8={key:0,value:"spotify"},c8={key:1,value:"rss"},_8={class:"field"},u8={class:"checkbox is-size-7 is-small"},m8=C(" Rescan metadata for unmodified files "),h8={key:1},p8=t("p",{class:"mb-3"},"Library update in progress ...",-1),f8=[p8];function y8(s,e,a,r,o,i){const n=h("modal-dialog");return l(),v(n,{show:a.show,title:"Update library",ok_action:i.library.updating?"":"Rescan",close_action:"Close",onOk:i.update_library,onClose:e[2]||(e[2]=m=>i.close())},{"modal-content":d(()=>[i.library.updating?(l(),c("div",h8,f8)):(l(),c("div",e8,[i8,i.spotify_enabled||i.rss.tracks>0?(l(),c("div",o8,[t("div",a8,[t("div",n8,[O(t("select",{"onUpdate:modelValue":e[0]||(e[0]=m=>i.update_dialog_scan_kind=m)},[l8,r8,i.spotify_enabled?(l(),c("option",d8," Only update Spotify ")):y("",!0),i.rss.tracks>0?(l(),c("option",c8," Only update RSS feeds ")):y("",!0)],512),[[ie,i.update_dialog_scan_kind]])])])])):y("",!0),t("div",_8,[t("label",u8,[O(t("input",{"onUpdate:modelValue":e[1]||(e[1]=m=>o.rescan_metadata=m),type:"checkbox"},null,512),[[Q,o.rescan_metadata]]),m8])])]))]),_:1},8,["show","ok_action","onOk"])}var g8=k(s8,[["render",y8]]);const b8={name:"App",components:{NavbarTop:qC,NavbarBottom:A4,NotificationList:O4,ModalDialogRemotePairing:t8,ModalDialogUpdate:g8},data(){return{token_timer_id:0,reconnect_attempts:0,pairing_active:!1}},computed:{show_burger_menu:{get(){return this.$store.state.show_burger_menu},set(s){this.$store.commit(J,s)}},show_player_menu:{get(){return this.$store.state.show_player_menu},set(s){this.$store.commit(X,s)}},show_update_dialog:{get(){return this.$store.state.show_update_dialog},set(s){this.$store.commit(it,s)}}},watch:{show_burger_menu(){this.update_is_clipped()},show_player_menu(){this.update_is_clipped()}},created:function(){Y.locale(navigator.language),this.connect(),this.$Progress.start(),this.$router.beforeEach((s,e,a)=>{if(s.meta.show_progress){if(s.meta.progress!==void 0){const r=s.meta.progress;this.$Progress.parseMeta(r)}this.$Progress.start()}a()}),this.$router.afterEach((s,e)=>{s.meta.show_progress&&this.$Progress.finish()})},methods:{connect:function(){p.config().then(({data:s})=>{this.$store.commit(bs,s),this.$store.commit(Ft,s.hide_singles),document.title=s.library_name,this.open_ws(),this.$Progress.finish()}).catch(()=>{this.$store.dispatch("add_notification",{text:"Failed to connect to OwnTone server",type:"danger",topic:"connection"})})},open_ws:function(){if(this.$store.state.config.websocket_port<=0){this.$store.dispatch("add_notification",{text:"Missing websocket port",type:"danger"});return}const s=this;let e="ws://";window.location.protocol==="https:"&&(e="wss://");let a=e+window.location.hostname+":"+s.$store.state.config.websocket_port;const r=new oe(a,"notify",{reconnectInterval:1e3,maxReconnectInterval:2e3});r.onopen=function(){s.reconnect_attempts=0,r.send(JSON.stringify({notify:["update","database","player","options","outputs","volume","queue","spotify","lastfm","pairing"]})),s.update_outputs(),s.update_player_status(),s.update_library_stats(),s.update_settings(),s.update_queue(),s.update_spotify(),s.update_lastfm(),s.update_pairing()},r.onclose=function(){};var o=!1;function i(){o||(s.update_outputs(),s.update_player_status(),s.update_library_stats(),s.update_settings(),s.update_queue(),s.update_spotify(),s.update_lastfm(),s.update_pairing(),o=!0,setTimeout(function(){o=!1},500))}window.addEventListener("focus",i),document.addEventListener("visibilitychange",function(){document.visibilityState==="visible"&&i()}),r.onmessage=function(n){const m=JSON.parse(n.data);(m.notify.includes("update")||m.notify.includes("database"))&&s.update_library_stats(),(m.notify.includes("player")||m.notify.includes("options")||m.notify.includes("volume"))&&s.update_player_status(),(m.notify.includes("outputs")||m.notify.includes("volume"))&&s.update_outputs(),m.notify.includes("queue")&&s.update_queue(),m.notify.includes("spotify")&&s.update_spotify(),m.notify.includes("lastfm")&&s.update_lastfm(),m.notify.includes("pairing")&&s.update_pairing()}},update_library_stats:function(){p.library_stats().then(({data:s})=>{this.$store.commit(ws,s)}),p.library_count("media_kind is audiobook").then(({data:s})=>{this.$store.commit(vs,s)}),p.library_count("media_kind is podcast").then(({data:s})=>{this.$store.commit($s,s)}),p.library_count("scan_kind is rss").then(({data:s})=>{this.$store.commit(xs,s)})},update_outputs:function(){p.outputs().then(({data:s})=>{this.$store.commit(Cs,s.outputs)})},update_player_status:function(){p.player_status().then(({data:s})=>{this.$store.commit(es,s)})},update_queue:function(){p.queue().then(({data:s})=>{this.$store.commit(qs,s)})},update_settings:function(){p.settings().then(({data:s})=>{this.$store.commit(ks,s)})},update_lastfm:function(){p.lastfm().then(({data:s})=>{this.$store.commit(Ss,s)})},update_spotify:function(){p.spotify().then(({data:s})=>{this.$store.commit(Ps,s),this.token_timer_id>0&&(window.clearTimeout(this.token_timer_id),this.token_timer_id=0),s.webapi_token_expires_in>0&&s.webapi_token&&(this.token_timer_id=window.setTimeout(this.update_spotify,1e3*s.webapi_token_expires_in))})},update_pairing:function(){p.pairing().then(({data:s})=>{this.$store.commit(As,s),this.pairing_active=s.active})},update_is_clipped:function(){this.show_burger_menu||this.show_player_menu?document.querySelector("html").classList.add("is-clipped"):document.querySelector("html").classList.remove("is-clipped")}},template:"<App/>"},k8={id:"app"};function w8(s,e,a,r,o,i){const n=h("navbar-top"),m=h("vue-progress-bar"),f=h("router-view"),g=h("modal-dialog-remote-pairing"),b=h("modal-dialog-update"),$=h("notification-list"),w=h("navbar-bottom");return l(),c("div",k8,[_(n),_(m,{class:"fd-progress-bar"}),_(f,null,{default:d(({Component:P})=>[(l(),v(ae(P),{class:"fd-page"}))]),_:1}),_(g,{show:o.pairing_active,onClose:e[0]||(e[0]=P=>o.pairing_active=!1)},null,8,["show"]),_(b,{show:i.show_update_dialog,onClose:e[1]||(e[1]=P=>i.show_update_dialog=!1)},null,8,["show"]),O(_($,null,null,512),[[Nt,!i.show_burger_menu]]),_(w),O(t("div",{class:"fd-overlay-fullscreen",onClick:e[2]||(e[2]=P=>i.show_burger_menu=i.show_player_menu=!1)},null,512),[[Nt,i.show_burger_menu||i.show_player_menu]])])}var v8=k(b8,[["render",w8]]);function Ws(){const s=window.matchMedia("(prefers-color-scheme: dark)"),e=localStorage.getItem("preferred_colorscheme"),a=document.querySelector('meta[name="theme-color"]');e==="dark"||e==="system"&&s.matches?(document.documentElement.classList.add("dark-theme"),a.setAttribute("content","#000000")):(e=="light"||e==="system"&&!s.matches)&&(document.documentElement.classList.remove("dark-theme"),a.setAttribute("content","#ffffff"))}window.addEventListener("load",()=>{localStorage.getItem("preferred_colorscheme")||localStorage.setItem("preferred_colorscheme","system"),Ws()});window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",s=>{Ws()});const Ys=ne(v8).use(T).use(Ks).use(le,{failedColor:"red",height:"1px"}).use(re).use(de,{log:!1}).use(ce);Ys.config.globalProperties.$filters=O2;Ys.mount("#app");
